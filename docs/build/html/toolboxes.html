<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Toolboxes &mdash; LuxPy 1.9.8 documentation</title><link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Color sub-package" href="color.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> LuxPy
          </a>
              <div class="version">
                1.9.8
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="license.html">License: GPLv3</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="required_packages.html">Imported (required) packages</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="luxpy_structure.html">Luxpy package structure</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="utils.html">Utils sub-package</a></li>
<li class="toctree-l2"><a class="reference internal" href="math.html">Math sub-package</a></li>
<li class="toctree-l2"><a class="reference internal" href="spectrum.html">Spectrum sub-package</a></li>
<li class="toctree-l2"><a class="reference internal" href="color.html">Color sub-package</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Toolboxes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#photbiochem">photbiochem/</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#module-for-calculating-cie-s026-2018-tn003-2015-photobiological-quantities">Module for calculating CIE (S026:2018 &amp; TN003:2015) photobiological quantities</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-for-calculation-of-cyanosis-index-as-nzs-1680-2-5-1997">Module for calculation of cyanosis index (AS/NZS 1680.2.5:1997)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-for-blue-light-hazard-calculations">Module for Blue light hazard calculations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#indvcmf">indvcmf/</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#module-for-individual-observer-lms-cmfs-asano-2016-and-cie-tc1-97">Module for Individual Observer lms-CMFs (Asano, 2016 and CIE TC1-97)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#spdbuild">spdbuild/</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#module-for-building-and-optimizing-spds">Module for building and optimizing SPDs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-for-building-and-optimizing-spds-2">Module for building and optimizing SPDs (2)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#hypspcim">hypspcim/</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#module-for-hyper-spectral-image-simulation">Module for hyper spectral image simulation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#dispcal">dispcal/</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#module-for-display-characterization">Module for display characterization</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#rgb2spec">rgb2spec/</a></li>
<li class="toctree-l3"><a class="reference internal" href="#iolidfiles">iolidfiles/</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#module-for-reading-and-writing-ies-and-ldt-files">Module for reading and writing IES and LDT files.</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#spectro">spectro/</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#package-for-spectral-measurements">Package for spectral measurements</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#sherbrooke-spectral-indices">sherbrooke_spectral_indices/</a></li>
<li class="toctree-l3"><a class="reference internal" href="#spectral-mismatch-and-uncertainty">spectral_mismatch_and_uncertainty/</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#toolbox-for-spectral-mismatch-and-measurement-uncertainty-calculations">Toolbox for spectral mismatch and measurement uncertainty calculations</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">LuxPy</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="luxpy_structure.html">Luxpy package structure</a> &raquo;</li>
      <li>Toolboxes</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/toolboxes.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="toolboxes">
<h1>Toolboxes<a class="headerlink" href="#toolboxes" title="Permalink to this headline">¶</a></h1>
<div class="section" id="photbiochem">
<h2>photbiochem/<a class="headerlink" href="#photbiochem" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">py:</th><td class="field-body"><ul class="first simple">
<li>__init__.py</li>
<li>cie_tn003_2015.py</li>
<li>ASNZS_1680_2_5_1997_COI.py</li>
<li>circadian_CS_CLa_lrc.py</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">namespace:</th><td class="field-body"><p class="first last">luxpy.photbiochem</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<span class="target" id="module-luxpy.toolboxes.photbiochem"></span><div class="section" id="module-for-calculating-cie-s026-2018-tn003-2015-photobiological-quantities">
<h3>Module for calculating CIE (S026:2018 &amp; TN003:2015) photobiological quantities<a class="headerlink" href="#module-for-calculating-cie-s026-2018-tn003-2015-photobiological-quantities" title="Permalink to this headline">¶</a></h3>
<p>(Eelc, Eemc, Eesc, Eer, Eez, and Elc, Emc, Esc, Er, Ez)</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="17%" />
<col width="22%" />
<col width="22%" />
<col width="10%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Photoreceptor</th>
<th class="head">Photopigment
(label, α)</th>
<th class="head">Spectral efficiency
sα(λ)</th>
<th class="head">Quantity
(α-opic irradiance)</th>
<th class="head">Q-symbol
(Ee,α)</th>
<th class="head">Unit symbol</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>l-cone</td>
<td>photopsin (lc)</td>
<td>erythrolabe</td>
<td>erythropic</td>
<td>Ee,lc</td>
<td>W.m−2</td>
</tr>
<tr class="row-odd"><td>m-cone</td>
<td>photopsin (mc)</td>
<td>chlorolabe</td>
<td>chloropic</td>
<td>Ee,mc</td>
<td>W.m−2</td>
</tr>
<tr class="row-even"><td>s-cone</td>
<td>photopsin (sc)</td>
<td>cyanolabe</td>
<td>cyanopic</td>
<td>Ee,sc</td>
<td>W.m−2</td>
</tr>
<tr class="row-odd"><td>rod</td>
<td>rhodopsin (r)</td>
<td>rhodopic</td>
<td>rhodopic</td>
<td>Ee,r</td>
<td>W.m−2</td>
</tr>
<tr class="row-even"><td>ipRGC</td>
<td>melanopsin (z)</td>
<td>melanopic</td>
<td>melanopic</td>
<td>Ee,z</td>
<td>W.m−2</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">CIE recommends that the α-opic irradiance is determined by convolving the spectral</div>
<div class="line">irradiance, Ee,λ(λ) (W⋅m−2), for each wavelength, with the action spectrum, sα(λ), </div>
<div class="line">where sα(λ) is normalized to one at its peak:</div>
<div class="line"><br /></div>
<div class="line-block">
<div class="line">Ee,α = ∫ Ee,λ(λ) sα(λ) dλ </div>
<div class="line"><br /></div>
</div>
<div class="line">where the corresponding units are W⋅m−2 in each case. </div>
<div class="line"><br /></div>
<div class="line">The equivalent luminance is calculated as:</div>
<div class="line"><br /></div>
<div class="line-block">
<div class="line">E,α = Km ⋅ ∫ Ee,λ(λ) sα(λ) dλ ⋅ ∫ V(λ) dλ / ∫ sα(λ) dλ</div>
<div class="line"><br /></div>
</div>
<div class="line">To avoid ambiguity, the weighting function used must be stated, so, for example, </div>
<div class="line">cyanopic refers to the cyanopic irradiance weighted using </div>
<div class="line">the s-cone or ssc(λ) spectral efficiency function.</div>
</div>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">_PHOTORECEPTORS:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">[‘l-cone’, ‘m-cone’,’s-cone’, ‘rod’, ‘iprgc’]</td>
</tr>
<tr class="field-even field"><th class="field-name">_Ee_SYMBOLS:</th><td class="field-body">[‘Ee,lc’,’Ee,mc’, ‘Ee,sc’,’Ee,r’,  ‘Ee,z’]</td>
</tr>
<tr class="field-odd field"><th class="field-name">_E_SYMBOLS:</th><td class="field-body">[‘E,lc’,’E,mc’, ‘E,sc’,’E,r’,  ‘E,z’]</td>
</tr>
<tr class="field-even field"><th class="field-name">_Q_SYMBOLS:</th><td class="field-body">[‘Q,lc’,’Q,mc’, ‘Q,sc’,’Q,r’,  ‘Q,z’]</td>
</tr>
<tr class="field-odd field"><th class="field-name">_Ee_UNITS:</th><td class="field-body">[‘W⋅m−2’] * 5</td>
</tr>
<tr class="field-even field"><th class="field-name">_E_UNITS:</th><td class="field-body">[‘lux’] * 5</td>
</tr>
<tr class="field-odd field"><th class="field-name">_Q_UNITS:</th><td class="field-body">[‘photons/m2/s’] * 5</td>
</tr>
<tr class="field-even field"><th class="field-name">_QUANTITIES:</th><td class="field-body"><div class="first last line-block">
<div class="line">list with actinic types of irradiance, illuminance</div>
<div class="line">[‘erythropic’, </div>
<div class="line-block">
<div class="line">‘chloropic’,</div>
<div class="line">‘cyanopic’,</div>
<div class="line">‘rhodopic’,</div>
<div class="line">‘melanopic’] </div>
</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">_ACTIONSPECTRA:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with default CIE-S026:2018 alpha-actinic action spectra. (stored in file:</div>
<div class="line">‘./data/cie_S026_2018_SI_action_spectra_CIEToolBox_v1.049.dat’)</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">_ACTIONSPECTRA_CIES026:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with alpha-actinic action spectra. (stored in file:</div>
<div class="line">‘./data/cie_S026_2018_SI_action_spectra_CIEToolBox_v1.049.dat’)</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">_ACTIONSPECTRA_CIETN003:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with CIE-TN003:2015 alpha-actinic action spectra. (stored in file:</div>
<div class="line">‘./data/cie_tn003_2015_SI_action_spectra.dat’)</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">spd_to_aopicE():</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">Calculate alpha-opic irradiance (Ee,α) and equivalent </div>
<div class="line">luminance (Eα) values for the l-cone, m-cone, s-cone, </div>
<div class="line">rod and iprgc (α) photoreceptor cells following </div>
<div class="line">CIE S026:2018 (= default actionspectra) or CIE TN003:2015.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">spd_to_aopicEDI():</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">Calculate alpha-opic equivalent daylight (D65) illuminance (lx)</div>
<div class="line">for the l-cone, m-cone, s-cone, rod and iprgc (α) photoreceptor cells.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">spd_to_aopicDER():</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">Calculate α-opic Daylight (D65) Efficacy Ratio</div>
<div class="line">for the l-cone, m-cone, s-cone, rod and iprgc (α) photoreceptor cells.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">spd_to_aopicELR():</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">Calculate α-opic Efficacy of Luminous Radiation</div>
<div class="line">for the l-cone, m-cone, s-cone, rod and iprgc (α) photoreceptor cells.</div>
</div>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<dl class="docutils">
<dt>References:</dt>
<dd><p class="first">1. <a class="reference external" href="https://cie.co.at/publications/cie-system-metrology-optical-radiation-iprgc-influenced-responses-light-0">CIE-S026:E2018 (2018). 
CIE System for Metrology of Optical Radiation for ipRGC-Influenced Responses to Light 
(Vienna, Austria).</a>
(<a class="reference external" href="https://files.cie.co.at/CIE%20S%20026%20alpha-opic%20Toolbox%20User%20Guide.pdf">https://files.cie.co.at/CIE%20S%20026%20alpha-opic%20Toolbox%20User%20Guide.pdf</a>)</p>
<p class="last">2. <a class="reference external" href="http://www.cie.co.at/publications/report-first-international-workshop-circadian-and-neurophysiological-photometry-2013">CIE-TN003:2015 (2015). 
Report on the first international workshop on 
circadian and neurophysiological photometry, 2013 
(Vienna, Austria).</a>
(<a class="reference external" href="http://files.cie.co.at/785_CIE_TN_003-2015.pdf">http://files.cie.co.at/785_CIE_TN_003-2015.pdf</a>)</p>
</dd>
</dl>
</div>
<div class="section" id="module-for-calculation-of-cyanosis-index-as-nzs-1680-2-5-1997">
<h3>Module for calculation of cyanosis index (AS/NZS 1680.2.5:1997)<a class="headerlink" href="#module-for-calculation-of-cyanosis-index-as-nzs-1680-2-5-1997" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">_COI_OBS:</th><td class="field-body">Default CMF set for calculations</td>
</tr>
<tr class="field-even field"><th class="field-name">_COI_CSPACE:</th><td class="field-body">Default color space (CIELAB)</td>
</tr>
<tr class="field-odd field"><th class="field-name">_COI_RFL_BLOOD:</th><td class="field-body">ndarray with reflectance spectra of 100% and 50% 
oxygenated blood</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">spd_to_COI_ASNZS1680:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">Calculate the Cyanosis Observartion Index (COI) 
[ASNZS 1680.2.5-1995]</td>
</tr>
</tbody>
</table>
</div></blockquote>
<dl class="docutils">
<dt>Reference:</dt>
<dd>AS/NZS1680.2.5 (1997). INTERIOR LIGHTING PART 2.5: HOSPITAL AND MEDICAL TASKS.</dd>
</dl>
</div>
<div class="section" id="module-for-blue-light-hazard-calculations">
<h3>Module for Blue light hazard calculations<a class="headerlink" href="#module-for-blue-light-hazard-calculations" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">_BLH:</th><td class="field-body">Blue Light Hazard function</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">spd_to_blh_eff():</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">Calculate Blue Light Hazard efficacy (K) or efficiency (eta) of radiation.</td>
</tr>
</tbody>
</table>
</div></blockquote>
<dl class="docutils">
<dt>References:</dt>
<dd><ol class="first last arabic simple">
<li>IEC 62471:2006, 2006, Photobiological safety of lamps and lamp systems.</li>
<li>IEC TR 62778, 2014, Application of IEC 62471 for the assessment of blue light hazard to light sources and luminaires.</li>
</ol>
</dd>
</dl>
<dl class="function">
<dt id="luxpy.toolboxes.photbiochem.spd_to_aopicE">
<code class="descclassname">luxpy.toolboxes.photbiochem.</code><code class="descname">spd_to_aopicE</code><span class="sig-paren">(</span><em>sid</em>, <em>Ee=None</em>, <em>E=None</em>, <em>Q=None</em>, <em>cieobs='1931_2'</em>, <em>sid_units='W/m2'</em>, <em>out='Eeas'</em>, <em>actionspectra='CIE-S026'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/photbiochem/alpha_opic_quantities_cie_s026_2018_cie_tn003_2015.html#spd_to_aopicE"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.photbiochem.spd_to_aopicE" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate alpha-opic irradiance (Ee,α) values (W/m²) for the l-cone, m-cone, 
s-cone, rod and iprgc (α) photoreceptor cells following CIE S026:2018.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">sid:</th><td class="field-body"><div class="first last line-block">
<div class="line">numpy.ndarray with retinal spectral irradiance in :sid_units: </div>
<div class="line">(if ‘uW/cm2’, sid will be converted to SI units ‘W/m2’)</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Ee:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">If not None: normalize :sid: to an irradiance of :Ee:</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">E:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">If not None: normalize :sid: to an illuminance of :E:</div>
<div class="line">Note that E is calculate using a Km factor corrected to standard air.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Q:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">If not None: Normalize :sid: to a quantal energy of :Q:</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">cieobs:</th><td class="field-body"><div class="first last line-block">
<div class="line">_CIEOBS or str, optional</div>
<div class="line">Type of cmf set to use for photometric units.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">sid_units:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘W/m2’, optional</div>
<div class="line">Other option ‘uW/m2’, input units of :sid:</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">out:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘Eeas’ or str, optional</div>
<div class="line">Determines values to return. </div>
<div class="line">(to get also get equivalent illuminance Eα set :out: to ‘Eeas,Eas’)</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">actionspectra:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘CIES026’, optional</div>
<div class="line">Actionspectra to use in calculation </div>
<div class="line">options: </div>
<div class="line">- ‘CIE-S026’: will use action spectra as defined in CIE S026 </div>
<div class="line">- ‘CIE-TN003’: will use action spectra as defined in CIE TN003</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first last line-block">
<div class="line">Eeas a numpy.ndarray with the α-opic irradiance</div>
<div class="line">of all spectra in :sid: in SI-units (W/m²). </div>
<div class="line"><br /></div>
<div class="line">(other choice can be set using :out:)</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>References:</dt>
<dd><p class="first">1. <a class="reference external" href="https://cie.co.at/publications/cie-system-metrology-optical-radiation-iprgc-influenced-responses-light-0">CIE-S026:E2018 (2018). 
CIE System for Metrology of Optical Radiation for ipRGC-Influenced Responses to Light 
(Vienna, Austria).</a>
(<a class="reference external" href="https://files.cie.co.at/CIE%20S%20026%20alpha-opic%20Toolbox%20User%20Guide.pdf">https://files.cie.co.at/CIE%20S%20026%20alpha-opic%20Toolbox%20User%20Guide.pdf</a>)</p>
<p class="last">2. <a class="reference external" href="http://www.cie.co.at/publications/report-first-international-workshop-circadian-and-neurophysiological-photometry-2013">CIE-TN003:2015 (2015). 
Report on the first international workshop on 
circadian and neurophysiological photometry, 2013 
(Vienna, Austria).</a>
(<a class="reference external" href="http://files.cie.co.at/785_CIE_TN_003-2015.pdf">http://files.cie.co.at/785_CIE_TN_003-2015.pdf</a>)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.photbiochem.spd_to_aopicEDI">
<code class="descclassname">luxpy.toolboxes.photbiochem.</code><code class="descname">spd_to_aopicEDI</code><span class="sig-paren">(</span><em>sid</em>, <em>Ee=None</em>, <em>E=None</em>, <em>Q=None</em>, <em>cieobs='1931_2'</em>, <em>sid_units='W/m2'</em>, <em>actionspectra='CIE-S026'</em>, <em>ref='D65'</em>, <em>out='a_edi'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/photbiochem/alpha_opic_quantities_cie_s026_2018_cie_tn003_2015.html#spd_to_aopicEDI"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.photbiochem.spd_to_aopicEDI" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate alpha-opic equivalent daylight (D65) illuminance (lux)
for the l-cone, m-cone, s-cone, rod and iprgc (α) photoreceptor cells.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">sid:</th><td class="field-body"><div class="first last line-block">
<div class="line">numpy.ndarray with retinal spectral irradiance in :sid_units: </div>
<div class="line">(if ‘uW/cm2’, sid will be converted to SI units ‘W/m2’)</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Ee:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">If not None: normalize :sid: to an irradiance of :Ee:</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">E:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">If not None: normalize :sid: to an illuminance of :E:</div>
<div class="line">Note that E is calculate using a Km factor corrected to standard air.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Q:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">If not None: nNormalize :sid: to a quantal energy of :Q:</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">cieobs:</th><td class="field-body"><div class="first last line-block">
<div class="line">_CIEOBS or str, optional</div>
<div class="line">Type of cmf set to use for photometric units.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">sid_units:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘W/m2’, optional</div>
<div class="line">Other option ‘uW/m2’, input units of :sid:</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">actionspectra:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘CIES026’, optional</div>
<div class="line">Actionspectra to use in calculation </div>
<div class="line">options: </div>
<div class="line">- ‘CIE-S026’: will use action spectra as defined in CIE S026 </div>
<div class="line">- ‘CIE-TN003’: will use action spectra as defined in CIE TN003</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">ref:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘D65’, optional</div>
<div class="line">Reference (daylight) spectrum to use. (‘D65’ or ‘E’ or ndarray)</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">out:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘Eeas, Eas’ or str, optional</div>
<div class="line">Determines values to return.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with the α-opic Equivalent Daylight Illuminance (lux) with the </div>
<div class="line">for the l-cone, m-cone, s-cone, rod and iprgc photoreceptors</div>
<div class="line">of all spectra in :sid: in SI-units. </div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.photbiochem.spd_to_aopicDER">
<code class="descclassname">luxpy.toolboxes.photbiochem.</code><code class="descname">spd_to_aopicDER</code><span class="sig-paren">(</span><em>sid</em>, <em>cieobs='1931_2'</em>, <em>sid_units='W/m2'</em>, <em>actionspectra='CIE-S026'</em>, <em>ref='D65'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/photbiochem/alpha_opic_quantities_cie_s026_2018_cie_tn003_2015.html#spd_to_aopicDER"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.photbiochem.spd_to_aopicDER" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate α-opic Daylight (D65) Efficacy Ratio (= α-opic Daylight (D65) Efficiency)
for the l-cone, m-cone, s-cone, rod and iprgc (α) photoreceptor cells.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">sid:</th><td class="field-body"><div class="first last line-block">
<div class="line">numpy.ndarray with retinal spectral irradiance in :sid_units: </div>
<div class="line">(if ‘uW/cm2’, sid will be converted to SI units ‘W/m2’)</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">cieobs:</th><td class="field-body"><div class="first last line-block">
<div class="line">_CIEOBS or str, optional</div>
<div class="line">Type of cmf set to use for photometric units.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">sid_units:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘W/m2’, optional</div>
<div class="line">Other option ‘uW/m2’, input units of :sid:</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">actionspectra:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘CIES026’, optional</div>
<div class="line">Actionspectra to use in calculation </div>
<div class="line">options: </div>
<div class="line">- ‘CIE-S026’: will use action spectra as defined in CIE S026 </div>
<div class="line">- ‘CIE-TN003’: will use action spectra as defined in CIE TN003</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">ref:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘D65’, optional</div>
<div class="line">Reference (daylight) spectrum to use. (‘D65’ or ‘E’ or ndarray)</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with the α-opic Daylight Efficacy Ratio with the </div>
<div class="line">for the l-cone, m-cone, s-cone, rod and iprgc photoreceptors</div>
<div class="line">of all spectra in :sid: in SI-units. </div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.photbiochem.spd_to_aopicELR">
<code class="descclassname">luxpy.toolboxes.photbiochem.</code><code class="descname">spd_to_aopicELR</code><span class="sig-paren">(</span><em>sid</em>, <em>cieobs='1931_2'</em>, <em>sid_units='W/m2'</em>, <em>actionspectra='CIE-S026'</em>, <em>ref='D65'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/photbiochem/alpha_opic_quantities_cie_s026_2018_cie_tn003_2015.html#spd_to_aopicELR"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.photbiochem.spd_to_aopicELR" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate α-opic Efficacy of Luminous Radiation (W/lm)
for the l-cone, m-cone, s-cone, rod and iprgc (α) photoreceptor cells.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">sid:</th><td class="field-body"><div class="first last line-block">
<div class="line">numpy.ndarray with retinal spectral irradiance in :sid_units: </div>
<div class="line">(if ‘uW/cm2’, sid will be converted to SI units ‘W/m2’)</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">cieobs:</th><td class="field-body"><div class="first last line-block">
<div class="line">_CIEOBS or str, optional</div>
<div class="line">Type of cmf set to use for photometric units.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">sid_units:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘W/m2’, optional</div>
<div class="line">Other option ‘uW/m2’, input units of :sid:</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">actionspectra:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘CIES026’, optional</div>
<div class="line">Actionspectra to use in calculation </div>
<div class="line">options: </div>
<div class="line">- ‘CIE-S026’: will use action spectra as defined in CIE S026 </div>
<div class="line">- ‘CIE-TN003’: will use action spectra as defined in CIE TN003</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">ref:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘D65’, optional</div>
<div class="line">Reference (daylight) spectrum to use. (‘D65’ or ‘E’ or ndarray)</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with the α-opic Efficacy of Luminous Radiation (W/lm) with the </div>
<div class="line">for the l-cone, m-cone, s-cone, rod and iprgc photoreceptors</div>
<div class="line">of all spectra in :sid: in SI-units. </div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.photbiochem.spd_to_COI_ASNZS1680">
<code class="descclassname">luxpy.toolboxes.photbiochem.</code><code class="descname">spd_to_COI_ASNZS1680</code><span class="sig-paren">(</span><em>S=None</em>, <em>tf='lab'</em>, <em>cieobs='1931_2'</em>, <em>out='COI</em>, <em>cct'</em>, <em>extrapolate_rfl=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/photbiochem/ASNZS_1680_2_5_1997_COI.html#spd_to_COI_ASNZS1680"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.photbiochem.spd_to_COI_ASNZS1680" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the Cyanosis Observation Index (COI) [ASNZS 1680.2.5-1995].</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">S:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with light source spectrum (first column are wavelengths).</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">tf:</th><td class="field-body"><div class="first last line-block">
<div class="line">_COI_CSPACE, optional</div>
<div class="line">Color space in which to calculate the COI.</div>
<div class="line">Default is CIELAB.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">cieobs:</th><td class="field-body"><div class="first last line-block">
<div class="line">_COI_CIEOBS, optional</div>
<div class="line">CMF set to use. </div>
<div class="line">Default is ‘1931_2’.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">out:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘COI,cct’ or str, optional</div>
<div class="line">Determines output.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">extrapolate_rfl:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">False, optional</div>
<div class="line">If False: </div>
<div class="line-block">
<div class="line">limit the wavelength range of the source to that of the standard</div>
<div class="line">reflectance spectra for the 50% and 100% oxygenated blood.</div>
</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">COI:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with cyanosis indices for input sources.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">cct:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with correlated color temperatures.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Note:</dt>
<dd><p class="first">Clause 7.2 of the ASNZS 1680.2.5-1995. standard mentions the properties
demanded of the light source used in region where visual conditions 
suitable to the detection of cyanosis should be provided:</p>
<blockquote class="last">
<div><p>1. The correlated color temperature (CCT) of the source should be from 
3300 to 5300 K.</p>
<ol class="arabic simple" start="2">
<li>The cyanosis observation index should not exceed 3.3</li>
</ol>
</div></blockquote>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.photbiochem.spd_to_CS_CLa_lrc">
<code class="descclassname">luxpy.toolboxes.photbiochem.</code><code class="descname">spd_to_CS_CLa_lrc</code><span class="sig-paren">(</span><em>El=None</em>, <em>version='CLa2.0'</em>, <em>E=None</em>, <em>sum_sources=False</em>, <em>interpolate_sources=True</em>, <em>t_CS=1.0</em>, <em>f_CS=1.0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/photbiochem/circadian_CS_CLa_lrc.html#spd_to_CS_CLa_lrc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.photbiochem.spd_to_CS_CLa_lrc" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate Circadian Stimulus (CS) and Circadian Light (CLa, CLa2.0).</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">El:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray, optional</div>
<div class="line">Defaults to D65</div>
<div class="line">light source spectral irradiance distribution</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">version:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘CLa2.0’, optional</div>
<div class="line">CLa version to calculate </div>
<div class="line">Options: </div>
<div class="line">- ‘CLa1.0’: Rea et al. 2012</div>
<div class="line">- ‘CLa2.0’: Rea et al. 2021, 2022</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">E:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, float or ndarray, optional</div>
<div class="line">Illuminance of light sources.</div>
<div class="line">If None: El is used as is, otherwise El is renormalized to have</div>
<div class="line">an illuminance equal to E.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">sum_sources:</th><td class="field-body"><div class="first last line-block">
<div class="line">False, optional</div>
<div class="line-block">
<div class="line">- False: calculate CS (1.0,2.0) and CLa (1.0, 2.0) for all sources in El array.</div>
<div class="line">- True: sum sources in El to a single source and perform calc.</div>
</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">interpolate_sources:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">True, optional</div>
<div class="line-block">
<div class="line">- True: El is interpolated to wavelength range of efficiency </div>
<div class="line-block">
<div class="line">functions (as in LRC calculator). </div>
</div>
<div class="line">- False: interpolate efficiency functions to source range. </div>
<div class="line-block">
<div class="line">Source interpolation is not recommended due to possible</div>
<div class="line">errors for peaky spectra. </div>
<div class="line">(see CIE15-2018, “Colorimetry”).</div>
</div>
</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">t_CS:</th><td class="field-body"><div class="first last line-block">
<div class="line">1.0, optional</div>
<div class="line">The duration factor (in hours): a continuous value from 0.5 to 3.0</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">f_CS:</th><td class="field-body"><div class="first last line-block">
<div class="line">1.0, optional</div>
<div class="line">The spatial distribution factor: a discrete value (2, 1, or 0.5)</div>
<div class="line">depending upon the spatial distribution of the light source.</div>
<div class="line">Default = 1 (for t = 1 h, CS is equal to the 2012 version).</div>
<div class="line">Options:</div>
<div class="line">- 2.0: full visual field, as with a Ganzfeld.</div>
<div class="line">- 1.0: central visual field, as with a discrete light box on a desk.</div>
<div class="line">- 0.5: superior visual field, as from ceiling mounted down-light fixtures.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">CS:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with Circadian stimulus values</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">CLa:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with Circadian Light values</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Notes on CLa1.0 (2012 version):</dt>
<dd><p class="first">1. The original 2012 (E.q. 1) had set the peak wavelength of the 
melanopsin at 480 nm. Rea et al. later published a corrigendum with 
updated model parameters for k, a_{b-y} and a_rod. The comparison table
between showing values calculated for a number of sources with the old
and updated parameters were very close (~1 unit voor CLa).</p>
<p>2. In that corrrection paper they did not mention a change in the
factor (1622) that multiplies the (sum of) the integral(s) in Eq. 1. 
HOWEVER, the excel calculator released in 2017 and the online 
calculator show that factor to have a value of 1547.9. The change in
values due to the new factor is much larger than their the updated 
mentioned in note 1!</p>
<p>3. For reasons of consistency the calculator uses the latest model 
parameters, as could be read from the excel calculator. They values 
adopted are: multiplier 1547.9, k = 0.2616, a_{b-y} = 0.7 and 
a_rod = 3.3.</p>
<p class="last">4. The parameter values to convert CLa to CS were also taken from the 
2017 excel calculator.</p>
</dd>
<dt>Notes on CLa2.0 (2021 version):</dt>
<dd><p class="first">1. In the original model, 1000 lux of CIE Illuminant A resulted in a 
CLA = 1000. In the revised model, a photopic illuminance of 1000 lux 
from CIE Illuminant A (approximately that of an incandescent lamp 
operated at 2856 K) results in a CLA 2.0 = 813. The value of 813 CLA 2.0
should be used by those wishing to calibrate instrumentation designed 
to report CLA 2.0 and CS. CLA 2.0 values can still be used to approximate
the photopic illuminance, in lux, from a nonspecific “white” light source.
For comparison, CLA 2.0 values should be multiplied by 1.23 to estimate
the equivalent photopic illuminance from CIE Illuminant A, or by 0.66 
to estimate the equivalent photopic illuminance from CIE Illuminant D65
(an approximation of daylight with a CCT of 6500 K).</p>
<p>2. Nov. 6, 2021: To get a value of CLa2.0 = 813, Eq. 3 from the paper 
must be adjusted to also divide by the transmision of the 
macula (‘mp’ in paper) the S-cone and Vlambda functions prior to 
calculating the integrals in the denominators of the first factor after
the a_rod_1 and a_rod_2 scalars! Failure to do so results in a CLa2.0 
of 800, instead of the reported 813 by the online calculator. 
Verification of the code on github shows indeed that these denominators
are calculated by using the macular transmission divided S-cone and 
Vlambda functions. Is this an error in the code or in the paper?</p>
<p>3. Feb. 22, 2022: A corrigendum has been released for Eq. 3 in the original
paper, where the normalization is indeed done.</p>
<p class="last">4. Feb. 22, 2022: While the rodsat value in the corrigendum is defined as 6.50 W/m²,
this calculator uses the value as used in the online calculator: 6.5215 W/m².
(see <a class="reference external" href="https://github.com/Light-and-Health-Research-Center/cscalc">code base on github:</a>)</p>
</dd>
</dl>
<p>References:</p>
<blockquote>
<div><p>1. <a class="reference external" href="http://www.lrc.rpi.edu/cscalculator/">LRC Online Circadian stimulus calculator</a></p>
<p>2. <a class="reference external" href="http://www.lrc.rpi.edu/resources/CSCalculator_2017_10_03_Mac.xlsm">LRC Excel based Circadian stimulus calculator.</a></p>
<p>3. <a class="reference external" href="https://doi.org/10.1177/1477153511430474">Rea MS, Figueiro MG, Bierman A, and Hamner R (2012). 
Modelling the spectral sensitivity of the human circadian system. 
Light. Res. Technol. 44, 386–396.</a></p>
<p>4. <a class="reference external" href="https://doi.org/10.1177/1477153512467607">Rea MS, Figueiro MG, Bierman A, and Hamner R (2012). 
Erratum: Modeling the spectral sensitivity of the human circadian system 
(Lighting Research and Technology (2012) 44:4 (386-396)). 
Light. Res. Technol. 44, 516.</a></p>
<p>5. <a class="reference external" href="https://doi.org/10.3389/fnins.2021.615322">Rea, M. S., Nagare, R., &amp; Figueiro, M. G. (2021). 
Modeling Circadian Phototransduction: Quantitative Predictions of Psychophysical Data. 
Frontiers in Neuroscience, 15, 44.</a></p>
<p>6. <a class="reference external" href="https://www.frontiersin.org/article/10.3389/fnins.2022.849800">Rea, M. S., Nagare, R., &amp; Figueiro, M. G. (2022). 
Corrigendum: Modeling Circadian Phototransduction: Quantitative Predictions of Psychophysical Data. 
Frontiers in Neuroscience, 16.</a></p>
<p>7. <a class="reference external" href="https://docs.light-health.org/cscalc">LRC Online Circadian stimulus calculator (CLa2.0, 2021)</a></p>
<p>8. <a class="reference external" href="https://github.com/Light-and-Health-Research-Center/cscalc">Github code: LRC Online Circadian stimulus calculator (CLa2.0, accessed Nov. 5, 2021)</a></p>
</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.photbiochem.CLa_to_CS">
<code class="descclassname">luxpy.toolboxes.photbiochem.</code><code class="descname">CLa_to_CS</code><span class="sig-paren">(</span><em>CLa</em>, <em>t=1</em>, <em>f=1</em>, <em>forward=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/photbiochem/circadian_CS_CLa_lrc.html#CLa_to_CS"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.photbiochem.CLa_to_CS" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert Circadian Light to Circadian Stimulus (and back).</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">CLa:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with Circadian Light values</div>
<div class="line">or Circadian Stimulus values (if forward == False)</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">t:</th><td class="field-body"><div class="first last line-block">
<div class="line">1.0, optional</div>
<div class="line">The duration factor (in hours): a continuous value from 0.5 to 3.0</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">f:</th><td class="field-body"><div class="first last line-block">
<div class="line">1.0, optional</div>
<div class="line">The spatial distribution factor: a discrete value (2, 1, or 0.5)</div>
<div class="line">depending upon the spatial distribution of the light source.</div>
<div class="line">Default = 1 (for t = 1 h, CS is equal to the 2012 version).</div>
<div class="line">Options:</div>
<div class="line">- 2.0: full visual field, as with a Ganzfeld.</div>
<div class="line">- 1.0: central visual field, as with a discrete light box on a desk.</div>
<div class="line">- 0.5: superior visual field, as from ceiling mounted down-light fixtures.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">forward:</th><td class="field-body"><div class="first last line-block">
<div class="line">True, optional</div>
<div class="line">If True: convert CLa to CS values.</div>
<div class="line">If False: convert CS values to CLa values.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">CS:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with CS values or with CLa values (if forward == False)</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>References:</dt>
<dd><p class="first">1. <a class="reference external" href="https://doi.org/10.1177/1477153511430474">Rea MS, Figueiro MG, Bierman A, and Hamner  R (2012). 
Modelling the spectral sensitivity of the human circadian system. 
Light. Res. Technol. 44, 386–396.</a></p>
<p>2. <a class="reference external" href="https://doi.org/10.1177/1477153512467607">Rea MS, Figueiro MG, Bierman A, and Hamner R (2012). 
Erratum: Modeling the spectral sensitivity of the human circadian system 
(Lighting Research and Technology (2012) 44:4 (386-396)). 
Light. Res. Technol. 44, 516.</a></p>
<p>3. <a class="reference external" href="https://doi.org/10.3389/fnins.2021.615322">Rea, M. S., Nagare, R., &amp; Figueiro, M.G. (2021). 
Modeling Circadian Phototransduction: Quantitative Predictions of Psychophysical Data. 
Frontiers in Neuroscience, 15, 44.</a></p>
<p class="last">4. <a class="reference external" href="https://docs.light-health.org/cscalc">LRC Online Circadian Stimulus calculator (CLa2.0, 2021)</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.photbiochem.spd_to_blh_eff">
<code class="descclassname">luxpy.toolboxes.photbiochem.</code><code class="descname">spd_to_blh_eff</code><span class="sig-paren">(</span><em>spd</em>, <em>efficacy=True</em>, <em>cieobs='1931_2'</em>, <em>scr='dict'</em>, <em>K=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/photbiochem/blue_light_hazard_IEC62471_IECTR62778.html#spd_to_blh_eff"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.photbiochem.spd_to_blh_eff" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate Blue Light Hazard efficacy (K) or efficiency (eta) of radiation.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">S:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with spectral data</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">cieobs:</th><td class="field-body"><div class="first last line-block">
<div class="line">str, optional</div>
<div class="line">Sets the type of Vlambda function to obtain.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">scr:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘dict’ or array, optional</div>
<div class="line">- ‘dict’: get from ybar from _CMF</div>
<div class="line">- ‘array’: ndarray in :cieobs:</div>
<div class="line">Determines whether to load cmfs from file (./data/cmfs/) </div>
<div class="line">or from dict defined in .cmf.py</div>
<div class="line">Vlambda is obtained by collecting Ybar.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">K:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line-block">
<div class="line">e.g.  K  = 683 lm/W for ‘1931_2’ (relative == False) </div>
<div class="line">or K = 100/sum(spd*dl)        (relative == True)</div>
</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">eff:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with blue light hazard efficacy or efficiency of radiation values.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>References:</dt>
<dd><ol class="first last arabic simple">
<li>IEC 62471:2006, 2006, Photobiological safety of lamps and lamp systems.</li>
<li>IEC TR 62778, 2014, Application of IEC 62471 for the assessment of blue light hazard to light sources and luminaires.</li>
</ol>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="indvcmf">
<h2>indvcmf/<a class="headerlink" href="#indvcmf" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">py:</th><td class="field-body"><ul class="first simple">
<li>__init__.py</li>
<li>individual_observer_cmf_model.py</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">namespace:</th><td class="field-body"><p class="first last">luxpy.indvcmf</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<span class="target" id="module-luxpy.toolboxes.indvcmf"></span><div class="section" id="module-for-individual-observer-lms-cmfs-asano-2016-and-cie-tc1-97">
<h3>Module for Individual Observer lms-CMFs (Asano, 2016 and CIE TC1-97)<a class="headerlink" href="#module-for-individual-observer-lms-cmfs-asano-2016-and-cie-tc1-97" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">_DATA_PATH:</th><td class="field-body">path to data files</td>
</tr>
<tr class="field-even field"><th class="field-name">_DATA:</th><td class="field-body">Dict with required data</td>
</tr>
<tr class="field-odd field"><th class="field-name">_DSRC_STD_DEF:</th><td class="field-body">default data source for stdev of physiological data (‘matlab’, ‘germany’)</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">_DSRC_LMS_ODENS_DEF:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">default data source for lms absorbances and optical densities (‘asano’, ‘cietc197’)</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">_LMS_TO_XYZ_METHOD:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">default method to calculate lms to xyz conversion matrix (‘asano’, ‘cietc197’)</td>
</tr>
<tr class="field-even field"><th class="field-name">_WL_CRIT:</th><td class="field-body">critical wavelength above which interpolation of S-cone data fails.</td>
</tr>
<tr class="field-odd field"><th class="field-name">_WL:</th><td class="field-body">default wavelengths of spectral data in INDVCMF_DATA.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">load_database():</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">Load a database with parameters and data required by the Asano model.</td>
</tr>
<tr class="field-odd field"><th class="field-name">init():</th><td class="field-body">Initialize: load database required for Asano Individual Observer Model 
into the default _DATA dict and set some options for rounding, 
sign. figs and chopping small value to zero; for source data to use for 
spectral data for LMS absorp. and optical densities, …</td>
</tr>
<tr class="field-even field"><th class="field-name">query_state():</th><td class="field-body">print current settings for global variables.</td>
</tr>
<tr class="field-odd field"><th class="field-name">compute_cmfs():</th><td class="field-body">Generate Individual Observer CMFs (cone fundamentals) 
based on CIE2006 cone fundamentals and published literature 
on observer variability in color matching and 
in physiological parameters (Use of Asano optical data and model; 
or of CIE TC1-91 data and ‘variability’-extended model possible).</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">cie2006cmfsEx():</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">Generate Individual Observer CMFs (cone fundamentals) 
based on CIE2006 cone fundamentals and published literature 
on observer variability in color matching and 
in physiological parameters. (Use of Asano optical data and model; 
or of CIE TC1-91 data and ‘variability’-extended model possible)</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">getMonteCarloParam():</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">Get dict with normally-distributed physiological 
factors for a population of observers.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">getUSCensusAgeDist():</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">Get US Census Age Distribution</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">genMonteCarloObs():</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">Monte-Carlo generation of individual observer 
color matching functions (cone fundamentals) for a
certain age and field size.</td>
</tr>
<tr class="field-even field"><th class="field-name">getCatObs():</th><td class="field-body">Generate cone fundamentals for categorical observers.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">get_lms_to_xyz_matrix():</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">Calculate lms to xyz conversion matrix for a specific field 
size determined as a weighted combination of the 2° and 10° matrices.</td>
</tr>
<tr class="field-even field"><th class="field-name">lmsb_to_xyzb():</th><td class="field-body">Convert from LMS cone fundamentals to XYZ CMFs using conversion
matrix determined as a weighted combination of the 2° and 10° matrices.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">add_to_cmf_dict():</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">Add set of cmfs to _CMF dict.</td>
</tr>
<tr class="field-even field"><th class="field-name">plot_cmfs():</th><td class="field-body">Plot cmf set.</td>
</tr>
</tbody>
</table>
</div></blockquote>
<div class="section" id="references">
<h4>References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p>1. <a class="reference external" href="https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0145671">Asano Y, Fairchild MD, and Blondé L (2016). 
Individual Colorimetric Observer Model. 
PLoS One 11, 1–19.</a></p>
<p>2. <a class="reference external" href="https://onlinelibrary.wiley.com/doi/abs/10.1002/col.21975">Asano Y, Fairchild MD, Blondé L, and Morvan P (2016). 
Color matching experiment for highlighting interobserver variability. 
Color Res. Appl. 41, 530–539.</a></p>
<p>3. <a class="reference external" href="https://www.cie.co.at/publications/fundamental-chromaticity-diagram-physiological-axes-part-1">CIE TC1-36 (2006). 
Fundamental Chromaticity Diagram with Physiological Axes - Part I 
(Vienna: CIE).</a></p>
<p>4. <a class="reference external" href="https://www.rit.edu/cos/colorscience/re_AsanoObserverFunctions.php">Asano’s Individual Colorimetric Observer Model</a></p>
<p>5. <a class="reference external" href="https://github.com/ifarup/ciefunctions">CIE TC1-97 cmf functions python code developed by Ivar Farup and Jan Hendrik Wold.</a></p>
</div></blockquote>
</div>
<div class="section" id="notes">
<h4>Notes<a class="headerlink" href="#notes" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div>1. Port of Matlab code from: 
<a class="reference external" href="https://www.rit.edu/cos/colorscience/re_AsanoObserverFunctions.php">https://www.rit.edu/cos/colorscience/re_AsanoObserverFunctions.php</a>
(Accessed April 20, 2018)  
2. Adjusted/extended following CIE TC1-97 Python code (and data):
github.com/ifarup/ciefunctions (Copyright (C) 2012-2017 Ivar Farup and Jan Henrik Wold)     
(Accessed Dec 18, 2019)</div></blockquote>
<dl class="function">
<dt id="luxpy.toolboxes.indvcmf.load_database">
<code class="descclassname">luxpy.toolboxes.indvcmf.</code><code class="descname">load_database</code><span class="sig-paren">(</span><em>wl=None</em>, <em>dsrc_std=None</em>, <em>dsrc_lms_odens=None</em>, <em>path=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/indvcmf/individual_observer_cmf_model.html#load_database"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.indvcmf.load_database" title="Permalink to this definition">¶</a></dt>
<dd><p>Load database required for Asano Individual Observer Model.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">wl:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Wavelength range to interpolate data to.</div>
<div class="line">None defaults to the wavelength range associated with data in :dsrc_lms_odens:</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">path:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Path where data files are stored (If None: look in ./data/ folder under toolbox path)</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">dsrc_std:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Data source (‘matlab’ code, or ‘germany’) for stdev data on physiological factors.</div>
<div class="line">None defaults to string in _DSRC_STD_DEF</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">dsrc_lms_odens:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Data source (‘asano’, ‘cietc197’) for LMS absorbance and optical density data.</div>
<div class="line">None defaults to string in _DSRC_LMS_ODENS_DEF</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">data:</th><td class="field-body"><div class="first last line-block">
<div class="line">dict with data for:</div>
<div class="line">- ‘LMSa’: LMS absorbances </div>
<div class="line">- ‘rmd’: relative macular pigment density </div>
<div class="line">- ‘docul’: ocular media optical density </div>
<div class="line">- ‘USCensus2010population’: data (age and numbers) on a 2010 US Census </div>
<div class="line">- ‘CatObsPfctr’: dict with iteratively derived Categorical Observer physiological stdevs.</div>
<div class="line">- ‘M2d’: Asano 2° lms to xyz conversion matrix </div>
<div class="line">- ‘M10d’: Asano 10° lms to xyz conversion matrix </div>
<div class="line">- standard deviations on physiological parameters: ‘od_lens’, ‘od_macula’, ‘od_L’, ‘od_M’, ‘od_S’, ‘shft_L’, ‘shft_M’, ‘shft_S’</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.indvcmf.init">
<code class="descclassname">luxpy.toolboxes.indvcmf.</code><code class="descname">init</code><span class="sig-paren">(</span><em>wl=None</em>, <em>dsrc_std=None</em>, <em>dsrc_lms_odens=None</em>, <em>lms_to_xyz_method=None</em>, <em>use_sign_figs=True</em>, <em>use_my_round=True</em>, <em>use_chop=True</em>, <em>path=None</em>, <em>out=None</em>, <em>verbosity=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/indvcmf/individual_observer_cmf_model.html#init"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.indvcmf.init" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize: load database required for Asano Individual Observer Model 
into the default _DATA dict and set some options for rounding, 
sign. figs and chopping small value to zero; for source data to use for 
spectral data for LMS absorp. and optical desnities, …</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">wl:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Wavelength range to interpolate data to.</div>
<div class="line">None defaults to the wavelength range associated with data in :dsrc_lms_odens:</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">dsrc_std:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Data source (‘matlab’ code, or ‘germany’) for stdev data on physiological factors.</div>
<div class="line">None defaults to string in _DSRC_STD_DEF</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">dsrc_lms_odens:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Data source (‘asano’, ‘cietc197’) for LMS absorbance and optical density data.</div>
<div class="line">None defaults to string in _DSRC_LMS_ODENS_DEF</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">lms_to_xyz_method:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Method to use to determine lms-to-xyz conversion matrix (options: ‘asano’, ‘cietc197’)</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">use_my_round:</th><td class="field-body"><div class="first last line-block">
<div class="line">True, optional</div>
<div class="line">If True: use my_rounding() conform CIE TC1-91 Python code ‘ciefunctions’. (slows down code)</div>
<div class="line">by setting _USE_MY_ROUND.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">use_sign_figs:</th><td class="field-body"><div class="first last line-block">
<div class="line">True, optional</div>
<div class="line">If True: use sign_figs() conform CIE TC1-91 Python code ‘ciefunctions’. (slows down code)</div>
<div class="line">by setting _USE_SIGN_FIGS.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">use_chop:</th><td class="field-body"><div class="first last line-block">
<div class="line">True, optional</div>
<div class="line">If True: use chop() conform CIE TC1-91 Python code ‘ciefunctions’. (slows down code)</div>
<div class="line">by setting _USE_CHOP.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">path:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Path where data files are stored (If None: look in ./data/ folder under toolbox path)</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">out:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">If None: only set global variables, do not output _DATA.copy()</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">verbosity:</th><td class="field-body"><div class="first last line-block">
<div class="line">1, optional</div>
<div class="line">Print new state of global settings.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">data:</th><td class="field-body"><div class="first last line-block">
<div class="line">if out is not None: return a dict with dict with data for:</div>
<div class="line">- ‘LMSa’: LMS absorbances </div>
<div class="line">- ‘rmd’: relative macular pigment density </div>
<div class="line">- ‘docul’: ocular media optical density </div>
<div class="line">- ‘USCensus2010population’: data (age and numbers) on a 2010 US Census </div>
<div class="line">- ‘CatObsPfctr’: dict with iteratively derived Categorical Observer physiological stdevs.</div>
<div class="line">- ‘M2d’: Asano 2° lms to xyz conversion matrix </div>
<div class="line">- ‘M10d’: Asano 10° lms to xyz conversion matrix </div>
<div class="line">- standard deviations on physiological parameters: ‘od_lens’, ‘od_macula’, ‘od_L’, ‘od_M’, ‘od_S’, ‘shft_L’, ‘shft_M’, ‘shft_S’</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.indvcmf.query_state">
<code class="descclassname">luxpy.toolboxes.indvcmf.</code><code class="descname">query_state</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/indvcmf/individual_observer_cmf_model.html#query_state"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.indvcmf.query_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Print current settings for ‘global variables’.</p>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.indvcmf.cie2006cmfsEx">
<code class="descclassname">luxpy.toolboxes.indvcmf.</code><code class="descname">cie2006cmfsEx</code><span class="sig-paren">(</span><em>age=32</em>, <em>fieldsize=10</em>, <em>wl=None</em>, <em>var_od_lens=0</em>, <em>var_od_macula=0</em>, <em>var_od_L=0</em>, <em>var_od_M=0</em>, <em>var_od_S=0</em>, <em>var_shft_L=0</em>, <em>var_shft_M=0</em>, <em>var_shft_S=0</em>, <em>norm_type=None</em>, <em>out='lms'</em>, <em>base=False</em>, <em>strategy_2=True</em>, <em>odata0=None</em>, <em>lms_to_xyz_method=None</em>, <em>allow_negative_values=False</em>, <em>normalize_lms_to_xyz_matrix=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/indvcmf/individual_observer_cmf_model.html#cie2006cmfsEx"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.indvcmf.cie2006cmfsEx" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate Individual Observer CMFs (cone fundamentals) 
based on CIE2006 cone fundamentals and published literature 
on observer variability in color matching and in physiological parameters.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">age:</th><td class="field-body"><div class="first last line-block">
<div class="line">32 or float or int, optional</div>
<div class="line">Observer age</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">fieldsize:</th><td class="field-body"><div class="first last line-block">
<div class="line">10, optional</div>
<div class="line">Field size of stimulus in degrees (between 2° and 10°).</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">wl:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Interpolation/extraplation of :LMS: output to specified wavelengths.</div>
<div class="line">None: output original _WL </div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">var_od_lens:</th><td class="field-body"><div class="first last line-block">
<div class="line">0, optional</div>
<div class="line">Std Dev. in peak optical density [%] of lens.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">var_od_macula:</th><td class="field-body"><div class="first last line-block">
<div class="line">0, optional</div>
<div class="line">Std Dev. in peak optical density [%] of macula.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">var_od_L:</th><td class="field-body"><div class="first last line-block">
<div class="line">0, optional</div>
<div class="line">Std Dev. in peak optical density [%] of L-cone.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">var_od_M:</th><td class="field-body"><div class="first last line-block">
<div class="line">0, optional</div>
<div class="line">Std Dev. in peak optical density [%] of M-cone.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">var_od_S:</th><td class="field-body"><div class="first last line-block">
<div class="line">0, optional</div>
<div class="line">Std Dev. in peak optical density [%] of S-cone.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">var_shft_L:</th><td class="field-body"><div class="first last line-block">
<div class="line">0, optional</div>
<div class="line">Std Dev. in peak wavelength shift [nm] of L-cone. </div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">var_shft_L:</th><td class="field-body"><div class="first last line-block">
<div class="line">0, optional</div>
<div class="line">Std Dev. in peak wavelength shift [nm] of M-cone.  </div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">var_shft_S:</th><td class="field-body"><div class="first last line-block">
<div class="line">0, optional</div>
<div class="line">Std Dev. in peak wavelength shift [nm] of S-cone. </div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">norm_type:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">- ‘max’: normalize LMSq functions to max = 1</div>
<div class="line">- ‘area’: normalize to area</div>
<div class="line">- ‘power’: normalize to power</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">out:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘lms’ or ‘xyz’, optional</div>
<div class="line">Determines output.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">base:</th><td class="field-body"><div class="first last line-block">
<div class="line">False, boolean, optional</div>
<div class="line">The returned energy-based LMS cone fundamentals given to the</div>
<div class="line">precision of 9 sign. figs. if ‘True’, and to the precision of</div>
<div class="line">6 sign. figs. if ‘False’.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">strategy_2:</th><td class="field-body"><div class="first last line-block">
<div class="line">True, bool, optional</div>
<div class="line">Use strategy 2 in github.com/ifarup/ciefunctions issue #121 for </div>
<div class="line">computing the weighting factor. If false, strategy 3 is applied.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">odata0:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Dict with uncorrected ocular media and macula density functions and LMS absorptance functions</div>
<div class="line">None defaults to the ones stored in _DATA</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">lms_to_xyz_method:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Method to use to determine lms-to-xyz conversion matrix (options: ‘asano’, ‘cietc197’)</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">allow_negative_values:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">False, optional</div>
<div class="line">Cone fundamentals or color matching functions should not have negative values.</div>
<div class="line-block">
<div class="line">If False: X[X&lt;0] = 0.</div>
</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">normalize_lms_to_xyz_matrix:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">False, optional</div>
<div class="line">Normalize that EEW is always at [100,100,100] in XYZ and LMS system.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first last line-block">
<div class="line">- ‘LMS’ [or ‘XYZ’]: ndarray with individual observer equal area-normalized </div>
<div class="line-block">
<div class="line">cone fundamentals. Wavelength have been added.</div>
<div class="line"><br /></div>
</div>
<div class="line">[- ‘M’: lms to xyz conversion matrix</div>
<div class="line-block">
<div class="line">-  ‘trans_lens’: ndarray with lens transmission </div>
<div class="line-block">
<div class="line">(no interpolation)</div>
</div>
<div class="line">- ‘trans_macula’: ndarray with macula transmission </div>
<div class="line-block">
<div class="line">(no interpolation)</div>
</div>
<div class="line">- ‘sens_photopig’ : ndarray with photopigment sens. </div>
<div class="line-block">
<div class="line">(no interpolation)]</div>
</div>
</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>References:</dt>
<dd><p class="first">1. <a class="reference external" href="http://journals.plos.org/plosone/article?id=10.1371/journal.pone.0145671">Asano Y, Fairchild MD, and Blondé L, (2016), 
Individual Colorimetric Observer Model. 
PLoS One 11, 1–19.</a></p>
<p>2. <a class="reference external" href="https://onlinelibrary.wiley.com/doi/abs/10.1002/col.21975">Asano Y, Fairchild MD, Blondé L, and Morvan P (2016). 
Color matching experiment for highlighting interobserver variability. 
Color Res. Appl. 41, 530–539.</a></p>
<p>3. <a class="reference external" href="http://www.cie.co.at/publications/fundamental-chromaticity-diagram-physiological-axes-part-1">CIE TC1-36, (2006), 
Fundamental Chromaticity Diagram with Physiological Axes - Part I 
(Vienna: CIE).</a></p>
<p>4. <a class="reference external" href="https://www.rit.edu/cos/colorscience/re_AsanoObserverFunctions.php">Asano’s Individual Colorimetric Observer Model</a></p>
<p class="last">5. <a class="reference external" href="http://github.com/ifarup/ciefunctions">CIE TC1-97 Python code for cone fundamentals and XYZ cmf calculations 
(by Ivar Farup and Jan Henrik Wold, (c) 2012-2017)</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.indvcmf.getMonteCarloParam">
<code class="descclassname">luxpy.toolboxes.indvcmf.</code><code class="descname">getMonteCarloParam</code><span class="sig-paren">(</span><em>n_obs=1</em>, <em>stdDevAllParam={'dsrc': 'matlab'</em>, <em>'od_L': 17.9</em>, <em>'od_M': 17.9</em>, <em>'od_S': 14.7</em>, <em>'od_lens': 19.1</em>, <em>'od_macula': 37.2</em>, <em>'shft_L': 4.0</em>, <em>'shft_M': 3.0</em>, <em>'shft_S': 2.5}</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/indvcmf/individual_observer_cmf_model.html#getMonteCarloParam"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.indvcmf.getMonteCarloParam" title="Permalink to this definition">¶</a></dt>
<dd><p>Get dict with normally-distributed physiological factors 
for a population of observers.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">n_obs:</th><td class="field-body"><div class="first last line-block">
<div class="line">1, optional</div>
<div class="line">Number of individual observers in population.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">stdDevAllParam:</th><td class="field-body"><div class="first last line-block">
<div class="line">_DATA[‘stdev’], optional</div>
<div class="line">Dict with parameters for:</div>
<div class="line-block">
<div class="line">[‘od_lens’, ‘od_macula’, </div>
<div class="line-block">
<div class="line">‘od_L’, ‘od_M’, ‘od_S’, </div>
<div class="line">‘shft_L’, ‘shft_M’, ‘shft_S’]</div>
</div>
</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first last line-block">
<div class="line">dict with n_obs randomly drawn parameters.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.indvcmf.genMonteCarloObs">
<code class="descclassname">luxpy.toolboxes.indvcmf.</code><code class="descname">genMonteCarloObs</code><span class="sig-paren">(</span><em>n_obs=1, fieldsize=10, list_Age=[32], wl=None, norm_type=None, out='lms', base=False, strategy_2=True, odata0=None, lms_to_xyz_method=None, allow_negative_values=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/indvcmf/individual_observer_cmf_model.html#genMonteCarloObs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.indvcmf.genMonteCarloObs" title="Permalink to this definition">¶</a></dt>
<dd><p>Monte-Carlo generation of individual observer cone fundamentals.</p>
<dl class="docutils">
<dt>Args: </dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">n_obs:</th><td class="field-body"><div class="first last line-block">
<div class="line">1, optional</div>
<div class="line">Number of observer CMFs to generate.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">list_Age:</th><td class="field-body"><div class="first last line-block">
<div class="line">list of observer ages or str, optional</div>
<div class="line">Defaults to 32 (cfr. CIE2006 CMFs)</div>
<div class="line">If ‘us_census’: use US population census of 2010 </div>
<div class="line">to generate list_Age.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">fieldsize:</th><td class="field-body"><div class="first last line-block">
<div class="line">fieldsize in degrees (between 2° and 10°), optional</div>
<div class="line">Defaults to 10°.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">wl:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Interpolation/extraplation of :LMS: output to specified wavelengths.</div>
<div class="line">None: output original _WL </div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">norm_type:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">- ‘max’: normalize LMSq functions to max = 1</div>
<div class="line">- ‘area’: normalize to area</div>
<div class="line">- ‘power’: normalize to power</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">out:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘lms’ or ‘xyz’, optional</div>
<div class="line">Determines output.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">base:</th><td class="field-body"><div class="first last line-block">
<div class="line">False, boolean, optional</div>
<div class="line">The returned energy-based LMS cone fundamentals given to the</div>
<div class="line">precision of 9 sign. figs. if ‘True’, and to the precision of</div>
<div class="line">6 sign. figs. if ‘False’.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">strategy_2:</th><td class="field-body"><div class="first last line-block">
<div class="line">True, bool, optional</div>
<div class="line">Use strategy 2 in github.com/ifarup/ciefunctions issue #121 for </div>
<div class="line">computing the weighting factor. If false, strategy 3 is applied.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">odata0:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Dict with uncorrected ocular media and macula density functions and LMS absorptance functions</div>
<div class="line">None defaults to the ones stored in _DATA</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">lms_to_xyz_method:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Method to use to determine lms-to-xyz conversion matrix (options: ‘asano’, ‘cietc197’)</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">allow_negative_values:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">False, optional</div>
<div class="line">Cone fundamentals or color matching functions should not have negative values.</div>
<div class="line-block">
<div class="line">If False: X[X&lt;0] = 0.</div>
</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first last line-block">
<div class="line">LMS [,var_age, vAll] </div>
<div class="line-block">
<div class="line">- LMS: ndarray with population LMS functions.</div>
<div class="line">- var_age: ndarray with population observer ages.</div>
<div class="line">- vAll: dict with population physiological factors (see .keys()) </div>
</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>References:</dt>
<dd><p class="first">1. <a class="reference external" href="http://journals.plos.org/plosone/article?id=10.1371/journal.pone.0145671">Asano Y., Fairchild M.D., and Blondé L., (2016), 
Individual Colorimetric Observer Model. 
PLoS One 11, 1–19.</a></p>
<p>2. <a class="reference external" href="https://onlinelibrary.wiley.com/doi/abs/10.1002/col.21975">Asano Y, Fairchild MD, Blondé L, and Morvan P (2016). 
Color matching experiment for highlighting interobserver variability. 
Color Res. Appl. 41, 530–539.</a></p>
<p>3. <a class="reference external" href="http://www.cie.co.at/publications/fundamental-chromaticity-diagram-physiological-axes-part-1">CIE TC1-36, (2006), 
Fundamental Chromaticity Diagram with Physiological Axes - Part I. 
(Vienna: CIE).</a></p>
<p class="last">4. <a class="reference external" href="https://www.rit.edu/cos/colorscience/re_AsanoObserverFunctions.php">Asano’s Individual Colorimetric Observer Model</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.indvcmf.getCatObs">
<code class="descclassname">luxpy.toolboxes.indvcmf.</code><code class="descname">getCatObs</code><span class="sig-paren">(</span><em>n_cat=10</em>, <em>fieldsize=2</em>, <em>wl=None</em>, <em>norm_type=None</em>, <em>out='lms'</em>, <em>base=False</em>, <em>strategy_2=True</em>, <em>odata0=None</em>, <em>lms_to_xyz_method=None</em>, <em>allow_negative_values=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/indvcmf/individual_observer_cmf_model.html#getCatObs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.indvcmf.getCatObs" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate cone fundamentals for categorical observers.</p>
<dl class="docutils">
<dt>Args: </dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">n_cat:</th><td class="field-body"><div class="first last line-block">
<div class="line">10, optional</div>
<div class="line">Number of observer CMFs to generate.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">fieldsize:</th><td class="field-body"><div class="first last line-block">
<div class="line">fieldsize in degrees (between 2° and 10°), optional</div>
<div class="line">Defaults to 10°.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">out:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘LMS’ or str, optional</div>
<div class="line">Determines output.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">wl:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Interpolation/extraplation of :LMS: output to specified wavelengths.</div>
<div class="line-block">
<div class="line">None: output original _WL </div>
</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">norm_type:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">- ‘max’: normalize LMSq functions to max = 1</div>
<div class="line">- ‘area’: normalize to area</div>
<div class="line">- ‘power’: normalize to power</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">out:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘lms’ or ‘xyz’, optional</div>
<div class="line">Determines output.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">base:</th><td class="field-body"><div class="first last line-block">
<div class="line">False, boolean, optional</div>
<div class="line">The returned energy-based LMS cone fundamentals given to the</div>
<div class="line">precision of 9 sign. figs. if ‘True’, and to the precision of</div>
<div class="line">6 sign. figs. if ‘False’.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">strategy_2:</th><td class="field-body"><div class="first last line-block">
<div class="line">True, bool, optional</div>
<div class="line">Use strategy 2 in github.com/ifarup/ciefunctions issue #121 for </div>
<div class="line">computing the weighting factor. If false, strategy 3 is applied.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">odata0:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Dict with uncorrected ocular media and macula density functions and LMS absorptance functions</div>
<div class="line">None defaults to the ones stored in _DATA</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">lms_to_xyz_method:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Method to use to determine lms-to-xyz conversion matrix (options: ‘asano’, ‘cietc197’)</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">allow_negative_values:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">False, optional</div>
<div class="line">Cone fundamentals or color matching functions should not have negative values.</div>
<div class="line-block">
<div class="line">If False: X[X&lt;0] = 0.</div>
</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first last line-block">
<div class="line">LMS [,var_age, vAll] </div>
<div class="line-block">
<div class="line">- LMS: ndarray with population LMS functions.</div>
<div class="line">- var_age: ndarray with population observer ages.</div>
<div class="line">- vAll: dict with population physiological factors (see .keys()) </div>
</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Notes:</dt>
<dd><p class="first">1. Categorical observers are observer functions that would represent 
color-normal populations. They are finite and discrete as opposed to 
observer functions generated from the individual colorimetric observer 
model. Thus, they would offer more convenient and practical approaches
for the personalized color imaging workflow and color matching analyses.
Categorical observers were derived in two steps. 
At the first step, 10000 observer functions were generated from the 
individual colorimetric observer model using Monte Carlo simulation. 
At the second step, the cluster analysis, a modified k-medoids 
algorithm, was applied to the 10000 observers minimizing the squared 
Euclidean distance in cone fundamentals space, and categorical 
observers were derived iteratively. Since the proposed categorical 
observers are defined by their physiological parameters and ages, their
CMFs can be derived for any target field size.
2. Categorical observers were ordered by the importance; 
the first categorical observer vas the average observer equivalent to 
CIEPO06 with 38 year-old for a given field size, followed by the second
most important categorical observer, the third, and so on.</p>
<ol class="last arabic simple" start="3">
<li>see: <a class="reference external" href="https://www.rit.edu/cos/colorscience/re_AsanoObserverFunctions.php">https://www.rit.edu/cos/colorscience/re_AsanoObserverFunctions.php</a></li>
</ol>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.indvcmf.compute_cmfs">
<code class="descclassname">luxpy.toolboxes.indvcmf.</code><code class="descname">compute_cmfs</code><span class="sig-paren">(</span><em>fieldsize=10, age=32, wl=None, var_od_lens=0, var_od_macula=0, var_shft_LMS=[0, 0, 0], var_od_LMS=[0, 0, 0], norm_type=None, out='lms', base=False, strategy_2=True, odata0=None, lms_to_xyz_method=None, allow_negative_values=False, normalize_lms_to_xyz_matrix=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/indvcmf/individual_observer_cmf_model.html#compute_cmfs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.indvcmf.compute_cmfs" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate Individual Observer CMFs (cone fundamentals) 
based on CIE2006 cone fundamentals and published literature 
on observer variability in color matching and in physiological parameters.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">age:</th><td class="field-body"><div class="first last line-block">
<div class="line">32 or float or int, optional</div>
<div class="line">Observer age</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">fieldsize:</th><td class="field-body"><div class="first last line-block">
<div class="line">10, optional</div>
<div class="line">Field size of stimulus in degrees (between 2° and 10°).</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">wl:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Interpolation/extraplation of :LMS: output to specified wavelengths.</div>
<div class="line">None: output original _WL</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">var_od_lens:</th><td class="field-body"><div class="first last line-block">
<div class="line">0, optional</div>
<div class="line">Variation of optical density of lens.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">var_od_macula:</th><td class="field-body"><div class="first last line-block">
<div class="line">0, optional</div>
<div class="line">Variation of optical density of macula.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">var_shft_LMS:</th><td class="field-body"><div class="first last line-block">
<div class="line">[0, 0, 0] optional</div>
<div class="line">Variation (shift) of LMS peak absorptance.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">var_od_LMS:</th><td class="field-body"><div class="first last line-block">
<div class="line">[0, 0, 0] optional</div>
<div class="line">Variation of LMS optical densities.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">norm_type:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">- ‘max’: normalize LMSq functions to max = 1</div>
<div class="line">- ‘area’: normalize to area</div>
<div class="line">- ‘power’: normalize to power</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">out:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘lms’ or ‘xyz’, optional</div>
<div class="line">Determines output.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">base:</th><td class="field-body"><div class="first last line-block">
<div class="line">False, boolean, optional</div>
<div class="line">The returned energy-based LMS cone fundamentals given to the</div>
<div class="line">precision of 9 sign. figs. if ‘True’, and to the precision of</div>
<div class="line">6 sign. figs. if ‘False’.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">strategy_2:</th><td class="field-body"><div class="first last line-block">
<div class="line">True, bool, optional</div>
<div class="line">Use strategy 2 in github.com/ifarup/ciefunctions issue #121 for </div>
<div class="line">computing the weighting factor. If false, strategy 3 is applied.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">odata0:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Dict with uncorrected ocular media and macula density functions and LMS absorptance functions</div>
<div class="line">None defaults to the ones stored in _DATA</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">lms_to_xyz_method:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Method to use to determine lms-to-xyz conversion matrix (options: ‘asano’, ‘cietc197’)</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">allow_negative_values:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">False, optional</div>
<div class="line">Cone fundamentals or color matching functions should not have negative values.</div>
<div class="line-block">
<div class="line">If False: X[X&lt;0] = 0.</div>
</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">normalize_lms_to_xyz_matrix:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">False, optional</div>
<div class="line">Normalize that EEW is always at [100,100,100] in XYZ and LMS system.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first last line-block">
<div class="line">- ‘LMS’ [or ‘XYZ’]: ndarray with individual observer equal area-normalized </div>
<div class="line-block">
<div class="line">cone fundamentals. Wavelength have been added.</div>
<div class="line"><br /></div>
</div>
<div class="line">[- ‘M’: lms to xyz conversion matrix</div>
<div class="line-block">
<div class="line">-  ‘trans_lens’: ndarray with lens transmission </div>
<div class="line-block">
<div class="line">(no interpolation)</div>
</div>
<div class="line">- ‘trans_macula’: ndarray with macula transmission </div>
<div class="line-block">
<div class="line">(no interpolation)</div>
</div>
<div class="line">- ‘sens_photopig’ : ndarray with photopigment sens. </div>
<div class="line-block">
<div class="line">(no interpolation)]</div>
</div>
</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>References:</dt>
<dd><p class="first">1. <a class="reference external" href="http://journals.plos.org/plosone/article?id=10.1371/journal.pone.0145671">Asano Y, Fairchild MD, and Blondé L, (2016), 
Individual Colorimetric Observer Model. 
PLoS One 11, 1–19.</a></p>
<p>2. <a class="reference external" href="https://onlinelibrary.wiley.com/doi/abs/10.1002/col.21975">Asano Y, Fairchild MD, Blondé L, and Morvan P (2016). 
Color matching experiment for highlighting interobserver variability. 
Color Res. Appl. 41, 530–539.</a></p>
<p>3. <a class="reference external" href="http://www.cie.co.at/publications/fundamental-chromaticity-diagram-physiological-axes-part-1">CIE, TC1-36, (2006). 
Fundamental Chromaticity Diagram with Physiological Axes - Part I 
(Vienna: CIE).</a></p>
<p>4. <a class="reference external" href="https://www.rit.edu/cos/colorscience/re_AsanoObserverFunctions.php">Asano’s Individual Colorimetric Observer Model</a></p>
<p class="last">5. <a class="reference external" href="http://github.com/ifarup/ciefunctions">CIE TC1-97 Python code for cone fundamentals and XYZ cmf calculations 
(by Ivar Farup and Jan Henrik Wold, (c) 2012-2017)</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.indvcmf.add_to_cmf_dict">
<code class="descclassname">luxpy.toolboxes.indvcmf.</code><code class="descname">add_to_cmf_dict</code><span class="sig-paren">(</span><em>bar=None, cieobs='indv', K=683, M=array([[1.0000e+00, 0.0000e+00, 0.0000e+00],        [0.0000e+00, 1.0000e+00, 0.0000e+00],        [0.0000e+00, 0.0000e+00, 1.0000e+00]])</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/indvcmf/individual_observer_cmf_model.html#add_to_cmf_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.indvcmf.add_to_cmf_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Add set of cmfs to _CMF dict.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">bar:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Set of CMFs. None: initializes to empty ndarray.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">cieobs:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘indv’ or str, optional</div>
<div class="line">Name of CMF set.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">K:</th><td class="field-body"><div class="first last line-block">
<div class="line">683 (lm/W), optional</div>
<div class="line">Conversion factor from radiometric to photometric quantity.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">M:</th><td class="field-body"><div class="first last line-block">
<div class="line">np.eye, optional</div>
<div class="line">Matrix for lms to xyz conversion.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.indvcmf.plot_cmfs">
<code class="descclassname">luxpy.toolboxes.indvcmf.</code><code class="descname">plot_cmfs</code><span class="sig-paren">(</span><em>cmf</em>, <em>axh=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/indvcmf/individual_observer_cmf_model.html#plot_cmfs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.indvcmf.plot_cmfs" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot cmf set.</p>
</dd></dl>

</div>
</div>
</div>
<div class="section" id="spdbuild">
<h2>spdbuild/<a class="headerlink" href="#spdbuild" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">py:</th><td class="field-body"><ul class="first simple">
<li>__init__.py</li>
<li>spdbuilder.py</li>
<li>spdbuilder2020.py</li>
<li>spdoptimzer2020.py</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">namespace:</th><td class="field-body"><p class="first last">luxpy.spdbuild/</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<span class="target" id="module-luxpy.toolboxes.spdbuild"></span><div class="section" id="module-for-building-and-optimizing-spds">
<h3>Module for building and optimizing SPDs<a class="headerlink" href="#module-for-building-and-optimizing-spds" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div>spdbuilder.py</div></blockquote>
<div class="section" id="functions">
<h4>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">gaussian_spd():</th><td class="field-body">Generate Gaussian spectrum.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">butterworth_spd():</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">Generate Butterworth based spectrum.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">lorentzian2_spd():</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">Generate 2nd order Lorentzian based spectrum.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">roundedtriangle_spd():</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">Generate a rounded triangle based spectrum.</td>
</tr>
<tr class="field-odd field"><th class="field-name">mono_led_spd():</th><td class="field-body">Generate monochromatic LED spectrum based on a Gaussian 
or butterworth profile or according to Ohno (Opt. Eng. 2005).</td>
</tr>
<tr class="field-even field"><th class="field-name">spd_builder():</th><td class="field-body">Build spectrum based on Gaussians, monochromatic 
and/or phophor LED spectra.</td>
</tr>
<tr class="field-odd field"><th class="field-name">color3mixer():</th><td class="field-body">Calculate fluxes required to obtain a target chromaticity 
when (additively) mixing 3 light sources.</td>
</tr>
<tr class="field-even field"><th class="field-name">colormixer():</th><td class="field-body">Calculate fluxes required to obtain a target chromaticity 
when (additively) mixing N light sources.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">colormixer_pinv():</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">Additive color mixer of N primaries using using Moore-Penrose pseudo-inverse matrix.</td>
</tr>
<tr class="field-even field"><th class="field-name">spd_builder():</th><td class="field-body">Build spectrum based on Gaussians, monochromatic 
and/or phophor LED-type spectra.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">get_w_summed_spd():</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">Calculate weighted sum of spds.</td>
</tr>
<tr class="field-even field"><th class="field-name">fitnessfcn():</th><td class="field-body">Fitness function that calculates closeness of solution x to 
target values for specified objective functions.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">spd_constructor_2():</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">Construct spd from spectral model parameters 
using pairs of intermediate sources.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">spd_constructor_3():</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">Construct spd from spectral model parameters 
using trio’s of intermediate sources.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">spd_optimizer_2_3():</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">Optimizes the weights (fluxes) of a set of component 
spectra by combining pairs (2) or trio’s (3) of 
components to intermediate sources until only 3 remain.
Color3mixer can then be called to calculate required 
fluxes to obtain target chromaticity and fluxes are 
then back-calculated.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">get_optim_pars_dict():</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">Setup dict with optimization parameters.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">initialize_spd_model_pars():</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">Initialize spd_model_pars (for spd_constructor)
based on type of component_data.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">initialize_spd_optim_pars():</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">Initialize spd_optim_pars (x0, lb, ub for use
with math.minimizebnd) based on type 
of component_data.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">spd_optimizer():</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">Generate a spectrum with specified white point and optimized
for certain objective functions from a set of component 
spectra or component spectrum model parameters.</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
</div>
<div class="section" id="module-for-building-and-optimizing-spds-2">
<h3>Module for building and optimizing SPDs (2)<a class="headerlink" href="#module-for-building-and-optimizing-spds-2" title="Permalink to this headline">¶</a></h3>
<p>This module implements a class based spectral optimizer. It differs from 
the spdoptimizer function in spdbuild.py, in that it can use several 
different minimization algorithms, as well as a user defined method. 
It is also written such that the user can easily write his own
primary constructor function. It supports the ‘3mixer’ algorithm 
(but no ‘2mixer’) and a ‘no-mixer’ algorithm (chromaticity as part of the list
of objectives) for calculating the mixing contributions of the primaries.</p>
<div class="section" id="id19">
<h4>Functions<a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">gaussian_prim_constructor():</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">constructs a gaussian based primary set.</td>
</tr>
<tr class="field-even field"><th class="field-name">_setup_wlr():</th><td class="field-body">Initialize the wavelength range for use with PrimConstructor.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">_extract_prim_optimization_parameters():</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">Extract the primary parameters from the optimization vector x and the pdefs dict for use with PrimConstructor.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">_stack_wlr_spd():</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">Stack the wavelength range ‘on top’ of the spd values for use with PrimConstructor.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">PrimConstructor:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">class for primary (spectral) construction</td>
</tr>
<tr class="field-even field"><th class="field-name">Minimizer:</th><td class="field-body">class for minimization of fitness of each of the objective functions</td>
</tr>
<tr class="field-odd field"><th class="field-name">ObjFcns:</th><td class="field-body">class to specify one or more objective functions for minimization</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">SpectralOptimizer:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">class for spectral optimization (initialization and run)</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">spd_optimizer2():</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">Generate a spectrum with specified white point and optimized
for certain objective functions from a set of component 
spectra or component spectrum model parameters 
(functional wrapper around SpectralOptimizer class).</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="id20">
<h4>Notes<a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ol class="arabic simple">
<li>See examples below (in spdoptimizer2020.’__main__’) for use.</li>
</ol>
</div></blockquote>
<dl class="function">
<dt id="luxpy.toolboxes.spdbuild.gaussian_spd">
<code class="descclassname">luxpy.toolboxes.spdbuild.</code><code class="descname">gaussian_spd</code><span class="sig-paren">(</span><em>peakwl=530, fwhm=20, wl=[360.0, 830.0, 1.0], with_wl=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdbuilder.html#gaussian_spd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.gaussian_spd" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate Gaussian spectrum.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">peakw:</th><td class="field-body"><div class="first last line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Peak wavelength</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">fwhm:</th><td class="field-body"><div class="first last line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Full-Width-Half-Maximum of gaussian.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">wl:</th><td class="field-body"><div class="first last line-block">
<div class="line">_WL3, optional </div>
<div class="line">Wavelength range.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">with_wl:</th><td class="field-body"><div class="first last line-block">
<div class="line">True, optional</div>
<div class="line">True outputs a ndarray with first row wavelengths.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with spectra. </div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Note:</dt>
<dd><div class="first last line-block">
<div class="line">Gaussian:</div>
<div class="line-block">
<div class="line">g = exp(-0.5*((wl - peakwl)/sig)**2)</div>
</div>
<div class="line">with sig = fwhm/(2*(2*np.log(2))**0.5) </div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.spdbuild.butterworth_spd">
<code class="descclassname">luxpy.toolboxes.spdbuild.</code><code class="descname">butterworth_spd</code><span class="sig-paren">(</span><em>peakwl=530, fwhm=20, bw_order=1, wl=[360.0, 830.0, 1.0], with_wl=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdbuilder.html#butterworth_spd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.butterworth_spd" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate Butterworth based spectrum.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">peakw:</th><td class="field-body"><div class="first last line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Peak wavelength</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">fwhm:</th><td class="field-body"><div class="first last line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Full-Width-Half-Maximum of butterworth.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">bw_order:</th><td class="field-body"><div class="first last line-block">
<div class="line">1, optional</div>
<div class="line">Order of the butterworth function.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">wl:</th><td class="field-body"><div class="first last line-block">
<div class="line">_WL3, optional </div>
<div class="line">Wavelength range.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">with_wl:</th><td class="field-body"><div class="first last line-block">
<div class="line">True, optional</div>
<div class="line">True outputs a ndarray with first row wavelengths.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with spectra.    </div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Note:</dt>
<dd><div class="first last line-block">
<div class="line">Butterworth :</div>
<div class="line-block">
<div class="line">bw = 1 / (1 + ((2*(wl - peakwl)/fwhm)**2))</div>
</div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.spdbuild.lorentzian2_spd">
<code class="descclassname">luxpy.toolboxes.spdbuild.</code><code class="descname">lorentzian2_spd</code><span class="sig-paren">(</span><em>peakwl=530, fwhm=20, wl=[360.0, 830.0, 1.0], with_wl=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdbuilder.html#lorentzian2_spd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.lorentzian2_spd" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate 2nd order Lorentzian spectrum.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">peakw:</th><td class="field-body"><div class="first last line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Peak wavelength</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">fwhm:</th><td class="field-body"><div class="first last line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Full-Width-Half-Maximum of lorentzian.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">wl:</th><td class="field-body"><div class="first last line-block">
<div class="line">_WL3, optional </div>
<div class="line">Wavelength range.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">with_wl:</th><td class="field-body"><div class="first last line-block">
<div class="line">True, optional</div>
<div class="line">True outputs a ndarray with first row wavelengths.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with spectra. </div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Note:</dt>
<dd><div class="first last line-block">
<div class="line">Lorentzian (2nd order):</div>
<div class="line-block">
<div class="line">lz = (1 + ((n*(wl - peakwl)/fwhm)**2))**(-2)</div>
<div class="line-block">
<div class="line">with n = 2*(2**0.5-1)**0.5</div>
</div>
</div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.spdbuild.roundedtriangle_spd">
<code class="descclassname">luxpy.toolboxes.spdbuild.</code><code class="descname">roundedtriangle_spd</code><span class="sig-paren">(</span><em>peakwl=530, fwhm=100, rounding=0.5, wl=[360.0, 830.0, 1.0], with_wl=True, min_v=0.0, max_v=1.0, fw=100, rw=100</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdbuilder.html#roundedtriangle_spd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.roundedtriangle_spd" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate rounded triangle spectrum.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">peakw:</th><td class="field-body"><div class="first last line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Peak wavelength</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">fwhm:</th><td class="field-body"><div class="first last line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Full-Width-Half-Maximum of rounded triangle.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">rounding:</th><td class="field-body"><div class="first last line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Amount of rounding of triangle corners (top, bottom-left, bottom-right)</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">wl:</th><td class="field-body"><div class="first last line-block">
<div class="line">_WL3, optional </div>
<div class="line">Wavelength range.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">with_wl:</th><td class="field-body"><div class="first last line-block">
<div class="line">True, optional</div>
<div class="line">True outputs a ndarray with first row wavelengths.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">min_v, max_v:</th><td class="field-body"><div class="first last line-block">
<div class="line">0.0, 1.0, optional</div>
<div class="line">Minimum and maximum of spd.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">fw:</th><td class="field-body"><div class="first last line-block">
<div class="line">100, optional</div>
<div class="line">front width of triangle.</div>
<div class="line">Only used when fwhm is set to None.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">rw:</th><td class="field-body"><div class="first last line-block">
<div class="line">100, optional</div>
<div class="line">rear width of triangle.</div>
<div class="line">Only used when fwhm is set to None.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with spectra. </div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.spdbuild.mono_led_spd">
<code class="descclassname">luxpy.toolboxes.spdbuild.</code><code class="descname">mono_led_spd</code><span class="sig-paren">(</span><em>peakwl=530, fwhm=20, wl=[360.0, 830.0, 1.0], with_wl=True, strength_shoulder=2, bw_order=-1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdbuilder.html#mono_led_spd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.mono_led_spd" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate monochromatic LED spectrum based on a Gaussian or or Lorentzian or butterworth
profile or according to Ohno (Opt. Eng. 2005).</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">peakw:</th><td class="field-body"><div class="first last line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Peak wavelength</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">fwhm:</th><td class="field-body"><div class="first last line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Full-Width-Half-Maximum of gaussian used to simulate led.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">wl:</th><td class="field-body"><div class="first last line-block">
<div class="line">_WL3, optional </div>
<div class="line-block">
<div class="line">Wavelength range.</div>
</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">with_wl:</th><td class="field-body"><div class="first last line-block">
<div class="line">True, optional</div>
<div class="line">True outputs a ndarray with first row wavelengths.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">strength_shoulder:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">2, optional</div>
<div class="line">Determines the strength of the spectrum shoulders of the mono led.</div>
<div class="line">A value of 0 reduces to a pure Gaussian model (if bw_order &gt;= -1).</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">bw_order:</th><td class="field-body"><div class="first last line-block">
<div class="line">-1, optional</div>
<div class="line">Order of Butterworth function.</div>
<div class="line">If -1 or 0: spd profile is Ohno’s gaussian based</div>
<div class="line-block">
<div class="line">(to obtain pure Gaussian: set strength_shoulder = 0).</div>
</div>
<div class="line">If -2: spd profile is Lorentzian,</div>
<div class="line">else (&gt;0): Butterworth.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with spectra.   </div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Note:</dt>
<dd><div class="first last line-block">
<div class="line">Gaussian:</div>
<div class="line-block">
<div class="line">g = exp(-0.5*((wl - peakwl)/sig)**2)</div>
</div>
<div class="line">with sig = fwhm/(2*(2*np.log(2))**0.5) </div>
<div class="line"><br /></div>
<div class="line">Lorentzian (2nd order):</div>
<div class="line-block">
<div class="line">lz = (1 + ((n*(wl - peakwl)/fwhm)**2))**(-2)</div>
<div class="line-block">
<div class="line">with n = 2*(2**0.5-1)**0.5</div>
<div class="line"><br /></div>
</div>
</div>
<div class="line">Butterworth :</div>
<div class="line-block">
<div class="line">bw = 1 / (1 + ((2*(wl - peakwl)/fwhm)**2))</div>
<div class="line"><br /></div>
</div>
<div class="line">Ohno’s model:</div>
<div class="line-block">
<div class="line">ohno = (g + strength_shoulder*g**5)/(1+strength_shoulder)</div>
<div class="line"><br /></div>
<div class="line">mono_led_spd = ohno*((bw_order &gt;= -1) &amp; (bw_order &lt;= 0)).T + bw*(bw_order &gt; 0).T + lz*((bw_order &gt;=-2) &amp; (bw_order &lt; -1)).T</div>
</div>
</div>
</dd>
<dt>Reference:</dt>
<dd>1. <a class="reference external" href="https://ws680.nist.gov/publication/get_pdf.cfm?pub_id=841839">Ohno Y (2005). 
Spectral design considerations for white LED color rendering. 
Opt. Eng. 44, 111302.</a></dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.spdbuild.phosphor_led_spd">
<code class="descclassname">luxpy.toolboxes.spdbuild.</code><code class="descname">phosphor_led_spd</code><span class="sig-paren">(</span><em>peakwl=450, fwhm=20, wl=[360.0, 830.0, 1.0], bw_order=-1, with_wl=True, strength_shoulder=2, strength_ph=0, peakwl_ph1=530, fwhm_ph1=80, strength_ph1=1, peakwl_ph2=560, fwhm_ph2=80, strength_ph2=None, use_piecewise_fcn=False, verbosity=0, out='spd'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdbuilder.html#phosphor_led_spd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.phosphor_led_spd" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate phosphor LED spectrum with up to 2 phosphors based on Smet (Opt. Expr. 2011).</p>
<div class="line-block">
<div class="line">Model:</div>
<div class="line-block">
<div class="line">1) If strength_ph2 is not None:</div>
<div class="line-block">
<div class="line-block">
<div class="line">phosphor_spd = (strength_ph1*mono_led_spd(peakwl_ph1, …, strength_shoulder = 1) </div>
<div class="line-block">
<div class="line">+ strength_ph2)*mono_led_spd(peakwl_ph2, …, strength_shoulder = 1)) </div>
<div class="line-block">
<div class="line">/ (strength_ph1 + strength_ph2)</div>
</div>
</div>
</div>
<div class="line">else:</div>
<div class="line-block">
<div class="line">phosphor_spd = (strength_ph1*mono_led_spd(peakwl_ph1, …, strength_shoulder = 1) </div>
<div class="line-block">
<div class="line">+ (1-strength_ph1)*mono_led_spd(peakwl_ph2, …, strength_shoulder = 1)) </div>
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="line">2) S = (mono_led_spd() + strength_ph*(phosphor_spd/phosphor_spd.max()))/(1 + strength_ph)</div>
<div class="line"><br /></div>
<div class="line">3) piecewise_fcn = S for wl &lt; peakwl and 1 for wl &gt;= peakwl</div>
<div class="line"><br /></div>
<div class="line">4) phosphor_led_spd = S*piecewise_fcn </div>
</div>
</div>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">peakw:</th><td class="field-body"><div class="first last line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Peak wavelengths of the monochromatic led.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">fwhm:</th><td class="field-body"><div class="first last line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Full-Width-Half-Maximum of mono_led spectrum.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">wl:</th><td class="field-body"><div class="first last line-block">
<div class="line">_WL3, optional </div>
<div class="line">Wavelength range.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">bw_order:</th><td class="field-body"><div class="first last line-block">
<div class="line">-1, optional</div>
<div class="line">Order of Butterworth function.</div>
<div class="line">If -1 or 0: spd profile is Ohno’s gaussian based</div>
<div class="line-block">
<div class="line">(to obtain pure Gaussian: set strength_shoulder = 0).</div>
</div>
<div class="line">If -2: spd profile is Lorentzian,</div>
<div class="line">else (&gt;0): Butterworth.</div>
<div class="line">Note that this only applies to the monochromatic led  spds and not </div>
<div class="line">the phosphors spds (these are always gaussian based).</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">with_wl:</th><td class="field-body"><div class="first last line-block">
<div class="line">True, optional</div>
<div class="line">True outputs a ndarray with first row wavelengths.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">strength_shoulder:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">2, optiona l</div>
<div class="line">Determines the strength of the spectrum shoulders of the mono led.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">strength_ph:</th><td class="field-body"><div class="first last line-block">
<div class="line">0, optional</div>
<div class="line">Total contribution of phosphors in mixture.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">peakwl_ph1:</th><td class="field-body"><div class="first last line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Peak wavelength of the first phosphor.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">fwhm_ph1:</th><td class="field-body"><div class="first last line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Full-Width-Half-Maximum of gaussian used to simulate first phosphor.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">strength_ph1:</th><td class="field-body"><div class="first last line-block">
<div class="line">1, optional</div>
<div class="line">Strength of first phosphor in phosphor mixture. </div>
<div class="line">If :strength_ph2: is None: value should be in the [0,1] range.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">peakwl_ph2:</th><td class="field-body"><div class="first last line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Peak wavelength of the second phosphor.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">fwhm_ph2:</th><td class="field-body"><div class="first last line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Full-Width-Half-Maximum of gaussian used to simulate second phosphor.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">strength_ph2:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Strength of second phosphor in phosphor mixture. </div>
<div class="line">If None: strength is calculated as (1-:strength_ph1:)</div>
<div class="line-block">
<div class="line-block">
<div class="line">:target: np2d([100,1/3,1/3]), optional</div>
</div>
<div class="line">ndarray with Yxy chromaticity of target.</div>
</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">verbosity:</th><td class="field-body"><div class="first last line-block">
<div class="line">0, optional</div>
<div class="line">If &gt; 0: plots spectrum components (mono_led, ph1, ph2, …)</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">out:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘spd’, optional</div>
<div class="line">Specifies output.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">use_piecewise_fcn:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">False, optional</div>
<div class="line">True: uses piece-wise function as in Smet et al. 2011. Can give </div>
<div class="line">non_smooth spectra optimized from components to which it is applied. </div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first last line-block">
<div class="line">spd, component_spds</div>
<div class="line">ndarrays with spectra (and component spds used to build the </div>
<div class="line">final spectra) </div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>References:</dt>
<dd><p class="first">1. <a class="reference external" href="https://ws680.nist.gov/publication/get_pdf.cfm?pub_id=841839">Ohno Y (2005). 
Spectral design considerations for white LED color rendering. 
Opt. Eng. 44, 111302.</a></p>
<p class="last">2. <a class="reference external" href="https://www.osapublishing.org/vjbo/fulltext.cfm?uri=oe-19-7-6903&amp;id=211315">Smet K, Ryckaert WR, Pointer MR, Deconinck G, and Hanselaer P (2011). 
Optimal colour quality of LED clusters based on memory colours. 
Opt. Express 19, 6903–6912.</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.spdbuild.spd_builder">
<code class="descclassname">luxpy.toolboxes.spdbuild.</code><code class="descname">spd_builder</code><span class="sig-paren">(</span><em>flux=None, component_spds=None, peakwl=450, fwhm=20, bw_order=-1, pair_strengths=None, wl=[360.0, 830.0, 1.0], with_wl=True, strength_shoulder=2, strength_ph=0, peakwl_ph1=530, fwhm_ph1=80, strength_ph1=1, peakwl_ph2=560, fwhm_ph2=80, strength_ph2=None, target=None, tar_type='Yuv', cspace_bwtf={}, cieobs='1931_2', use_piecewise_fcn=False, verbosity=0, out='spd', **kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdbuilder.html#spd_builder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.spd_builder" title="Permalink to this definition">¶</a></dt>
<dd><p>Build spectrum based on Gaussian, monochromatic and/or phophor type spectra.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">flux:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Fluxes of each of the component spectra.</div>
<div class="line">None outputs the individual component spectra.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">component_spds:</th><td class="field-body"><div class="first last line-block">
<div class="line">None or ndarray, optional</div>
<div class="line">If None: calculate component spds from input args.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">peakw:</th><td class="field-body"><div class="first last line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Peak wavelengths of the monochromatic led.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">fwhm:</th><td class="field-body"><div class="first last line-block">
<div class="line">int or float or list or ndarray, optional (but must be same shape as peakw!)</div>
<div class="line">Full-Width-Half-Maximum of gaussian.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">wl:</th><td class="field-body"><div class="first last line-block">
<div class="line">_WL3, optional</div>
<div class="line">Wavelength range.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">bw_order:</th><td class="field-body"><div class="first last line-block">
<div class="line">-1, optional</div>
<div class="line">Order of Butterworth function.</div>
<div class="line">If -1 or 0: spd profile is Ohno’s gaussian based</div>
<div class="line-block">
<div class="line">(to obtain pure Gaussian: set strength_shoulder = 0).</div>
</div>
<div class="line">If -2: spd profile is Lorentzian,</div>
<div class="line">else (&gt;0): Butterworth.</div>
<div class="line">Note that this only applies to the monochromatic led  spds and not </div>
<div class="line">the phosphors spds (these are always gaussian based).</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">pair_strengths:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with pair_strengths of mono_led spds, optional</div>
<div class="line">If None: will be randomly selected, possibly resulting in </div>
<div class="line">unphysical (out-of-gamut) solution.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">with_wl:</th><td class="field-body"><div class="first last line-block">
<div class="line">True, optional</div>
<div class="line">True outputs a ndarray with first row wavelengths.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">strength_shoulder:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">2, optiona l</div>
<div class="line">Determines the strength of the spectrum shoulders of the mono led.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">strength_ph:</th><td class="field-body"><div class="first last line-block">
<div class="line">0, optional</div>
<div class="line">Total contribution of phosphors in mixture.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">peakwl_ph1:</th><td class="field-body"><div class="first last line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Peak wavelength of the first phosphor.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">fwhm_ph1:</th><td class="field-body"><div class="first last line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Full-Width-Half-Maximum of gaussian used to simulate first phosphor.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">strength_ph1:</th><td class="field-body"><div class="first last line-block">
<div class="line">1, optional</div>
<div class="line">Strength of first phosphor in phosphor mixture. </div>
<div class="line">If :strength_ph2: is None: value should be in the [0,1] range.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">peakwl_ph2:</th><td class="field-body"><div class="first last line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Peak wavelength of the second phosphor.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">fwhm_ph2:</th><td class="field-body"><div class="first last line-block">
<div class="line">int or float or list or ndarray, optional</div>
<div class="line">Full-Width-Half-Maximum of gaussian used to simulate second phosphor.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">strength_ph2:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Strength of second phosphor in phosphor mixture. </div>
<div class="line">If None: strength is calculated as (1-:strength_ph1:)</div>
<div class="line-block">
<div class="line-block">
<div class="line">:target: np2d([100,1/3,1/3]), optional</div>
</div>
<div class="line">ndarray with Yxy chromaticity of target.</div>
</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">verbosity:</th><td class="field-body"><div class="first last line-block">
<div class="line">0, optional</div>
<div class="line">If &gt; 0: plots spectrum components (mono_led, ph1, ph2, …)</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">out:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘spd’, optional</div>
<div class="line">Specifies output.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">use_piecewise_fcn:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">False, optional</div>
<div class="line">True: uses piece-wise function as in Smet et al. 2011. Can give </div>
<div class="line">non_smooth spectra optimized from components to which it is</div>
<div class="line">applied. </div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">target:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">ndarray with Yxy chromaticity of target.</div>
<div class="line">If None: don’t override phosphor strengths, else calculate strength</div>
<div class="line-block">
<div class="line">to obtain :target: using color3mixer().</div>
</div>
<div class="line">If not None AND strength_ph is None or 0: components are </div>
<div class="line">monochromatic and colormixer is used to optimize fluxes to </div>
<div class="line">obtain target chromaticity (N can be &gt; 3 components)</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">tar_type:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘Yxy’ or str, optional</div>
<div class="line">Specifies the input type in :target: (e.g. ‘Yxy’ or ‘cct’)</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">cieobs:</th><td class="field-body"><div class="first last line-block">
<div class="line">_CIEOBS, optional</div>
<div class="line">CIE CMF set used to calculate chromaticity values.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">cspace_bwtf:</th><td class="field-body"><div class="first last line-block">
<div class="line">{}, optional</div>
<div class="line">Backward (…_to_xyz) transform parameters </div>
<div class="line">(see colortf()) to go from :tar_type: to ‘Yxy’)</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with spectra.  </div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Note:</dt>
<dd>1. Target-optimization is only for phophor_leds with three components 
(blue pump, ph1 and ph2) spanning a sufficiently large gamut.</dd>
<dt>References:</dt>
<dd><p class="first">1. <a class="reference external" href="https://ws680.nist.gov/publication/get_pdf.cfm?pub_id=841839">Ohno Y (2005). 
Spectral design considerations for white LED color rendering. 
Opt. Eng. 44, 111302.</a></p>
<p class="last">2. <a class="reference external" href="https://www.osapublishing.org/vjbo/fulltext.cfm?uri=oe-19-7-6903&amp;id=211315">Smet K, Ryckaert WR, Pointer MR, Deconinck G, and Hanselaer P (2011). 
Optimal colour quality of LED clusters based on memory colours. 
Opt. Express 19, 6903–6912.</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.spdbuild.get_w_summed_spd">
<code class="descclassname">luxpy.toolboxes.spdbuild.</code><code class="descname">get_w_summed_spd</code><span class="sig-paren">(</span><em>w</em>, <em>spds</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdbuilder.html#get_w_summed_spd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.get_w_summed_spd" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate weighted sum of spds.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">w:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with weigths (e.g. fluxes)</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">spds:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with component spds.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with weighted sum.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.spdbuild.fitnessfcn">
<code class="descclassname">luxpy.toolboxes.spdbuild.</code><code class="descname">fitnessfcn</code><span class="sig-paren">(</span><em>x, spd_constructor, spd_constructor_pars=None, F_rss=True, decimals=[3], obj_fcn=[None], obj_fcn_pars=[{}], obj_fcn_weights=[1], obj_tar_vals=[0], verbosity=0, out='F'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdbuilder.html#fitnessfcn"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.fitnessfcn" title="Permalink to this definition">¶</a></dt>
<dd><p>Fitness function that calculates closeness of solution x to target values 
for specified objective functions.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">x:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with parameter values</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">spd_constructor:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">function handle to a function that constructs the spd
from parameter values in :x:.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">spd_constructor_pars:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">None, optional,</div>
<div class="line">Parameters required by :spd_constructor:</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">F_rss:</th><td class="field-body"><div class="first last line-block">
<div class="line">True, optional</div>
<div class="line">Take Root-Sum-of-Squares of ‘closeness’ values between target and </div>
<div class="line">objective function values.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">decimals:</th><td class="field-body"><div class="first last line-block">
<div class="line">3, optional</div>
<div class="line">List of rounding decimals of objective function values.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">obj_fcn:</th><td class="field-body"><div class="first last line-block">
<div class="line">[None] or list, optional</div>
<div class="line">List of function handles to objective function.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">obj_fcn_weights:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">[1] or list, optional.</div>
<div class="line">List of weigths for each obj. fcn</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">obj_fcn_pars:</th><td class="field-body"><div class="first last line-block">
<div class="line">[None] or list, optional</div>
<div class="line">List of parameter dicts for each obj. fcn.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">obj_tar_vals:</th><td class="field-body"><div class="first last line-block">
<div class="line">[0] or list, optional</div>
<div class="line">List of target values for each objective function.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">verbosity:</th><td class="field-body"><div class="first last line-block">
<div class="line">0, optional</div>
<div class="line">If &gt; 0: print intermediate results.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">out:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘F’, optional</div>
<div class="line">Determines output.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">F:</th><td class="field-body"><div class="first last line-block">
<div class="line">float or ndarray with fitness value for current solution :x:.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.spdbuild.spd_constructor_2">
<code class="descclassname">luxpy.toolboxes.spdbuild.</code><code class="descname">spd_constructor_2</code><span class="sig-paren">(</span><em>x</em>, <em>constructor_pars={}</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdbuilder.html#spd_constructor_2"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.spd_constructor_2" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct spd from model parameters using pairs of intermediate sources.</p>
<div class="line-block">
<div class="line">Pairs (odd,even) of components are selected and combined using </div>
<div class="line-block">
<div class="line">‘pair_strength’. This process is continued until only 3 intermediate </div>
<div class="line">(combined) sources remain. Color3mixer is then used to calculate the </div>
<div class="line">fluxes for the remaining 3 sources, after which the fluxes of all </div>
<div class="line">components are back-calculated.</div>
</div>
</div>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">x:</th><td class="field-body"><div class="first last line-block">
<div class="line">vector of optimization parameters.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">constructor_pars:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">dict with model parameters. </div>
<div class="line">Key ‘list’ determines which parameters are in :x: and key ‘len’</div>
<div class="line">(Specifies the number of variables representing each parameter).</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first last line-block">
<div class="line">spd, M, spds</div>
<div class="line">ndarrays with spectrum corresponding to x, M the fluxes of </div>
<div class="line">the spectral components of spd and spds the spectral components </div>
<div class="line">themselves.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.spdbuild.color3mixer">
<code class="descclassname">luxpy.toolboxes.spdbuild.</code><code class="descname">color3mixer</code><span class="sig-paren">(</span><em>Yxyt</em>, <em>Yxy1</em>, <em>Yxy2</em>, <em>Yxy3</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdbuilder.html#color3mixer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.color3mixer" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate fluxes required to obtain a target chromaticity 
when (additively) mixing 3 light sources.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Yxyt:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with target Yxy chromaticities.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Yxy1:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with Yxy chromaticities of light sources 1.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Yxy2:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with Yxy chromaticities of light sources 2.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Yxy3:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with Yxy chromaticities of light sources 3.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">M:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with fluxes.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Note:</dt>
<dd>Yxyt, Yxy1, … can contain multiple rows, referring to single mixture.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.spdbuild.colormixer">
<code class="descclassname">luxpy.toolboxes.spdbuild.</code><code class="descname">colormixer</code><span class="sig-paren">(</span><em>Yxyt=None</em>, <em>Yxyi=None</em>, <em>n=4</em>, <em>pair_strengths=None</em>, <em>source_order=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdbuilder.html#colormixer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.colormixer" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate fluxes required to obtain a target chromaticity 
when (additively) mixing N light sources.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Yxyt:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with target Yxy chromaticities.</div>
<div class="line">Defaults to equi-energy white.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Yxyi:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with Yxy chromaticities of light sources i = 1 to n.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">n:</th><td class="field-body"><div class="first last line-block">
<div class="line">4 or int, optional</div>
<div class="line">Number of source components to randomly generate when Yxyi is None.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">pair_strengths:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with light source pair strengths.  </div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">source_order:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with order of source components.</div>
<div class="line">If None: use np.arange(n)</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">M:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with fluxes.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Note:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Algorithm:</th><td class="field-body"><div class="first last line-block">
<div class="line">1. Loop over all source components and create intermediate sources</div>
<div class="line-block">
<div class="line">from all (even,odd)-pairs using the relative strengths </div>
<div class="line-block">
<div class="line">of the pair (specified in pair_strengths). </div>
</div>
</div>
<div class="line">2. Collect any remaining sources.</div>
<div class="line">3. Combine with new intermediate source components</div>
<div class="line">4. Repeat 1-3 until there are only 3 source components left. </div>
<div class="line">5. Use color3mixer to calculate the required fluxes of the 3 final</div>
<div class="line-block">
<div class="line">intermediate components to obtain the target chromaticity. </div>
</div>
<div class="line">6. Backward calculate the fluxes of all original source components</div>
<div class="line-block">
<div class="line">from the 3 final intermediate fluxes.</div>
</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.spdbuild.colormixer_pinv">
<code class="descclassname">luxpy.toolboxes.spdbuild.</code><code class="descname">colormixer_pinv</code><span class="sig-paren">(</span><em>xyzt</em>, <em>xyzi</em>, <em>input_fmt='xyz'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdbuilder.html#colormixer_pinv"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.colormixer_pinv" title="Permalink to this definition">¶</a></dt>
<dd><p>Additive color mixer of N primaries using using Moore-Penrose pseudo-inverse matrix.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">xyzt:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with target XYZ tristimulus values or Yxy chromaticity coordinates.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">xyzi:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with XYZ tristimulus values or Yxy chromaticity coordinates of light sources i = 1 to n.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">input_fmt:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘xyz’, optional</div>
<div class="line">Format specifier of :xyzt: and :xyzi: input arguments.</div>
<div class="line">- options: ‘xyz’, ‘Yxy’</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">w:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with fluxes (weights) of each of the primaries in the mixture.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.spdbuild.spd_constructor_3">
<code class="descclassname">luxpy.toolboxes.spdbuild.</code><code class="descname">spd_constructor_3</code><span class="sig-paren">(</span><em>x</em>, <em>constructor_pars={}</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdbuilder.html#spd_constructor_3"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.spd_constructor_3" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct spd from model parameters using trio’s of intermediate sources.</p>
<div class="line-block">
<div class="line">The triangle/trio method creates for all possible combinations of 3 primary</div>
<div class="line">component spectra a spectrum that results in the target chromaticity </div>
<div class="line">using color3mixer() and then optimizes the weights of each of the latter </div>
<div class="line">spectra such that adding them (additive mixing) results in obj_vals as </div>
<div class="line">close as possible to the target values.</div>
</div>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">x:</th><td class="field-body"><div class="first last line-block">
<div class="line">vector of optimization parameters.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">constructor_pars:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">dict with model parameters. </div>
<div class="line">Key ‘list’ determines which parameters are in :x: and key ‘len’</div>
<div class="line">(specifies the number of variables representing each parameter).</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first last line-block">
<div class="line">spd, M, spds</div>
<div class="line">ndarrays with spectrum corresponding to x, M the fluxes of </div>
<div class="line">the spectral components of spd and spds the spectral components </div>
<div class="line">themselves.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.spdbuild.spd_optimizer_2_3">
<code class="descclassname">luxpy.toolboxes.spdbuild.</code><code class="descname">spd_optimizer_2_3</code><span class="sig-paren">(</span><em>optimizer_type='2mixer', spd_constructor=None, spd_model_pars=None, component_data=4, N_components=None, wl=[360.0, 830.0, 1.0], allow_nongaussianbased_mono_spds=False, Yxy_target=array([[1.0000e+02, 3.3333e-01, 3.3333e-01]]), cieobs='1931_2', obj_fcn=[None], obj_fcn_pars=[{}], obj_fcn_weights=[1], obj_tar_vals=[0], decimals=[5], minimize_method='Nelder-Mead', minimize_opts=None, F_rss=True, verbosity=0, **kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdbuilder.html#spd_optimizer_2_3"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.spd_optimizer_2_3" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">Optimizes the weights (fluxes) of a set of component spectra by combining </div>
<div class="line">pairs (2) or trio’s (3) of components to intermediate sources until only 3</div>
<div class="line">remain. Color3mixer can then be called to calculate required fluxes to</div>
<div class="line">obtain target chromaticity and fluxes are then back-calculated.</div>
</div>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">optimizer_type:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘2mixer’ or ‘3mixer’ or ‘user’, optional</div>
<div class="line">Specifies whether to optimize spectral model parameters by </div>
<div class="line">combining pairs or trio’s of comonponents.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">spd_constructor:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Function handle to user defined spd_constructor function.</div>
<div class="line-block">
<div class="line">Input: fcn(x, constructor_pars = {}, kwargs)</div>
<div class="line">Output: spd,M,spds</div>
<div class="line-block">
<div class="line">nd array with:</div>
<div class="line-block">
<div class="line-block">
<div class="line">- spd: spectrum resulting from x</div>
</div>
<div class="line">- M: fluxes of all component spds</div>
<div class="line-block">
<div class="line">- spds: component spds (in [N+1,wl] format)</div>
</div>
</div>
</div>
</div>
<div class="line">(See e.g. spd_constructor_2 or spd_constructor_3)</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">spd_model_pars:</th><td class="field-body"><div class="first last line-block">
<div class="line">dict with model parameters required by spd_constructor</div>
<div class="line">and with optimization parameters required by minimize (x0, lb, ub).                .</div>
<div class="line">Only used when :optimizer_type: == ‘user’.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">component_data:</th><td class="field-body"><div class="first last line-block">
<div class="line">4, optional</div>
<div class="line">Component spectra data: </div>
<div class="line">If int: specifies number of components used in optimization </div>
<div class="line-block">
<div class="line">(peakwl, fwhm and pair_strengths will be optimized).</div>
</div>
<div class="line">If dict: generate components based on parameters (peakwl, fwhm, </div>
<div class="line-block">
<div class="line-block">
<div class="line">pair_strengths, etc.) in dict. </div>
</div>
<div class="line">(keys with None values will be optimized)</div>
</div>
<div class="line">If ndarray: optimize pair_strengths of component spectra.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">N_components:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Specifies number of components used in optimization. (only used </div>
<div class="line">when :component_data: is dict and user wants to override dict. </div>
<div class="line">Note that shape of parameters arrays must match N_components).</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">allow_nongaussianbased_mono_spds:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">False, optional</div>
<div class="line">False: use pure Gaussian based monochrom. spds.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">wl:</th><td class="field-body"><div class="first last line-block">
<div class="line">_WL3, optional</div>
<div class="line">Wavelengths used in optimization when :component_data: is not </div>
<div class="line">ndarray with spectral data.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Yxy_target:</th><td class="field-body"><div class="first last line-block">
<div class="line">np2d([100,1/3,1/3]), optional</div>
<div class="line">ndarray with Yxy chromaticity of target.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">cieobs:</th><td class="field-body"><div class="first last line-block">
<div class="line">_CIEOBS, optional</div>
<div class="line">CIE CMF set used to calculate chromaticity values if not provided </div>
<div class="line">in :Yxyi:.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">F_rss:</th><td class="field-body"><div class="first last line-block">
<div class="line">True, optional</div>
<div class="line">Take Root-Sum-of-Squares of ‘closeness’ values between target and </div>
<div class="line">objective function values.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">decimals:</th><td class="field-body"><div class="first last line-block">
<div class="line">5, optional</div>
<div class="line">Rounding decimals of objective function values.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">obj_fcn:</th><td class="field-body"><div class="first last line-block">
<div class="line">[None] or list, optional</div>
<div class="line">Function handles to objective function.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">obj_fcn_weights:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">[1] or list, optional.</div>
<div class="line">Weigths for each obj. fcn</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">obj_fcn_pars:</th><td class="field-body"><div class="first last line-block">
<div class="line">[None] or list, optional</div>
<div class="line">Parameter dicts for each obj. fcn.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">obj_tar_vals:</th><td class="field-body"><div class="first last line-block">
<div class="line">[0] or list, optional</div>
<div class="line">Target values for each objective function.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">minimize_method:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">‘Nelder-Mead’, optional</div>
<div class="line">Optimization method used by minimize function.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">minimize_opts:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Dict with minimization options. </div>
<div class="line">None defaults to: {‘xtol’: 1e-5, ‘disp’: True, ‘maxiter’: 1000*Nc,</div>
<div class="line-block">
<div class="line">‘maxfev’ : 1000*Nc,’fatol’: 0.01}</div>
</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">verbosity:</th><td class="field-body"><div class="first last line-block">
<div class="line">0, optional</div>
<div class="line">If &gt; 0: print intermediate results.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first last line-block">
<div class="line">M, spd_opt, obj_vals</div>
<div class="line-block">
<div class="line">- ‘M’: ndarray with fluxes for each component spectrum.</div>
<div class="line">- ‘spd_opt’: optimized spectrum.</div>
<div class="line">- ‘obj_vals’: values of the obj. fcns for the optimized spectrum.</div>
</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.spdbuild.get_optim_pars_dict">
<code class="descclassname">luxpy.toolboxes.spdbuild.</code><code class="descname">get_optim_pars_dict</code><span class="sig-paren">(</span><em>target=array([[1.0000e+02, 3.3333e-01, 3.3333e-01]]), tar_type='Yxy', cieobs='1931_2', optimizer_type='2mixer', spd_constructor=None, spd_model_pars=None, cspace='Yuv', cspace_bwtf={}, cspace_fwtf={}, component_spds=None, N_components=None, obj_fcn=[None], obj_fcn_pars=[{}], obj_fcn_weights=[1], obj_tar_vals=[0], decimals=[5], minimize_method='Nelder-Mead', minimize_opts=None, F_rss=True, peakwl=[450, 530, 610], fwhm=[20, 20, 20], allow_nongaussianbased_mono_spds=False, bw_order=[-1], wl=[360.0, 830.0, 1.0], with_wl=True, strength_shoulder=2, strength_ph=[0], use_piecewise_fcn=False, peakwl_ph1=[530], fwhm_ph1=[80], strength_ph1=[1], peakwl_ph2=[560], fwhm_ph2=[80], strength_ph2=None, verbosity=0, pair_strengths=None, triangle_strengths=None, peakwl_min=[400], peakwl_max=[700], fwhm_min=[5], fwhm_max=[600], bw_order_min=[-2], bw_order_max=[100]</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdbuilder.html#get_optim_pars_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.get_optim_pars_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Setup dict with optimization parameters.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>See  ?spd_optimizer for more info.</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">opts:</th><td class="field-body"><div class="first last line-block">
<div class="line">dict with keys and values of the function’s keywords and values.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.spdbuild.initialize_spd_model_pars">
<code class="descclassname">luxpy.toolboxes.spdbuild.</code><code class="descname">initialize_spd_model_pars</code><span class="sig-paren">(</span><em>component_data, N_components=None, allow_nongaussianbased_mono_spds=False, optimizer_type='2mixer', wl=[360.0, 830.0, 1.0]</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdbuilder.html#initialize_spd_model_pars"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.initialize_spd_model_pars" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize spd_model_pars dict (for spd_constructor) based on type of component_data.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">component_data:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Component spectra data: </div>
<div class="line">If int: specifies number of components used in optimization </div>
<div class="line-block">
<div class="line">(peakwl, fwhm and pair_strengths will be optimized).</div>
</div>
<div class="line">If dict: generate components based on parameters (peakwl, fwhm, </div>
<div class="line-block">
<div class="line-block">
<div class="line">pair_strengths, etc.) in dict. </div>
</div>
<div class="line">(keys with None values will be optimized)</div>
</div>
<div class="line">If ndarray: optimize pair_strengths of component spectra.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">N_components:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Specifies number of components used in optimization. (only used </div>
<div class="line">when :component_data: is dict and user wants to override dict. </div>
<div class="line">Note that shape of parameters arrays must match N_components).</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">allow_nongaussianbased_mono_spds:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">False, optional</div>
<div class="line-block">
<div class="line">- False: use Gaussian based monochrom. spds.</div>
<div class="line">- True: also allow butterworth and lorentzian type monochrom. spds while optimizing.</div>
</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">optimizer_type:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘2mixer’, optional</div>
<div class="line">Type of spectral optimization routine.</div>
<div class="line">(other options: ‘3mixer’, ‘search’)</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">wl:</th><td class="field-body"><div class="first last line-block">
<div class="line">_WL3, optional</div>
<div class="line">Wavelengths used in optimization when :component_data: is not an</div>
<div class="line">ndarray with spectral data.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">spd_model_pars:</th><td class="field-body"><div class="first last line-block">
<div class="line">dict with spectrum-model parameters</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.spdbuild.initialize_spd_optim_pars">
<code class="descclassname">luxpy.toolboxes.spdbuild.</code><code class="descname">initialize_spd_optim_pars</code><span class="sig-paren">(</span><em>component_data, N_components=None, allow_nongaussianbased_mono_spds=False, optimizer_type='2mixer', wl=[360.0, 830.0, 1.0], spd_model_pars=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdbuilder.html#initialize_spd_optim_pars"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.initialize_spd_optim_pars" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize spd_optim_pars dict based on type of component_data.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">component_data:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Component spectra data: </div>
<div class="line">If int: specifies number of components used in optimization </div>
<div class="line-block">
<div class="line">(peakwl, fwhm and pair_strengths will be optimized).</div>
</div>
<div class="line">If dict: generate components based on parameters (peakwl, fwhm, </div>
<div class="line-block">
<div class="line-block">
<div class="line">pair_strengths, etc.) in dict. </div>
</div>
<div class="line">(keys with None values will be optimized)</div>
</div>
<div class="line">If ndarray: optimize pair_strengths of component spectra.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">N_components:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Specifies number of components used in optimization. (only used </div>
<div class="line">when :component_data: is dict and user wants to override dict. </div>
<div class="line">Note that shape of parameters arrays must match N_components).</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">allow_nongaussianbased_mono_spds:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">False, optional</div>
<div class="line">False: use Gaussian based monochrom. spds.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">optimizer_type:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘2mixer’, optional</div>
<div class="line">Type of spectral optimization routine.</div>
<div class="line">(other options: ‘3mixer’, ‘search’)</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">wl:</th><td class="field-body"><div class="first last line-block">
<div class="line">_WL3, optional</div>
<div class="line">Wavelengths used in optimization when :component_data: is not an</div>
<div class="line">ndarray with spectral data.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">spd_model_pars:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">If None, initialize based on type of component_data.</div>
<div class="line">else: initialize on pre-defined spd_model_pars dict.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">spd_optim_pars:</th><td class="field-body"><div class="first last line-block">
<div class="line">dict with optimization parameters (x0, ub, lb)</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.spdbuild.get_primary_fluxratios">
<code class="descclassname">luxpy.toolboxes.spdbuild.</code><code class="descname">get_primary_fluxratios</code><span class="sig-paren">(</span><em>res</em>, <em>primaries</em>, <em>Ytarget=1</em>, <em>ptype='pu'</em>, <em>cieobs='1931_2'</em>, <em>out='M</em>, <em>Sopt'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdbuilder.html#get_primary_fluxratios"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.get_primary_fluxratios" title="Permalink to this definition">¶</a></dt>
<dd><p>Get flux ratios of primaries.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">res:</th><td class="field-body"><div class="first last line-block">
<div class="line">dict or ndarray with optimized fluxes for component spds normalized to max = 1.</div>
<div class="line">(output of spd_optimizer)</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">primaries:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with primary spectra.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Ytarget:</th><td class="field-body"><div class="first last line-block">
<div class="line">1, optional</div>
<div class="line">M will be scaled to result in a photo-/radio-metric power of Ytarget</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">ptype:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘pu’ or ‘ru’, optional</div>
<div class="line">Type of power:</div>
<div class="line">-‘pu’: photometric units</div>
<div class="line">-‘ru’: radiometric units</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">cieobs:</th><td class="field-body"><div class="first last line-block">
<div class="line">_CIEOBS, optional</div>
<div class="line">CMF set/Vlambda to use in calculation of power.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">M:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with flux ratios.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Sopt:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with optimized scaled spectrum.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.spdbuild.spd_optimizer">
<code class="descclassname">luxpy.toolboxes.spdbuild.</code><code class="descname">spd_optimizer</code><span class="sig-paren">(</span><em>target=array([[1.0000e+02, 3.3333e-01, 3.3333e-01]]), tar_type='Yxy', cieobs='1931_2', optimizer_type='2mixer', spd_constructor=None, spd_model_pars=None, cspace='Yuv', cspace_bwtf={}, cspace_fwtf={}, component_spds=None, N_components=None, obj_fcn=[None], obj_fcn_pars=[{}], obj_fcn_weights=[1], obj_tar_vals=[0], decimals=[5], minimize_method='Nelder-Mead', minimize_opts=None, F_rss=True, peakwl=[450, 530, 610], fwhm=[20, 20, 20], allow_nongaussianbased_mono_spds=False, bw_order=[-1], wl=[360.0, 830.0, 1.0], with_wl=True, strength_shoulder=2, strength_ph=[0], use_piecewise_fcn=False, peakwl_ph1=[530], fwhm_ph1=[80], strength_ph1=[1], peakwl_ph2=[560], fwhm_ph2=[80], strength_ph2=None, verbosity=0, pair_strengths=None, peakwl_min=[400], peakwl_max=[700], fwhm_min=[5], fwhm_max=[600], bw_order_min=-2, bw_order_max=100, out='spds,M'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdbuilder.html#spd_optimizer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.spd_optimizer" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">Generate a spectrum with specified white point and optimized for certain </div>
<div class="line">objective functions from a set of component spectra or component spectrum </div>
<div class="line">model parameters.</div>
</div>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">target:</th><td class="field-body"><div class="first last line-block">
<div class="line">np2d([100,1/3,1/3]), optional</div>
<div class="line">ndarray with Yxy chromaticity of target.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">tar_type:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘Yxy’ or str, optional</div>
<div class="line">Specifies the input type in :target: (e.g. ‘Yxy’ or ‘cct’)</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">cieobs:</th><td class="field-body"><div class="first last line-block">
<div class="line">_CIEOBS, optional</div>
<div class="line">CIE CMF set used to calculate chromaticity values, if not provided </div>
<div class="line">in :Yxyi:.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">optimizer_type:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘2mixer’,  optional</div>
<div class="line">Specifies type of chromaticity optimization </div>
<div class="line">(‘3mixer’ or ‘2mixer’ or ‘search’)</div>
<div class="line">For help on ‘2mixer’ and ‘3mixer’ algorithms, see notes below.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">spd_constructor:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Function handle to user defined spd_constructor function.</div>
<div class="line-block">
<div class="line">Input: fcn(x, constructor_pars = {}, kwargs)</div>
<div class="line">Output: spd,M,spds</div>
<div class="line-block">
<div class="line">nd array with:</div>
<div class="line-block">
<div class="line">- spd: spectrum resulting from x</div>
<div class="line">- M: fluxes of all component spds</div>
<div class="line">- spds: component spds (in [N+1,wl] format)</div>
</div>
</div>
</div>
<div class="line">(See e.g. spd_constructor_2 or spd_constructor_3)</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">spd_model_pars:</th><td class="field-body"><div class="first last line-block">
<div class="line">dict with model parameters required by spd_constructor</div>
<div class="line">and with optimization parameters required by minimize (x0, lb, ub).                .</div>
<div class="line">Only used when :optimizer_type: == ‘user’.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">cspace:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘Yuv’, optional</div>
<div class="line">Color space for ‘search’-type optimization. </div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">cspace_bwtf:</th><td class="field-body"><div class="first last line-block">
<div class="line">{}, optional</div>
<div class="line">Backward (cspace_to_xyz) transform parameters </div>
<div class="line">(see colortf()) to go from :tar_type: to ‘Yxy’).</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">cspace_fwtf:</th><td class="field-body"><div class="first last line-block">
<div class="line">{}, optional</div>
<div class="line">Forward (xyz_to_cspace) transform parameters </div>
<div class="line">(see colortf()) to go from xyz to :cspace:).</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">component_spds:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray of component spectra.</div>
<div class="line">If None: they are built from input args.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">N_components:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Specifies number of components used in optimization. (only used </div>
<div class="line">when :component_data: is dict and user wants to override dict value</div>
<div class="line">Note that shape of parameters arrays must match N_components).</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">allow_nongaussianbased_mono_spds:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">False, optional</div>
<div class="line">False: use Ohno monochromatic led spectra based on Gaussian spds.</div>
<div class="line">True: also use Butterworth and Lorentzian spds.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">wl:</th><td class="field-body"><div class="first last line-block">
<div class="line">_WL3, optional</div>
<div class="line">Wavelengths used in optimization when :component_data: is not an</div>
<div class="line">ndarray with spectral data.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">F_rss:</th><td class="field-body"><div class="first last line-block">
<div class="line">True, optional</div>
<div class="line">Take Root-Sum-of-Squares of ‘closeness’ values between target and </div>
<div class="line">objective function values.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">decimals:</th><td class="field-body"><div class="first last line-block">
<div class="line">5, optional</div>
<div class="line">Rounding decimals of objective function values.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">obj_fcn:</th><td class="field-body"><div class="first last line-block">
<div class="line">[None] or list, optional</div>
<div class="line">Function handles to objective function.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">obj_fcn_weights:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">[1] or list, optional.</div>
<div class="line">Weigths for each obj. fcn</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">obj_fcn_pars:</th><td class="field-body"><div class="first last line-block">
<div class="line">[None] or list, optional</div>
<div class="line">Parameter dicts for each obj. fcn.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">obj_tar_vals:</th><td class="field-body"><div class="first last line-block">
<div class="line">[0] or list, optional</div>
<div class="line">Target values for each objective function.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">minimize_method:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">‘Nelder-Mead’, optional</div>
<div class="line">Optimization method used by minimize function.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">minimize_opts:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Dict with minimization options. </div>
<div class="line-block">
<div class="line">None defaults to: {‘xtol’: 1e-5, ‘disp’: True, ‘maxiter’: 1000*Nc,</div>
<div class="line-block">
<div class="line">‘maxfev’ : 1000*Nc,’fatol’: 0.01}</div>
</div>
</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">verbosity:</th><td class="field-body"><div class="first last line-block">
<div class="line">0, optional</div>
<div class="line">If &gt; 0: print intermediate results.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">out:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘spds,M’, optional</div>
<div class="line">Determines output of function.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Note:</dt>
<dd>peakwl:, :fwhm:, … : see ?spd_builder for more info.</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first last line-block">
<div class="line">spds, M</div>
<div class="line-block">
<div class="line">- ‘spds’: optimized spectrum.</div>
<div class="line">- ‘M’: ndarray with fluxes for each component spectrum.</div>
</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Notes:</dt>
<dd><table class="first docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Optimization algorithms:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"></td>
</tr>
</tbody>
</table>
<p>1. ‘2mixer’:
Pairs (odd,even) of components are selected and combined using 
‘pair_strength’. This process is continued until only 3 (combined)
intermediate sources remain. Color3mixer is then used to calculate 
the fluxes for the remaining 3 sources, after which the fluxes of 
all components are back-calculated.</p>
<p class="last">2. ‘3mixer’:
The triangle/trio method creates for all possible combinations of 
3 primary component spectra a spectrum that results in the target 
chromaticity using color3mixer() and then optimizes the weights of
each of the latter spectra such that adding them (additive mixing) 
results in obj_vals as close as possible to the target values.</p>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="luxpy.toolboxes.spdbuild.PrimConstructor">
<em class="property">class </em><code class="descclassname">luxpy.toolboxes.spdbuild.</code><code class="descname">PrimConstructor</code><span class="sig-paren">(</span><em>f=&lt;function gaussian_prim_constructor&gt;, ptypes=['peakwl', 'fwhm'], pdefs={}</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdoptimizer2020.html#PrimConstructor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.PrimConstructor" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="luxpy.toolboxes.spdbuild.PrimConstructor.get_spd">
<code class="descname">get_spd</code><span class="sig-paren">(</span><em>nprim=None, wlr=[360, 830, 1]</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdoptimizer2020.html#PrimConstructor.get_spd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.PrimConstructor.get_spd" title="Permalink to this definition">¶</a></dt>
<dd><p>Get ndarray with spds for prims.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">nprim:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">If not None: generate nprim random prims (based fixed pars and bounds in pdefs) </div>
<div class="line">else: values for all pars should be defined in pdefs! </div>
<div class="line-block">
<div class="line">(nprims is determined by number of elements in pdefs[ptypes[0]])</div>
</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="luxpy.toolboxes.spdbuild.Minimizer">
<em class="property">class </em><code class="descclassname">luxpy.toolboxes.spdbuild.</code><code class="descname">Minimizer</code><span class="sig-paren">(</span><em>method='Nelder-Mead'</em>, <em>opts={}</em>, <em>x0=None</em>, <em>pareto=False</em>, <em>display=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdoptimizer2020.html#Minimizer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.Minimizer" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="luxpy.toolboxes.spdbuild.Minimizer._set_defopts_and_pareto">
<code class="descname">_set_defopts_and_pareto</code><span class="sig-paren">(</span><em>pareto=None</em>, <em>x0=None</em>, <em>display=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdoptimizer2020.html#Minimizer._set_defopts_and_pareto"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.Minimizer._set_defopts_and_pareto" title="Permalink to this definition">¶</a></dt>
<dd><p>Set default options if not provided, as well as pareto (False: output Root-Sum-Squares of Fi in _fitnessfcn).</p>
</dd></dl>

<dl class="method">
<dt id="luxpy.toolboxes.spdbuild.Minimizer.apply">
<code class="descname">apply</code><span class="sig-paren">(</span><em>fitness_fcn</em>, <em>npars</em>, <em>fitness_args_dict</em>, <em>bounds</em>, <em>verbosity=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdoptimizer2020.html#Minimizer.apply"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.Minimizer.apply" title="Permalink to this definition">¶</a></dt>
<dd><p>Run minimizer on fitness function with specified fitness_args_dict input arguments and bounds.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="luxpy.toolboxes.spdbuild.ObjFcns">
<em class="property">class </em><code class="descclassname">luxpy.toolboxes.spdbuild.</code><code class="descname">ObjFcns</code><span class="sig-paren">(</span><em>f=None, fp=[{}], fw=[1], ft=[0], ft_tol=[0], f_requires_solution_info=[False], decimals=[5]</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdoptimizer2020.html#ObjFcns"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.ObjFcns" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="luxpy.toolboxes.spdbuild.ObjFcns._equalize_sizes">
<code class="descname">_equalize_sizes</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdoptimizer2020.html#ObjFcns._equalize_sizes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.ObjFcns._equalize_sizes" title="Permalink to this definition">¶</a></dt>
<dd><p>Equalize structure of x to that of self.f for ease of looping of the objective functions in the fitness function</p>
</dd></dl>

<dl class="method">
<dt id="luxpy.toolboxes.spdbuild.ObjFcns._calculate_fj">
<code class="descname">_calculate_fj</code><span class="sig-paren">(</span><em>spdi</em>, <em>j=0</em>, <em>solution_info={}</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdoptimizer2020.html#ObjFcns._calculate_fj"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.ObjFcns._calculate_fj" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate objective function j for input spd.</p>
</dd></dl>

<dl class="method">
<dt id="luxpy.toolboxes.spdbuild.ObjFcns._get_normalization_factors">
<code class="descname">_get_normalization_factors</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdoptimizer2020.html#ObjFcns._get_normalization_factors"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.ObjFcns._get_normalization_factors" title="Permalink to this definition">¶</a></dt>
<dd><p>Set normalization factor for F-calculation</p>
</dd></dl>

<dl class="method">
<dt id="luxpy.toolboxes.spdbuild.ObjFcns._get_fj_output_str">
<code class="descname">_get_fj_output_str</code><span class="sig-paren">(</span><em>j</em>, <em>obj_vals_ij</em>, <em>F_ij=nan</em>, <em>verbosity=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdoptimizer2020.html#ObjFcns._get_fj_output_str"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.ObjFcns._get_fj_output_str" title="Permalink to this definition">¶</a></dt>
<dd><p>get output string for objective function fj</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="luxpy.toolboxes.spdbuild.SpectralOptimizer">
<em class="property">class </em><code class="descclassname">luxpy.toolboxes.spdbuild.</code><code class="descname">SpectralOptimizer</code><span class="sig-paren">(</span><em>target=array([[1.0000e+02, 3.3333e-01, 3.3333e-01]]), tar_type='Yxy', cspace_bwtf={}, nprim=4, wlr=[360, 830, 1], cieobs='1931_2', out='spds,primss,Ms,results', optimizer_type='3mixer', triangle_strengths_bnds=None, prim_constructor=&lt;luxpy.toolboxes.spdbuild.spdoptimizer2020.PrimConstructor object&gt;, prims=None, obj_fcn=&lt;luxpy.toolboxes.spdbuild.spdoptimizer2020.ObjFcns object&gt;, minimizer=&lt;luxpy.toolboxes.spdbuild.spdoptimizer2020.Minimizer object&gt;, verbosity=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdoptimizer2020.html#SpectralOptimizer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.SpectralOptimizer" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="luxpy.toolboxes.spdbuild.SpectralOptimizer._update_nprim_prims">
<code class="descname">_update_nprim_prims</code><span class="sig-paren">(</span><em>nprim=None</em>, <em>prims=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdoptimizer2020.html#SpectralOptimizer._update_nprim_prims"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.SpectralOptimizer._update_nprim_prims" title="Permalink to this definition">¶</a></dt>
<dd><p>Update prims (and nprim).</p>
</dd></dl>

<dl class="method">
<dt id="luxpy.toolboxes.spdbuild.SpectralOptimizer._update_target">
<code class="descname">_update_target</code><span class="sig-paren">(</span><em>target=None</em>, <em>tar_type=None</em>, <em>cspace_bwtf=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdoptimizer2020.html#SpectralOptimizer._update_target"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.SpectralOptimizer._update_target" title="Permalink to this definition">¶</a></dt>
<dd><p>Update target chromaticity.</p>
</dd></dl>

<dl class="method">
<dt id="luxpy.toolboxes.spdbuild.SpectralOptimizer._update_prim_pars_bnds">
<code class="descname">_update_prim_pars_bnds</code><span class="sig-paren">(</span><em>nprim=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdoptimizer2020.html#SpectralOptimizer._update_prim_pars_bnds"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.SpectralOptimizer._update_prim_pars_bnds" title="Permalink to this definition">¶</a></dt>
<dd><p>Get and set fixed and free parameters, as well as bnds on latter for an nprim primary mixture.</p>
</dd></dl>

<dl class="method">
<dt id="luxpy.toolboxes.spdbuild.SpectralOptimizer._update_triangle_strengths_bnds">
<code class="descname">_update_triangle_strengths_bnds</code><span class="sig-paren">(</span><em>nprim=None</em>, <em>triangle_strengths_bnds=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdoptimizer2020.html#SpectralOptimizer._update_triangle_strengths_bnds"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.SpectralOptimizer._update_triangle_strengths_bnds" title="Permalink to this definition">¶</a></dt>
<dd><p>Update bounds of triangle_strengths for for an nprim primary mixture.</p>
</dd></dl>

<dl class="method">
<dt id="luxpy.toolboxes.spdbuild.SpectralOptimizer._update_bnds">
<code class="descname">_update_bnds</code><span class="sig-paren">(</span><em>nprim=None</em>, <em>triangle_strengths_bnds=None</em>, <em>**prim_kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdoptimizer2020.html#SpectralOptimizer._update_bnds"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.SpectralOptimizer._update_bnds" title="Permalink to this definition">¶</a></dt>
<dd><p>Update all bounds (triangle_strengths and those of free parameters of primary constructor) for an nprim primary mixture..</p>
</dd></dl>

<dl class="method">
<dt id="luxpy.toolboxes.spdbuild.SpectralOptimizer.update">
<code class="descname">update</code><span class="sig-paren">(</span><em>nprim=None</em>, <em>prims=None</em>, <em>cieobs=None</em>, <em>target=None</em>, <em>tar_type=None</em>, <em>cspace_bwtf=None</em>, <em>triangle_strengths_bnds=None</em>, <em>**prim_kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdoptimizer2020.html#SpectralOptimizer.update"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.SpectralOptimizer.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates all that is needed when one of the input arguments is changed.</p>
</dd></dl>

<dl class="method">
<dt id="luxpy.toolboxes.spdbuild.SpectralOptimizer._spd_constructor_tri">
<code class="descname">_spd_constructor_tri</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdoptimizer2020.html#SpectralOptimizer._spd_constructor_tri"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.SpectralOptimizer._spd_constructor_tri" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a mixture spectrum composed of n primaries using the 3mixer algorithm.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">x:</th><td class="field-body"><div class="first last line-block">
<div class="line">optimization parameters, first n!/(n-3)!*3! are the strengths of</div>
<div class="line">the triangles in the ‘3mixer’ algorithm.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">spd, prims, M:</th><td class="field-body"><div class="first last line-block">
<div class="line">- spd: spectrum resulting from x</div>
<div class="line">- spds: primary spds</div>
<div class="line">- M: fluxes of all primaries</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Notes:</dt>
<dd>1. ‘3mixer’ - optimization algorithm: The triangle/trio method creates 
for all possible combinations of 3 primary component spectra a spectrum
that results in the target chromaticity using color3mixer() and then 
optimizes the weights of each of the latter spectra such that adding 
them (additive mixing) results in obj_vals as close as possible to 
the target values.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="luxpy.toolboxes.spdbuild.SpectralOptimizer._spd_constructor_nomixer">
<code class="descname">_spd_constructor_nomixer</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdoptimizer2020.html#SpectralOptimizer._spd_constructor_nomixer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.SpectralOptimizer._spd_constructor_nomixer" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a mixture spectrum composed of n primaries using no mixer algorithm (just simple weighted sum of primaries).</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">x:</th><td class="field-body"><div class="first last line-block">
<div class="line">optimization parameters, first n are the strengths of individual primaries.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">spd, prims, M:</th><td class="field-body"><div class="first last line-block">
<div class="line">- spd: spectrum resulting from x</div>
<div class="line">- spds: primary spds</div>
<div class="line">- M: fluxes of all primaries</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Notes:</dt>
<dd><ol class="first last arabic simple">
<li>‘no-mixer’ - simple weighted sum of primaries.</li>
</ol>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="luxpy.toolboxes.spdbuild.SpectralOptimizer._fitness_fcn">
<code class="descname">_fitness_fcn</code><span class="sig-paren">(</span><em>x</em>, <em>out='F'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdoptimizer2020.html#SpectralOptimizer._fitness_fcn"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.SpectralOptimizer._fitness_fcn" title="Permalink to this definition">¶</a></dt>
<dd><p>Fitness function that calculates closeness of solution x to target values for specified objective functions.</p>
</dd></dl>

<dl class="method">
<dt id="luxpy.toolboxes.spdbuild.SpectralOptimizer.start">
<code class="descname">start</code><span class="sig-paren">(</span><em>verbosity=None</em>, <em>out=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdoptimizer2020.html#SpectralOptimizer.start"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.SpectralOptimizer.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Start optimization of _fitnessfcn for n primaries using the initialized minimizer and the selected optimizer_type.</p>
<p>Returns variables specified in :out:</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.spdbuild._extract_prim_optimization_parameters">
<code class="descclassname">luxpy.toolboxes.spdbuild.</code><code class="descname">_extract_prim_optimization_parameters</code><span class="sig-paren">(</span><em>x</em>, <em>nprims</em>, <em>prim_constructor_parameter_types</em>, <em>prim_constructor_parameter_defs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdoptimizer2020.html#_extract_prim_optimization_parameters"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild._extract_prim_optimization_parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract the primary parameters from the optimization vector x and the prim_constructor_parameter_defs dict, for use with PrimConstructor..</p>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.spdbuild._stack_wlr_spd">
<code class="descclassname">luxpy.toolboxes.spdbuild.</code><code class="descname">_stack_wlr_spd</code><span class="sig-paren">(</span><em>wlr</em>, <em>spd</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdoptimizer2020.html#_stack_wlr_spd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild._stack_wlr_spd" title="Permalink to this definition">¶</a></dt>
<dd><p>Stack the wavelength range on top of the spd values for use with PrimConstructor.</p>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.spdbuild._setup_wlr">
<code class="descclassname">luxpy.toolboxes.spdbuild.</code><code class="descname">_setup_wlr</code><span class="sig-paren">(</span><em>wlr</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdoptimizer2020.html#_setup_wlr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild._setup_wlr" title="Permalink to this definition">¶</a></dt>
<dd><p>Setup the wavelength range for use with PrimConstructor.</p>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.spdbuild.spd_optimizer2">
<code class="descclassname">luxpy.toolboxes.spdbuild.</code><code class="descname">spd_optimizer2</code><span class="sig-paren">(</span><em>target=array([[1.0000e+02, 3.3333e-01, 3.3333e-01]]), tar_type='Yxy', cspace_bwtf={}, n=4, wlr=[360, 830, 1], prims=None, cieobs='1931_2', out='spds,primss,Ms,results', optimizer_type='3mixer', prim_constructor=&lt;function gaussian_prim_constructor&gt;, prim_constructor_parameter_types=['peakwl', 'fwhm'], prim_constructor_parameter_defs={}, obj_fcn=None, obj_fcn_pars=[{}], obj_fcn_weights=[1], obj_tar_vals=[0], obj_tar_tols=[0], decimals=[5], triangle_strengths_bnds=None, minimize_method='Nelder-Mead', minimize_opts={}, x0=None, pareto=False, display=False, verbosity=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdoptimizer2020.html#spd_optimizer2"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.spd_optimizer2" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">Generate a spectrum with specified white point and optimized for certain objective </div>
<div class="line">functions from a set of primary spectra or primary spectrum model parameters.</div>
</div>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">target:</th><td class="field-body"><div class="first last line-block">
<div class="line">np2d([100,1/3,1/3]), optional</div>
<div class="line">ndarray with Yxy chromaticity of target.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">tar_type:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘Yxy’ or str, optional</div>
<div class="line">Specifies the input type in :target: (e.g. ‘Yxy’ or ‘cct’)</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">cspace_bwtf:</th><td class="field-body"><div class="first last line-block">
<div class="line">{}, optional</div>
<div class="line">Backward (cspace_to_xyz) transform parameters </div>
<div class="line">(see colortf()) to go from :tar_type: to ‘Yxy’).</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">n:</th><td class="field-body"><div class="first last line-block">
<div class="line">4, optional</div>
<div class="line">Number of primaries in light mixture.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">wl:</th><td class="field-body"><div class="first last line-block">
<div class="line">[360,830,1], optional</div>
<div class="line">Wavelengths used in optimization when :prims: is not an
ndarray with spectral data.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">cieobs:</th><td class="field-body"><div class="first last line-block">
<div class="line">_CIEOBS, optional</div>
<div class="line">CIE CMF set used to calculate chromaticity values, if not provided </div>
<div class="line">in :Yxyi:.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">optimizer_type:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘3mixer’,  optional</div>
<div class="line">Specifies type of chromaticity optimization </div>
<div class="line">For help on ‘3mixer’ algorithm, see notes below.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">prims:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray of predefined primary spectra.</div>
<div class="line">If None: they are built from optimization parameters using the </div>
<div class="line">function in :prim_constructor:</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">prim_constructor:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">function that constructs the primaries from the optimization parameters</div>
<div class="line">Should have the form: </div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">prim_constructor(x,</span> <span class="pre">n,</span> <span class="pre">wl,</span> <span class="pre">prim_constructor_parameter_types,</span> <span class="pre">**prim_constructor_parameter_defs)</span></code></div>
</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">prim_constructor_parameter_types:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">gaussian_prim_parameter_types [‘peakwl’, ‘fwhm’], optional</div>
<div class="line">List with strings of the parameters used by prim_constructor() to</div>
<div class="line">calculate the primary spd. All parameters listed and that do not</div>
<div class="line">have default values (one for each prim!!!) in prim_constructor_parameters_defs </div>
<div class="line">will be optimized.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">prim_constructor_parameters_defs:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">{}, optional</div>
<div class="line">Dict with constructor parameters required by prim_constructor and/or </div>
<div class="line">default values for parameters that are not being optimized.</div>
<div class="line">For example: {‘fwhm’:  30} will keep fwhm fixed and not optimize it.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">obj_fcn:</th><td class="field-body"><div class="first last line-block">
<div class="line">[None] or list, optional</div>
<div class="line">Function handles to objective function.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">obj_fcn_weights:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">[1] or list, optional.</div>
<div class="line">Weigths for each obj. fcn</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">obj_fcn_pars:</th><td class="field-body"><div class="first last line-block">
<div class="line">[{}] or list, optional</div>
<div class="line">Parameter dicts for each obj. fcn.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">obj_tar_vals:</th><td class="field-body"><div class="first last line-block">
<div class="line">[0] or list, optional</div>
<div class="line">Target values for each objective function.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">obj_tar_tols:</th><td class="field-body"><div class="first last line-block">
<div class="line">[0] or list, optional</div>
<div class="line">Tolerance of objective function values with target values.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">decimals:</th><td class="field-body"><div class="first last line-block">
<div class="line">[5], optional</div>
<div class="line">Rounding decimals of objective function values.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">minimize_method:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">‘Nelder-Mead’, optional</div>
<div class="line">Optimization method used by minimize function.</div>
<div class="line">options: </div>
<div class="line-block">
<div class="line">- ‘Nelder-Mead’: Nelder-Mead simplex local optimization </div>
<div class="line-block">
<div class="line">using the luxpy.math.minimizebnd wrapper</div>
<div class="line">with method set to ‘Nelder-Mead’.</div>
</div>
<div class="line">- ‘demo’ :  Differential Evolutionary Multiobjective Optimizatizer</div>
<div class="line-block">
<div class="line">(using math.DEMO.demo_opt)</div>
</div>
<div class="line">- ‘particleswarm’: Pseudo-global optimizer using particle swarms</div>
<div class="line-block">
<div class="line">(from pyswarm wrapper module luxpy.math.pyswarms_particleswarm)</div>
</div>
<div class="line">- ‘nsga_ii’: Pareto multiobjective optimizer using the NSGA-II genetic algorithm</div>
<div class="line-block">
<div class="line">(from pymoo wrapper module luxpy.math.pymoo_nsga_ii)</div>
</div>
<div class="line">- A user-defined minimization function (see _start_optimization_tri? for </div>
<div class="line-block">
<div class="line">info on the requirements of this function)</div>
</div>
</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">minimize_opts:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Dict with minimization options. </div>
<div class="line">None defaults to the options depending on choice of minimize_method</div>
<div class="line-block">
<div class="line">- ‘Nelder-Mead’   : {‘xtol’: 1e-5, ‘disp’: True, ‘maxiter’: 1000*Nc,</div>
<div class="line-block">
<div class="line">‘maxfev’ : 1000*Nc,’fatol’: 0.01}</div>
</div>
<div class="line">- ‘demo’ :          {‘F’: 0.5, ‘CR’: 0.3, ‘kmax’: 300, ‘mu’: 100, ‘display’: True}</div>
<div class="line">- ‘particleswarm’ : {‘iters’: 100, ‘n_particles’: 10, ‘ftol’: -np.inf,</div>
<div class="line-block">
<div class="line">‘ps_opts’ : {‘c1’: 0.5, ‘c2’: 0.3, ‘w’:0.9}}</div>
</div>
<div class="line">- ‘nsga_ii’ : {‘n_gen’ : 40, ‘n_pop’ : 400, ‘n_offsprings’ : None,</div>
<div class="line-block">
<div class="line">‘termination’ : (‘n_gen’ , 40), ‘seed’ : 1,</div>
<div class="line">‘ga_opts’ : {‘sampling’  : (“real_random”,{}),</div>
<div class="line-block">
<div class="line">‘crossover’ : (“real_sbx”, {‘prob’ : 0.9, ‘eta’ : 15}),</div>
<div class="line">‘mutation’  : (“real_pm”,  {‘eta’ : 20})}}</div>
</div>
</div>
<div class="line">- dict with options for user-defined minimization method.</div>
</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">triangle_strength_bnds:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">(None,None)</div>
<div class="line">Specifies lower- and upper-bounds for the strengths of each of the primary</div>
<div class="line">combinations that will be made during the optimization using ‘3mixer’.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">x0:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">If None: a random starting value will be generated for the Nelder-Mead</div>
<div class="line">minimization algorithm, else the user defined starting value will be used.</div>
<div class="line">Note that it should only contain a value for each peakwl and/or fwhm that</div>
<div class="line">is set to be optimized. The triangle_strengths are added automatically.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">pareto:</th><td class="field-body"><div class="first last line-block">
<div class="line">False, optional</div>
<div class="line">Specifies whether the output of the fitnessfcn should be the Root-Sum-of-Squares </div>
<div class="line">of all weighted objective function values or not. Individual function values are</div>
<div class="line">required by true multi-objective optimizers (i.e. pareto == True).</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">display:</th><td class="field-body"><div class="first last line-block">
<div class="line">True, optional</div>
<div class="line">Turn native display options of minimizers on (True) or off (False).</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">verbosity:</th><td class="field-body"><div class="first last line-block">
<div class="line">0, optional</div>
<div class="line">If &gt; 0: print intermediate results.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">out:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘spds,primss,Ms,results’, optional</div>
<div class="line">Determines output of function (see :returns:).</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first last line-block">
<div class="line">spds, primss,Ms,results</div>
<div class="line">- ‘spds’: optimized spectrum (or spectra: for demo, particleswarm and nsga_ii minimization methods)</div>
<div class="line">- ‘primss’: primary spectra of each optimized spectrum</div>
<div class="line">- ‘Ms’ : ndarrays with fluxes of each primary</div>
<div class="line">- ‘results’: dict with optimization results</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
<p>Notes on the optimization algorithms:</p>
<blockquote>
<div><p>1. ‘3mixer’: The triangle/trio method creates for all possible 
combinations of 3 primary component spectra a spectrum that results in 
the target chromaticity using color3mixer() and then optimizes the 
weights of each of the latter spectra such that adding them 
(additive mixing) results in obj_vals as close as possible to the 
target values.</p>
<p>2. ‘2mixer’: APRIL 2020, NOT YET IMPLEMENTED!!
Pairs (odd,even) of components are selected and combined using 
‘pair_strength’. This process is continued until only 3 (combined)
intermediate sources remain. Color3mixer is then used to calculate 
the fluxes for the remaining 3 sources, after which the fluxes of 
all components are back-calculated.</p>
</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.spdbuild.gaussian_prim_constructor">
<code class="descclassname">luxpy.toolboxes.spdbuild.</code><code class="descname">gaussian_prim_constructor</code><span class="sig-paren">(</span><em>x</em>, <em>nprims</em>, <em>wlr</em>, <em>ptypes</em>, <em>**pdefs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdoptimizer2020.html#gaussian_prim_constructor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild.gaussian_prim_constructor" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a set of nprim gaussian primaries with wavelengths wlr using the input in x and in kwargs.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">x:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray (M x nprim) with optimization parameters.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">nprim:</th><td class="field-body"><div class="first last line-block">
<div class="line">number of primaries</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">wlr:</th><td class="field-body"><div class="first last line-block">
<div class="line">wavelength range for which to construct a spectrum</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">prim_constructor:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">function that constructs the primaries from the optimization parameters</div>
<div class="line">Should have the form: </div>
<div class="line-block">
<div class="line">prim_constructor(x, n, wl, ptypes, pdefs)</div>
</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">ptypes:</th><td class="field-body"><div class="first last line-block">
<div class="line">gaussian_prim_parameter_types [‘peakwl’, ‘fwhm’], optional</div>
<div class="line">List with strings of the parameters used by PrimConstructor()) to</div>
<div class="line">calculate the primary spd. All parameters listed and that do not</div>
<div class="line">have default values (one for each prim!!!) in pdefs will be optimized.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">pdefs:</th><td class="field-body"><div class="first last line-block">
<div class="line">Dict with constructor parameters required by PrimConstructor and/or </div>
<div class="line">default values for parameters that are not being optimized.</div>
<div class="line">For example: {‘fwhm’:  [30]} will keep fwhm fixed and not optimize it.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">spd:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with spectrum of nprim primaries (1st row = wavelengths)</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Example on how to create constructor:</dt>
<dd><div class="first last line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">`def</span> <span class="pre">gaussian_prim_constructor(x,</span> <span class="pre">nprims,</span> <span class="pre">wlr,</span> <span class="pre">ptypes,</span> <span class="pre">**pdefs):`</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">`</span> <span class="pre">`</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">`</span>&#160;&#160;&#160; <span class="pre">#</span> <span class="pre">Extract</span> <span class="pre">the</span> <span class="pre">primary</span> <span class="pre">parameters</span> <span class="pre">from</span> <span class="pre">x</span> <span class="pre">and</span> <span class="pre">pdefs:`</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">`</span>&#160;&#160;&#160; <span class="pre">pars</span> <span class="pre">=</span> <span class="pre">_extract_prim_optimization_parameters(x,</span> <span class="pre">nprims,</span> <span class="pre">ptypes,</span> <span class="pre">pdefs)`</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">`</span> <span class="pre">`</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">`</span>&#160;&#160;&#160; <span class="pre">#</span> <span class="pre">Setup</span> <span class="pre">wavelengths:`</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">`</span>&#160;&#160;&#160; <span class="pre">wlr</span> <span class="pre">=</span> <span class="pre">_setup_wlr(wlr)`</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">`</span> <span class="pre">`</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">`</span>&#160;&#160;&#160; <span class="pre">#</span> <span class="pre">Conversion</span> <span class="pre">factor</span> <span class="pre">for</span> <span class="pre">FWHM</span> <span class="pre">to</span> <span class="pre">sigma</span> <span class="pre">of</span> <span class="pre">Gaussian:`</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">`</span>&#160;&#160;&#160; <span class="pre">fwhm_to_sig</span> <span class="pre">=</span> <span class="pre">1/(2*(2*np.log(2))**0.5)</span> <span class="pre">`</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">`</span> <span class="pre">`</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">`</span>&#160;&#160;&#160; <span class="pre">#</span> <span class="pre">Create</span> <span class="pre">spectral</span> <span class="pre">profile</span> <span class="pre">function:</span> <span class="pre">`</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">`</span>&#160;&#160;&#160; <span class="pre">spd</span> <span class="pre">=</span> <span class="pre">np.exp(-0.5*((pars['peakwl']-wlr)/(pars['fwhm']*fwhm_to_sig))**2)`</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">`</span> <span class="pre">`</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">`</span>&#160;&#160;&#160; <span class="pre">#</span> <span class="pre">Stack</span> <span class="pre">wlr</span> <span class="pre">and</span> <span class="pre">spd</span> <span class="pre">together:</span> <span class="pre">`</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">`</span>&#160;&#160;&#160; <span class="pre">return</span> <span class="pre">_stack_wlr_spd(wlr,spd)`</span></code> </div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.spdbuild._triangle_mixer">
<code class="descclassname">luxpy.toolboxes.spdbuild.</code><code class="descname">_triangle_mixer</code><span class="sig-paren">(</span><em>Yxy_target</em>, <em>Yxyi</em>, <em>triangle_strengths</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdoptimizer2020.html#_triangle_mixer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild._triangle_mixer" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the fluxes of each of the primaries to realize the target chromaticity Yxy_target given the triangle_strengths.</p>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.spdbuild._color3mixer">
<code class="descclassname">luxpy.toolboxes.spdbuild.</code><code class="descname">_color3mixer</code><span class="sig-paren">(</span><em>Yxyt</em>, <em>Yxy1</em>, <em>Yxy2</em>, <em>Yxy3</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spdbuild/spdoptimizer2020.html#_color3mixer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spdbuild._color3mixer" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate fluxes required to obtain a target chromaticity 
when (additively) mixing 3 light sources.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Yxyt:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with target Yxy chromaticities.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Yxy1:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with Yxy chromaticities of light sources 1.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Yxy2:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with Yxy chromaticities of light sources 2.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Yxy3:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with Yxy chromaticities of light sources 3.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">M:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with fluxes.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Note:</dt>
<dd>Yxyt, Yxy1, … can contain multiple rows, referring to single mixture.</dd>
</dl>
</dd></dl>

</div>
</div>
</div>
<div class="section" id="hypspcim">
<h2>hypspcim/<a class="headerlink" href="#hypspcim" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">py:</th><td class="field-body"><ul class="first simple">
<li>__init__.py</li>
<li>hyperspectral_img_simulator.py</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">namespace:</th><td class="field-body"><p class="first last">luxpy.hypspcim</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<span class="target" id="module-luxpy.toolboxes.hypspcim"></span><div class="section" id="module-for-hyper-spectral-image-simulation">
<h3>Module for hyper spectral image simulation<a class="headerlink" href="#module-for-hyper-spectral-image-simulation" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">_HYPSPCIM_PATH:</th><td class="field-body">path to module</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">_HYPSPCIM_DEFAULT_IMAGE:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">path + filename to default image</td>
</tr>
<tr class="field-odd field"><th class="field-name">xyz_to_rfl():</th><td class="field-body">approximate spectral reflectance of xyz based on k nearest 
neighbour interpolation of samples from a standard reflectance 
set.</td>
</tr>
<tr class="field-even field"><th class="field-name">render_image():</th><td class="field-body">Render image under specified light source spd.</td>
</tr>
</tbody>
</table>
</div></blockquote>
<dl class="function">
<dt id="luxpy.toolboxes.hypspcim.render_image">
<code class="descclassname">luxpy.toolboxes.hypspcim.</code><code class="descname">render_image</code><span class="sig-paren">(</span><em>img=None</em>, <em>spd=None</em>, <em>rfl=None</em>, <em>out='img_hyp'</em>, <em>refspd=None</em>, <em>D=None</em>, <em>cieobs='1931_2'</em>, <em>cspace='xyz'</em>, <em>cspace_tf={}</em>, <em>CSF=None</em>, <em>interp_type='nd'</em>, <em>k_neighbours=4</em>, <em>show=True</em>, <em>verbosity=0</em>, <em>show_ref_img=True</em>, <em>stack_test_ref=12</em>, <em>write_to_file=None</em>, <em>csf_based_rgb_rounding=6</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/hypspcim/hyperspectral_img_simulator.html#render_image"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.hypspcim.render_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Render image under specified light source spd.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">img:</th><td class="field-body"><div class="first last line-block">
<div class="line">None or str or ndarray with float (max = 1) rgb image.</div>
<div class="line">None load a default image.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">spd:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray, optional</div>
<div class="line">Light source spectrum for rendering</div>
<div class="line">If None: use CIE illuminant F4</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">rfl:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray, optional</div>
<div class="line">Reflectance set for color coordinate to rfl mapping.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">out:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘img_hyp’ or str, optional</div>
<div class="line-block">
<div class="line">(other option: ‘img_ren’: rendered image under :spd:)</div>
</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">refspd:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Reference spectrum for color coordinate to rfl mapping.</div>
<div class="line">None defaults to D65 (srgb has a D65 white point)</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">D:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Degree of (von Kries) adaptation from spd to refspd. </div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">cieobs:</th><td class="field-body"><div class="first last line-block">
<div class="line">_CIEOBS, optional</div>
<div class="line">CMF set for calculation of xyz from spectral data.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">cspace:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘xyz’,  optional</div>
<div class="line">Color space for color coordinate to rfl mapping.</div>
<div class="line">Tip: Use linear space (e.g. ‘xyz’, ‘Yuv’,…) for (interp_type == ‘nd’),</div>
<div class="line-block">
<div class="line">and perceptually uniform space (e.g. ‘ipt’) for (interp_type == ‘nearest’)</div>
</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">cspace_tf:</th><td class="field-body"><div class="first last line-block">
<div class="line">{}, optional</div>
<div class="line">Dict with parameters for xyz_to_cspace and cspace_to_xyz transform.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">CSF:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">RGB camera response functions.</div>
<div class="line">If None: input :xyz: contains raw rgb values. Override :cspace:</div>
<div class="line">argument and perform estimation directly in raw rgb space!!!</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">interp_type:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘nd’, optional</div>
<div class="line">Options:</div>
<div class="line">- ‘nd’: perform n-dimensional linear interpolation using Delaunay triangulation.</div>
<div class="line">- ‘nearest’: perform nearest neighbour interpolation. </div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">k_neighbours:</th><td class="field-body"><div class="first last line-block">
<div class="line">4 or int, optional</div>
<div class="line">Number of nearest neighbours for reflectance spectrum interpolation.</div>
<div class="line">Neighbours are found using scipy.spatial.cKDTree</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">show:</th><td class="field-body"><div class="first last line-block">
<div class="line">True, optional</div>
<div class="line-block">
<div class="line">Show images.</div>
</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">verbosity:</th><td class="field-body"><div class="first last line-block">
<div class="line">0, optional</div>
<div class="line">If &gt; 0: make a plot of the color coordinates of original and 
rendered image pixels.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">show_ref_img:</th><td class="field-body"><div class="first last line-block">
<div class="line">True, optional</div>
<div class="line">True: shows rendered image under reference spd. False: shows</div>
<div class="line-block">
<div class="line">original image.</div>
</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">write_to_file:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">None: do nothing, else: write to filename(+path) in :write_to_file:</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">stack_test_ref:</th><td class="field-body"><div class="first last line-block">
<div class="line">12, optional</div>
<div class="line-block">
<div class="line">- 12: left (test), right (ref) format for show and imwrite</div>
<div class="line">- 21: top (test), bottom (ref)</div>
<div class="line">- 1: only show/write test</div>
<div class="line">- 2: only show/write ref</div>
<div class="line">- 0: show both, write test</div>
</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">csf_based_rgb_rounding:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">_ROUNDING, optional</div>
<div class="line">Int representing the number of decimals to round the RGB values (obtained from not-None CSF input) to before applying the search algorithm.</div>
<div class="line">Smaller values increase the search speed, but could cause fatal error that causes python kernel to die. If this happens increase the rounding int value.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first last line-block">
<div class="line">img_hyp, img_ren, </div>
<div class="line">ndarrays with float hyperspectral image and rendered images </div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.hypspcim.xyz_to_rfl">
<code class="descclassname">luxpy.toolboxes.hypspcim.</code><code class="descname">xyz_to_rfl</code><span class="sig-paren">(</span><em>xyz</em>, <em>CSF=None</em>, <em>rfl=None</em>, <em>out='rfl_est'</em>, <em>refspd=None</em>, <em>D=None</em>, <em>cieobs='1931_2'</em>, <em>cspace='xyz'</em>, <em>cspace_tf={}</em>, <em>interp_type='nd'</em>, <em>k_neighbours=4</em>, <em>verbosity=0</em>, <em>csf_based_rgb_rounding=6</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/hypspcim/hyperspectral_img_simulator.html#xyz_to_rfl"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.hypspcim.xyz_to_rfl" title="Permalink to this definition">¶</a></dt>
<dd><p>Approximate spectral reflectance of xyz values based on nd-dimensional linear interpolation 
or k nearest neighbour interpolation of samples from a standard reflectance set.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">xyz:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with xyz values of target points.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">CSF:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">RGB camera response functions.</div>
<div class="line">If None: input :xyz: contains raw rgb (float) values. Override :cspace:</div>
<div class="line">argument and perform estimation directly in raw rgb space!!!</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">rfl:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray, optional</div>
<div class="line">Reflectance set for color coordinate to rfl mapping.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">out:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘rfl_est’ or str, optional</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">refspd:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Refer ence spectrum for color coordinate to rfl mapping.</div>
<div class="line">None defaults to D65.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">cieobs:</th><td class="field-body"><div class="first last line-block">
<div class="line">_CIEOBS, optional</div>
<div class="line">CMF set used for calculation of xyz from spectral data.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">cspace:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘xyz’,  optional</div>
<div class="line">Color space for color coordinate to rfl mapping.</div>
<div class="line">Tip: Use linear space (e.g. ‘xyz’, ‘Yuv’,…) for (interp_type == ‘nd’),</div>
<div class="line-block">
<div class="line">and perceptually uniform space (e.g. ‘ipt’) for (interp_type == ‘nearest’)</div>
</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">cspace_tf:</th><td class="field-body"><div class="first last line-block">
<div class="line">{}, optional</div>
<div class="line">Dict with parameters for xyz_to_cspace and cspace_to_xyz transform.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">interp_type:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘nd’, optional</div>
<div class="line">Options:</div>
<div class="line">- ‘nd’: perform n-dimensional linear interpolation using Delaunay triangulation.</div>
<div class="line">- ‘nearest’: perform nearest neighbour interpolation. </div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">k_neighbours:</th><td class="field-body"><div class="first last line-block">
<div class="line">4 or int, optional</div>
<div class="line">Number of nearest neighbours for reflectance spectrum interpolation.</div>
<div class="line">Neighbours are found using scipy.spatial.cKDTree</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">verbosity:</th><td class="field-body"><div class="first last line-block">
<div class="line">0, optional</div>
<div class="line">If &gt; 0: make a plot of the color coordinates of original and </div>
<div class="line">rendered image pixels.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">csf_based_rgb_rounding:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">_ROUNDING, optional</div>
<div class="line">Int representing the number of decimals to round the RGB values (obtained from not-None CSF input) to before applying the search algorithm.</div>
<div class="line">Smaller values increase the search speed, but could cause fatal error that causes python kernel to die. If this happens increase the rounding int value.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first last line-block">
<div class="line">:rfl_est:</div>
<div class="line">ndarrays with estimated reflectance spectra.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.hypspcim.get_superresolution_hsi">
<code class="descclassname">luxpy.toolboxes.hypspcim.</code><code class="descname">get_superresolution_hsi</code><span class="sig-paren">(</span><em>lrhsi, hrci, CSF, wl=[380, 780, 1], csf_based_rgb_rounding=6, interp_type='nd', k_neighbours=4, verbosity=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/hypspcim/hyperspectral_img_simulator.html#get_superresolution_hsi"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.hypspcim.get_superresolution_hsi" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a HighResolution HyperSpectral Image (super-resolution HSI) based on a LowResolution HSI and a HighResolution Color Image.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">lrhsi:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with float (max = 1) LowResolution HSI [m,m,L].</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">hrci:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with float (max = 1) HighResolution HSI [M,N,3].</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">CSF:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">ndarray with camera sensitivity functions </div>
<div class="line">If None: use Nikon D700</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">wl:</th><td class="field-body"><div class="first last line-block">
<div class="line">[380,780,1], optional</div>
<div class="line">Wavelength range and spacing or ndarray with wavelengths of HSI image.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">interp_type:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘nd’, optional</div>
<div class="line">Options:</div>
<div class="line">- ‘nd’: perform n-dimensional linear interpolation using Delaunay triangulation.</div>
<div class="line">- ‘nearest’: perform nearest neighbour interpolation. </div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">k_neighbours:</th><td class="field-body"><div class="first last line-block">
<div class="line">4 or int, optional</div>
<div class="line">Number of nearest neighbours for reflectance spectrum interpolation.</div>
<div class="line">Neighbours are found using scipy.spatial.cKDTree</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">verbosity:</th><td class="field-body"><div class="first last line-block">
<div class="line">0, optional</div>
<div class="line">Verbosity level for sub-call to render_image().</div>
<div class="line">If &gt; 0: make a plot of the color coordinates of original and </div>
<div class="line">rendered image pixels.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">csf_based_rgb_rounding:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">_ROUNDING, optional</div>
<div class="line">Int representing the number of decimals to round the RGB values (obtained from not-None CSF input) to before applying the search algorithm.</div>
<div class="line">Smaller values increase the search speed, but could cause fatal error that causes python kernel to die. If this happens increase the rounding int value.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">hrhsi:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with HighResolution HSI [M,N,L].</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Procedure:</dt>
<dd><div class="first last line-block">
<div class="line">Call render_image(hrci, rfl = lrhsi_2, CSF = …) to estimate a hyperspectral image</div>
<div class="line">from the high-resolution color image hrci with the reflectance spectra </div>
<div class="line">in the low-resolution hyper-spectral image as database for the estimation.</div>
<div class="line">Estimation is done in raw RGB space with the lrhsi converted using the</div>
<div class="line">camera sensitivity functions in CSF.</div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.hypspcim.hsi_to_rgb">
<code class="descclassname">luxpy.toolboxes.hypspcim.</code><code class="descname">hsi_to_rgb</code><span class="sig-paren">(</span><em>hsi, spd=None, cieobs='1931_2', srgb=False, linear_rgb=False, CSF=None, normalize_to_white=True, wl=[380, 780, 1]</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/hypspcim/hyperspectral_img_simulator.html#hsi_to_rgb"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.hypspcim.hsi_to_rgb" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert HyperSpectral Image to rgb.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">hsi:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with hyperspectral image [M,N,L]</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">spd:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">ndarray with illumination spectrum</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">cieobs:</th><td class="field-body"><div class="first last line-block">
<div class="line">_CIEOBS, optional</div>
<div class="line">CMF set to convert spectral data to xyz tristimulus values.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">srgb:</th><td class="field-body"><div class="first last line-block">
<div class="line">False, optional</div>
<div class="line">If False: Use xyz_to_srgb(spd_to_xyz(…)) to convert to srgb values</div>
<div class="line">If True: use camera sensitivity functions.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">linear_rgb:</th><td class="field-body"><div class="first last line-block">
<div class="line">False, optional</div>
<div class="line">If False: use gamma = 2.4 in xyz_to_srgb, if False: use gamma = 1 and set :use_linear_part: to False.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">CSF:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">ndarray with camera sensitivity functions </div>
<div class="line">If None: use Nikon D700</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">normalize_to_white:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">True, optional</div>
<div class="line">If True &amp; CSF is not None: white-balance output rgb to a perfect white diffuser.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">wl:</th><td class="field-body"><div class="first last line-block">
<div class="line">[380,780,1], optional</div>
<div class="line">Wavelength range and spacing or ndarray with wavelengths of HSI image.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">rgb:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with rgb image [M,N,3]</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.hypspcim.rfl_to_rgb">
<code class="descclassname">luxpy.toolboxes.hypspcim.</code><code class="descname">rfl_to_rgb</code><span class="sig-paren">(</span><em>rfl</em>, <em>spd=None</em>, <em>CSF=None</em>, <em>wl=None</em>, <em>normalize_to_white=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/hypspcim/hyperspectral_img_simulator.html#rfl_to_rgb"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.hypspcim.rfl_to_rgb" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert spectral reflectance functions (illuminated by spd) to Camera Sensitivity Functions.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">rfl:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with spectral reflectance functions (1st row is wavelengths if wl is None).</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">spd:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">ndarray with illumination spectrum</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">CSF:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">ndarray with camera sensitivity functions </div>
<div class="line">If None: use Nikon D700</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">normalize_to_white:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">True, optional</div>
<div class="line">If True: white-balance output rgb to a perfect white diffuser.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">rgb:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with rgb values for each spectral reflectance functions</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="dispcal">
<h2>dispcal/<a class="headerlink" href="#dispcal" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">py:</th><td class="field-body"><ul class="first simple">
<li>__init__.py</li>
<li>displaycalibration.py</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">namespace:</th><td class="field-body"><p class="first last">luxpy.dispcal</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<span class="target" id="module-luxpy.toolboxes.dispcal"></span><div class="section" id="module-for-display-characterization">
<h3>Module for display characterization<a class="headerlink" href="#module-for-display-characterization" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">_PATH_DATA:</th><td class="field-body">path to package data folder</td>
</tr>
<tr class="field-even field"><th class="field-name">_RGB:</th><td class="field-body">set of RGB values that work quite well for display characterization</td>
</tr>
<tr class="field-odd field"><th class="field-name">_XYZ:</th><td class="field-body">example set of measured XYZ values corresponding to the RGB values in _RGB</td>
</tr>
<tr class="field-even field"><th class="field-name">calibrate():</th><td class="field-body">Calculate TR parameters/lut and conversion matrices</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">calibration_performance():</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">Check calibration performance (cfr. individual and average color differences for each stimulus).</td>
</tr>
<tr class="field-even field"><th class="field-name">rgb_to_xyz():</th><td class="field-body">Convert input rgb to xyz</td>
</tr>
<tr class="field-odd field"><th class="field-name">xyz_to_rgb():</th><td class="field-body">Convert input xyz to rgb</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">DisplayCalibration():</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">Calculate TR parameters/lut and conversion matrices and store in object.</td>
</tr>
</tbody>
</table>
</div></blockquote>
<dl class="function">
<dt id="luxpy.toolboxes.dispcal.calibrate">
<code class="descclassname">luxpy.toolboxes.dispcal.</code><code class="descname">calibrate</code><span class="sig-paren">(</span><em>rgbcal</em>, <em>xyzcal</em>, <em>L_type='lms'</em>, <em>tr_type='lut'</em>, <em>cieobs='1931_2'</em>, <em>nbit=8</em>, <em>cspace='lab'</em>, <em>avg=&lt;function &lt;lambda&gt;&gt;</em>, <em>ensure_increasing_lut_at_low_rgb=0.2</em>, <em>verbosity=1</em>, <em>sep='</em>, <em>'</em>, <em>header=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/dispcal/displaycalibration.html#calibrate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.dispcal.calibrate" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate TR parameters/lut and conversion matrices.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">rgbcal:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray [Nx3] or string with filename of RGB values </div>
<div class="line">rgcal must contain at least the following type of settings:</div>
<div class="line">- pure R,G,B: e.g. for pure R: (R != 0) &amp; (G==0) &amp; (B == 0)</div>
<div class="line">- white(s): R = G = B = 2**nbit-1</div>
<div class="line">- gray(s): R = G = B</div>
<div class="line">- black(s): R = G = B = 0</div>
<div class="line">- binary colors: cyan (G = B, R = 0), yellow (G = R, B = 0), magenta (R = B, G = 0)</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">xyzcal:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray [Nx3] or string with filename of measured XYZ values for </div>
<div class="line">the RGB settings in rgbcal.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">L_type:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘lms’, optional</div>
<div class="line">Type of response to use in the derivation of the Tone-Response curves.</div>
<div class="line">options:</div>
<div class="line-block">
<div class="line">- ‘lms’: use cone fundamental responses: L vs R, M vs G and S vs B </div>
<div class="line-block">
<div class="line">(reduces noise and generally leads to more accurate characterization) </div>
</div>
<div class="line">- ‘Y’: use the luminance signal: Y vs R, Y vs G, Y vs B</div>
</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">tr_type:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘lut’, optional</div>
<div class="line">options:</div>
<div class="line-block">
<div class="line">- ‘lut’: Derive/specify Tone-Response as a look-up-table</div>
<div class="line">- ‘gog’: Derive/specify Tone-Response as a gain-offset-gamma function</div>
</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">cieobs:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘1931_2’, optional</div>
<div class="line">CIE CMF set used to determine the XYZ tristimulus values</div>
<div class="line">(needed when L_type == ‘lms’: determines the conversion matrix to</div>
<div class="line">convert xyz to lms values)</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">nbit:</th><td class="field-body"><div class="first last line-block">
<div class="line">8, optional</div>
<div class="line">RGB values in nbit format (e.g. 8, 16, …)</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">cspace:</th><td class="field-body"><div class="first last line-block">
<div class="line">color space or chromaticity diagram to calculate color differences in</div>
<div class="line">when optimizing the xyz_to_rgb and rgb_to_xyz conversion matrices.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">avg:</th><td class="field-body"><div class="first last line-block">
<div class="line">lambda x: ((x**2).mean()**0.5), optional</div>
<div class="line">Function used to average the color differences of the individual RGB settings</div>
<div class="line">in the optimization of the xyz_to_rgb and rgb_to_xyz conversion matrices.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">ensure_increasing_lut_at_low_rgb:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">0.2 or float (max = 1.0) or None, optional</div>
<div class="line">Ensure an increasing lut by setting all values below the RGB with the maximum</div>
<div class="line">zero-crossing of np.diff(lut) and RGB/RGB.max() values of :ensure_increasing_lut_at_low_rgb:</div>
<div class="line">(values of 0.2 are a good rule of thumb value)</div>
<div class="line">Non-strictly increasing lut values can be caused at low RGB values due</div>
<div class="line">to noise and low measurement signal. </div>
<div class="line">If None: don’t force lut, but keep as is.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">verbosity:</th><td class="field-body"><div class="first last line-block">
<div class="line">1, optional</div>
<div class="line">&gt; 0: print and plot optimization results</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">sep:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘,’, optional</div>
<div class="line">separator in files with rgbcal and xyzcal data</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">header:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">header specifier for files with rgbcal and xyzcal data </div>
<div class="line">(see pandas.read_csv)</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">M:</th><td class="field-body"><div class="first last line-block">
<div class="line">linear rgb to xyz conversion matrix</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">N:</th><td class="field-body"><div class="first last line-block">
<div class="line">xyz to linear rgb conversion matrix</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">tr:</th><td class="field-body"><div class="first last line-block">
<div class="line">Tone Response function parameters or lut</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">xyz_black:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with XYZ tristimulus values of black</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">xyz_white:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with tristimlus values of white</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.dispcal.calibration_performance">
<code class="descclassname">luxpy.toolboxes.dispcal.</code><code class="descname">calibration_performance</code><span class="sig-paren">(</span><em>rgb</em>, <em>xyztarget</em>, <em>M</em>, <em>N</em>, <em>tr</em>, <em>xyz_black</em>, <em>xyz_white</em>, <em>tr_type='lut'</em>, <em>cspace='lab'</em>, <em>avg=&lt;function &lt;lambda&gt;&gt;</em>, <em>rgb_is_xyz=False</em>, <em>is_verification_data=False</em>, <em>nbit=8</em>, <em>verbosity=1</em>, <em>sep='</em>, <em>'</em>, <em>header=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/dispcal/displaycalibration.html#calibration_performance"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.dispcal.calibration_performance" title="Permalink to this definition">¶</a></dt>
<dd><p>Check calibration performance. Calculate DE for each stimulus.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">rgb:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray [Nx3] or string with filename of RGB values </div>
<div class="line">(or xyz values if argument rgb_to_xyz == True!)</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">xyztarget:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray [Nx3] or string with filename of target XYZ values corresponding </div>
<div class="line">to the RGB settings (or the measured XYZ values, if argument rgb_to_xyz == True).</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">M:</th><td class="field-body"><div class="first last line-block">
<div class="line">linear rgb to xyz conversion matrix</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">N:</th><td class="field-body"><div class="first last line-block">
<div class="line">xyz to linear rgb conversion matrix</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">tr:</th><td class="field-body"><div class="first last line-block">
<div class="line">Tone Response function parameters or lut</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">xyz_black:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with XYZ tristimulus values of black</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">xyz_white:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with tristimlus values of white</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">tr_type:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘lut’, optional</div>
<div class="line">options:</div>
<div class="line-block">
<div class="line">- ‘lut’: Derive/specify Tone-Response as a look-up-table</div>
<div class="line">- ‘gog’: Derive/specify Tone-Response as a gain-offset-gamma function</div>
</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">cspace:</th><td class="field-body"><div class="first last line-block">
<div class="line">color space or chromaticity diagram to calculate color differences in.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">avg:</th><td class="field-body"><div class="first last line-block">
<div class="line">lambda x: ((x**2).mean()**0.5), optional</div>
<div class="line">Function used to average the color differences of the individual RGB settings</div>
<div class="line">in the optimization of the xyz_to_rgb and rgb_to_xyz conversion matrices.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">rgb_is_xyz:</th><td class="field-body"><div class="first last line-block">
<div class="line">False, optional</div>
<div class="line">If True: the data in argument rgb are actually measured XYZ tristimulus values</div>
<div class="line-block">
<div class="line">and are directly compared to the target xyz.</div>
</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">is_verification_data:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">False, optional</div>
<div class="line">If False: the data is assumed to be corresponding to RGB value settings used </div>
<div class="line-block">
<div class="line">in the calibration (i.e. containing whites, blacks, grays, pure and binary mixtures)</div>
</div>
<div class="line">If True: no assumptions on content of rgb, so use this settings when</div>
<div class="line-block">
<div class="line">checking the performance for a set of measured and target xyz data</div>
<div class="line">different than the ones used in the actual calibration measurements. </div>
</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">nbit:</th><td class="field-body"><div class="first last line-block">
<div class="line">8, optional</div>
<div class="line">RGB values in nbit format (e.g. 8, 16, …)</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">verbosity:</th><td class="field-body"><div class="first last line-block">
<div class="line">1, optional</div>
<div class="line">&gt; 0: print and plot optimization results</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">sep:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘,’, optional</div>
<div class="line">separator in files with rgbcal and xyzcal data</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">header:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">header specifier for files with rgbcal and xyzcal data </div>
<div class="line">(see pandas.read_csv)</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">M:</th><td class="field-body"><div class="first last line-block">
<div class="line">linear rgb to xyz conversion matrix</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">N:</th><td class="field-body"><div class="first last line-block">
<div class="line">xyz to linear rgb conversion matrix</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">tr:</th><td class="field-body"><div class="first last line-block">
<div class="line">Tone Response function parameters or lut</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">xyz_black:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with XYZ tristimulus values of black</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">xyz_white:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with tristimlus values of white</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.dispcal.rgb_to_xyz">
<code class="descclassname">luxpy.toolboxes.dispcal.</code><code class="descname">rgb_to_xyz</code><span class="sig-paren">(</span><em>rgb</em>, <em>M</em>, <em>tr</em>, <em>xyz_black</em>, <em>tr_type='lut'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/dispcal/displaycalibration.html#rgb_to_xyz"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.dispcal.rgb_to_xyz" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert input rgb to xyz.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">rgb:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray [Nx3] with RGB values </div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">M:</th><td class="field-body"><div class="first last line-block">
<div class="line">linear rgb to xyz conversion matrix</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">tr:</th><td class="field-body"><div class="first last line-block">
<div class="line">Tone Response function parameters or lut</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">xyz_black:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with XYZ tristimulus values of black</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">tr_type:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘lut’, optional</div>
<div class="line">Type of Tone Response in tr input argument</div>
<div class="line">options:</div>
<div class="line-block">
<div class="line">- ‘lut’: Tone-Response as a look-up-table</div>
<div class="line">- ‘gog’: Tone-Response as a gain-offset-gamma function</div>
</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">xyz:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray [Nx3] of XYZ tristimulus values</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.dispcal.xyz_to_rgb">
<code class="descclassname">luxpy.toolboxes.dispcal.</code><code class="descname">xyz_to_rgb</code><span class="sig-paren">(</span><em>xyz</em>, <em>N</em>, <em>tr</em>, <em>xyz_black</em>, <em>tr_type='lut'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/dispcal/displaycalibration.html#xyz_to_rgb"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.dispcal.xyz_to_rgb" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert xyz to input rgb.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">xyz:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray [Nx3] with XYZ tristimulus values </div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">N:</th><td class="field-body"><div class="first last line-block">
<div class="line">xyz to linear rgb conversion matrix</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">tr:</th><td class="field-body"><div class="first last line-block">
<div class="line">Tone Response function parameters or lut</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">xyz_black:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with XYZ tristimulus values of black</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">tr_type:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘lut’, optional</div>
<div class="line">Type of Tone Response in tr input argument</div>
<div class="line">options:</div>
<div class="line-block">
<div class="line">- ‘lut’: Tone-Response as a look-up-table</div>
<div class="line">- ‘gog’: Tone-Response as a gain-offset-gamma function</div>
</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">rgb:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray [Nx3] of display RGB values</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="luxpy.toolboxes.dispcal.DisplayCalibration">
<em class="property">class </em><code class="descclassname">luxpy.toolboxes.dispcal.</code><code class="descname">DisplayCalibration</code><span class="sig-paren">(</span><em>rgbcal</em>, <em>xyzcal=None</em>, <em>L_type='lms'</em>, <em>cieobs='1931_2'</em>, <em>tr_type='lut'</em>, <em>nbit=8</em>, <em>cspace='lab'</em>, <em>avg=&lt;function DisplayCalibration.&lt;lambda&gt;&gt;</em>, <em>ensure_increasing_lut_at_low_rgb=0.2</em>, <em>verbosity=1</em>, <em>sep='</em>, <em>'</em>, <em>header=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/dispcal/displaycalibration.html#DisplayCalibration"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.dispcal.DisplayCalibration" title="Permalink to this definition">¶</a></dt>
<dd><p>Class for display_calibration.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">rgbcal:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray [Nx3] or string with filename of RGB values </div>
<div class="line">rgcal must contain at least the following type of settings:</div>
<div class="line">- pure R,G,B: e.g. for pure R: (R != 0) &amp; (G==0) &amp; (B == 0)</div>
<div class="line">- white(s): R = G = B = 2**nbit-1</div>
<div class="line">- gray(s): R = G = B</div>
<div class="line">- black(s): R = G = B = 0</div>
<div class="line">- binary colors: cyan (G = B, R = 0), yellow (G = R, B = 0), magenta (R = B, G = 0)</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">xyzcal:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">ndarray [Nx3] or string with filename of measured XYZ values for </div>
<div class="line">the RGB settings in rgbcal.</div>
<div class="line">if None: rgbcal is [Nx6] ndarray containing rgb (columns 0-2) and xyz data (columns 3-5)</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">L_type:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘lms’, optional</div>
<div class="line">Type of response to use in the derivation of the Tone-Response curves.</div>
<div class="line">options:</div>
<div class="line-block">
<div class="line">- ‘lms’: use cone fundamental responses: L vs R, M vs G and S vs B </div>
<div class="line-block">
<div class="line">(reduces noise and generally leads to more accurate characterization) </div>
</div>
<div class="line">- ‘Y’: use the luminance signal: Y vs R, Y vs G, Y vs B</div>
</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">tr_type:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘lut’, optional</div>
<div class="line">options:</div>
<div class="line-block">
<div class="line">- ‘lut’: Derive/specify Tone-Response as a look-up-table</div>
<div class="line">- ‘gog’: Derive/specify Tone-Response as a gain-offset-gamma function</div>
</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">cieobs:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘1931_2’, optional</div>
<div class="line">CIE CMF set used to determine the XYZ tristimulus values</div>
<div class="line">(needed when L_type == ‘lms’: determines the conversion matrix to</div>
<div class="line">convert xyz to lms values)</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">nbit:</th><td class="field-body"><div class="first last line-block">
<div class="line">8, optional</div>
<div class="line">RGB values in nbit format (e.g. 8, 16, …)</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">cspace:</th><td class="field-body"><div class="first last line-block">
<div class="line">color space or chromaticity diagram to calculate color differences in</div>
<div class="line">when optimizing the xyz_to_rgb and rgb_to_xyz conversion matrices.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">avg:</th><td class="field-body"><div class="first last line-block">
<div class="line">lambda x: ((x**2).mean()**0.5), optional</div>
<div class="line">Function used to average the color differences of the individual RGB settings</div>
<div class="line">in the optimization of the xyz_to_rgb and rgb_to_xyz conversion matrices.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">verbosity:</th><td class="field-body"><div class="first last line-block">
<div class="line">1, optional</div>
<div class="line">&gt; 0: print and plot optimization results</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">sep:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘,’, optional</div>
<div class="line">separator in files with rgbcal and xyzcal data</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">header:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">header specifier for files with rgbcal and xyzcal data </div>
<div class="line">(see pandas.read_csv)</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Return:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">calobject:</th><td class="field-body"><div class="first last line-block">
<div class="line">attributes are: </div>
<div class="line-block">
<div class="line">- M: linear rgb to xyz conversion matrix</div>
<div class="line">- N: xyz to linear rgb conversion matrix</div>
<div class="line">- TR: Tone Response function parameters or lut</div>
<div class="line">- xyz_black: ndarray with XYZ tristimulus values of black</div>
<div class="line">- xyz_white: ndarray with tristimlus values of white</div>
</div>
<div class="line">as well as: </div>
<div class="line-block">
<div class="line">- rgbcal, xyzcal, cieobs, avg, tr_type, nbit, cspace, verbosity</div>
<div class="line">- performance: dictionary with various color differences set to np.nan</div>
<div class="line">-    (run calobject.performance() to fill it with actual values)</div>
</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
<dl class="method">
<dt id="luxpy.toolboxes.dispcal.DisplayCalibration.check_performance">
<code class="descname">check_performance</code><span class="sig-paren">(</span><em>rgb=None</em>, <em>xyz=None</em>, <em>verbosity=None</em>, <em>sep='</em>, <em>'</em>, <em>header=None</em>, <em>rgb_is_xyz=False</em>, <em>is_verification_data=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/dispcal/displaycalibration.html#DisplayCalibration.check_performance"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.dispcal.DisplayCalibration.check_performance" title="Permalink to this definition">¶</a></dt>
<dd><p>Check calibration performance (if rgbcal is None: use calibration data).</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">rgb:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">ndarray [Nx3] or string with filename of RGB values </div>
<div class="line">(or xyz values if argument rgb_to_xyz == True!)</div>
<div class="line">If None: use self.rgbcal</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">xyz:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">ndarray [Nx3] or string with filename of target XYZ values corresponding </div>
<div class="line">to the RGB settings (or the measured XYZ values, if argument rgb_to_xyz == True).</div>
<div class="line">If None: use self.xyzcal</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">verbosity:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">if None: use self.verbosity</div>
<div class="line">if &gt; 0: print and plot optimization results</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">sep:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘,’, optional</div>
<div class="line">separator in files with rgb and xyz data</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">header:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">header specifier for files with rgb and xyz data </div>
<div class="line">(see pandas.read_csv)</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">rgb_is_xyz:</th><td class="field-body"><div class="first last line-block">
<div class="line">False, optional</div>
<div class="line">If True: the data in argument rgb are actually measured XYZ tristimulus values</div>
<div class="line-block">
<div class="line">and are directly compared to the target xyz.</div>
</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">is_verification_data:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">False, optional</div>
<div class="line">If False: the data is assumed to be corresponding to RGB value settings used </div>
<div class="line-block">
<div class="line">in the calibration (i.e. containing whites, blacks, grays, pure and binary mixtures)</div>
<div class="line">Performance results are stored in self.performance.</div>
</div>
<div class="line">If True: no assumptions on content of rgb, so use this settings when</div>
<div class="line-block">
<div class="line">checking the performance for a set of measured and target xyz data</div>
<div class="line">different than the ones used in the actual calibration measurements. </div>
</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Return:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">performance:</th><td class="field-body"><div class="first last line-block">
<div class="line">dictionary with various color differences.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="luxpy.toolboxes.dispcal.DisplayCalibration.to_xyz">
<code class="descname">to_xyz</code><span class="sig-paren">(</span><em>rgb</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/dispcal/displaycalibration.html#DisplayCalibration.to_xyz"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.dispcal.DisplayCalibration.to_xyz" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert display rgb to xyz.</p>
</dd></dl>

<dl class="method">
<dt id="luxpy.toolboxes.dispcal.DisplayCalibration.to_rgb">
<code class="descname">to_rgb</code><span class="sig-paren">(</span><em>xyz</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/dispcal/displaycalibration.html#DisplayCalibration.to_rgb"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.dispcal.DisplayCalibration.to_rgb" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert xyz to display rgb.</p>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="rgb2spec">
<h2>rgb2spec/<a class="headerlink" href="#rgb2spec" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">py:</th><td class="field-body"><ul class="first simple">
<li>__init__.py</li>
<li>smits_mitsuba.py</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">namespace:</th><td class="field-body"><p class="first last">luxpy.rgb2spec</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<span class="target" id="module-luxpy.toolboxes.rgb2spec"></span><p>Module for RGB to spectrum conversions</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">_BASESPEC_SMITS:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">Default dict with base spectra for white, cyan, magenta, yellow, blue, green and red for each intent (‘rfl’ or ‘spd’)</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">rgb_to_spec_smits():</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">Convert an array of (linearized) RGB values to a spectrum using a smits like conversion as implemented in mitsuba (July 10, 2019)</td>
</tr>
<tr class="field-odd field"><th class="field-name">convert():</th><td class="field-body">Convert an array of (linearized) RGB values to a spectrum (wrapper around rgb_to_spec_smits(), future: implement other methods)</td>
</tr>
</tbody>
</table>
</div></blockquote>
<dl class="function">
<dt id="luxpy.toolboxes.rgb2spec.convert">
<code class="descclassname">luxpy.toolboxes.rgb2spec.</code><code class="descname">convert</code><span class="sig-paren">(</span><em>rgb, linearized_rgb=True, method='smits_mtsb', intent='rfl', bitdepth=8, wlr=[360.0, 830.0, 1.0], rgb2spec=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/rgb2spec.html#convert"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.rgb2spec.convert" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert an array of RGB values to a spectrum.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">rgb:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray of list of rgb values</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">linearized_rgb:</th><td class="field-body"><div class="first last line-block">
<div class="line">True, optional</div>
<div class="line">If False: RGB values will be linearized using:</div>
<div class="line-block">
<div class="line">rgb_lin = xyz_to_srgb(srgb_to_xyz(rgb), gamma = 1, use_linear_part = False)</div>
</div>
<div class="line">If True: user has entered pre-linearized RGB values.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">method:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘smits_mtsb’, optional</div>
<div class="line">Method to use for conversion:</div>
<div class="line-block">
<div class="line">- ‘smits_mtsb’: use a smits like conversion as implemented in mitsuba.</div>
</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">intent:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘rfl’ (or ‘spd’), optional</div>
<div class="line">type of requested spectrum conversion .</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">bitdepth:</th><td class="field-body"><div class="first last line-block">
<div class="line">8, optional</div>
<div class="line">bit depth of rgb values</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">wlr:</th><td class="field-body"><div class="first last line-block">
<div class="line">_WL3, optional</div>
<div class="line">desired wavelength (nm) range of spectrum.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">rgb2spec:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Dict with base spectra for white, cyan, magenta, yellow, blue, green and red for each intent.</div>
<div class="line">If None: use _BASESPEC_SMITS.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">spec:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with spectrum or spectra (one for each rgb value, first row are the wavelengths)</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.rgb2spec.rgb_to_spec_smits">
<code class="descclassname">luxpy.toolboxes.rgb2spec.</code><code class="descname">rgb_to_spec_smits</code><span class="sig-paren">(</span><em>rgb, intent='rfl', linearized_rgb=True, bitdepth=8, wlr=[360.0, 830.0, 1.0], rgb2spec=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/rgb2spec/smits_mitsuba.html#rgb_to_spec_smits"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.rgb2spec.rgb_to_spec_smits" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert an array of (linearized) RGB values to a spectrum using a Smits like conversion as implemented in Mitsuba.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">rgb:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray of list of (linearized) rgb values</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">linearized_rgb:</th><td class="field-body"><div class="first last line-block">
<div class="line">True, optional</div>
<div class="line">If False: RGB values will be linearized using:</div>
<div class="line-block">
<div class="line">rgb_lin = xyz_to_srgb(srgb_to_xyz(rgb), gamma = 1, use_linear_part = False)</div>
</div>
<div class="line">If True: user has entered pre-linearized RGB values. </div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">intent:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘rfl’ (or ‘spd’), optional</div>
<div class="line">type of requested spectrum conversion.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">bitdepth:</th><td class="field-body"><div class="first last line-block">
<div class="line">8, optional</div>
<div class="line">bit depth of rgb values</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">wlr:</th><td class="field-body"><div class="first last line-block">
<div class="line">_WL3, optional</div>
<div class="line">desired wavelength (nm) range of spectrum.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">rgb2spec:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Dict with base spectra for white, cyan, magenta, yellow, blue, green and red for each intent.</div>
<div class="line">If None: use _BASESPEC_SMITS.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">spec:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with spectrum or spectra (one for each rgb value, first row are the wavelengths)</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="iolidfiles">
<h2>iolidfiles/<a class="headerlink" href="#iolidfiles" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">py:</th><td class="field-body"><ul class="first simple">
<li>__init__.py</li>
<li>io_lid_files.py</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">namespace:</th><td class="field-body"><p class="first last">luxpy.iolidfiles</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<span class="target" id="module-luxpy.toolboxes.iolidfiles"></span><div class="section" id="module-for-reading-and-writing-ies-and-ldt-files">
<h3>Module for reading and writing IES and LDT files.<a class="headerlink" href="#module-for-reading-and-writing-ies-and-ldt-files" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">read_lamp_data:</th><td class="field-body"><p class="first">Read in light intensity distribution and other lamp data from LDT or IES files.</p>
<dl class="last docutils">
<dt>Notes:</dt>
<dd><p class="first last">1.Only basic support. Writing is not yet implemented.
2.Reading IES files is based on Blender’s ies2cycles.py
3.This was implemented to build some uv-texture maps for rendering and only tested for a few files.
4. Use at own risk. No warranties.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<dl class="function">
<dt id="luxpy.toolboxes.iolidfiles.read_lamp_data">
<code class="descclassname">luxpy.toolboxes.iolidfiles.</code><code class="descname">read_lamp_data</code><span class="sig-paren">(</span><em>datasource</em>, <em>multiplier=1.0</em>, <em>verbosity=0</em>, <em>normalize='I0'</em>, <em>only_common_keys=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/iolidfiles/io_lid_files.html#read_lamp_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.iolidfiles.read_lamp_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Read in light intensity distribution and other lamp data from LDT or IES files.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">datasource:</th><td class="field-body"><div class="first last line-block">
<div class="line">Filename of LID file or StringIO object or string with LID data.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">multiplier:</th><td class="field-body"><div class="first last line-block">
<div class="line">1.0, optional</div>
<div class="line">Scaler for candela values.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">verbosity:</th><td class="field-body"><div class="first last line-block">
<div class="line">0, optional</div>
<div class="line">Display messages while reading file.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">normalize:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘I0’, optional</div>
<div class="line">If ‘I0’: normalize LID to intensity at (theta,phi) = (0,0)</div>
<div class="line">If ‘max’: normalize to max = 1.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">only_common_keys:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">False, optional</div>
<div class="line">If True, output only common dict keys related to angles, values</div>
<div class="line">and such of LID.</div>
<div class="line">read_lid_lamp_data(?) for print of common keys and return</div>
<div class="line-block">
<div class="line">empty dict with common keys.</div>
</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">lid:</th><td class="field-body">dict with IES or LDT file data.
|
| If LIDtype == ‘ies’:
|    dict_keys(
| [‘datasource’, ‘version’, ‘lamps_num’, ‘lumens_per_lamp’,
| ‘candela_mult’, ‘v_angles_num’, ‘h_angles_num’, ‘photometric_type’,
| ‘units_type’, ‘width’, ‘length’, ‘height’, ‘ballast_factor’, 
| ‘future_use’, ‘input_watts’, ‘v_angs’, ‘h_angs’, ‘lamp_cone_type’,
| ‘lamp_h_type’, ‘candela_values’, ‘candela_2d’, ‘v_same’, ‘h_same’,
| ‘intensity’, ‘theta’, ‘values’, ‘phi’, ‘map’,’Iv0’]
| )
|
| If LIDtype == ‘ldt’:
|    dict_keys(
| [‘datasource’, ‘version’, ‘manufacturer’, ‘Ityp’,’Isym’,
| ‘Mc’, ‘Dc’, ‘Ng’, ‘name’, Dg’, ‘cct/cri’, ‘tflux’, ‘lumens_per_lamp’,
| ‘candela_mult’, ‘tilt’, lamps_num’,
| ‘cangles’, ‘tangles’,’candela_values’, ‘candela_2d’,
| ‘intensity’, ‘theta’, ‘values’, ‘phi’, ‘map’, ‘Iv0’]
| )</td>
</tr>
</tbody>
</table>
</dd>
<dt>Notes:</dt>
<dd><ol class="first last arabic simple">
<li>if only_common_keys: output is dictionary with keys: [‘datasource’, ‘version’, ‘intensity’, ‘theta’, ‘phi’,         ‘values’, ‘map’, ‘Iv0’, ‘candela_values’, ‘candela_2d’]</li>
<li>‘theta’,’phi’, ‘values’ (=’candela_2d’) contain the original theta angles, phi angles and normalized candelas as specified in file.</li>
<li>‘map’ contains a dicionary with keys ‘thetas’, ‘phis’, ‘values’. This data has been complete to full angle ranges thetas: [0,180]; phis: [0,360]</li>
<li>LDT map completion only supported for Isymm == 4 (since 31/10/2018), and Isymm == 1 (since, 02/10/2021), Map will be filled with original ‘theta’, ‘phi’ and normalized ‘candela_2d’ values !</li>
<li>LIDtype is checked by looking for the presence of ‘TILT=’ in datasource content (if True-&gt;’IES’ else ‘LDT’)</li>
<li>IES files with TILT=INCLUDE or TILT=&lt;filename&gt; are not supported!</li>
</ol>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.iolidfiles.get_uv_texture">
<code class="descclassname">luxpy.toolboxes.iolidfiles.</code><code class="descname">get_uv_texture</code><span class="sig-paren">(</span><em>theta</em>, <em>phi=None</em>, <em>values=None</em>, <em>input_types=('array'</em>, <em>'array')</em>, <em>method='linear'</em>, <em>theta_min=0</em>, <em>angle_res=1</em>, <em>close_phi=False</em>, <em>deg=True</em>, <em>r=1</em>, <em>show=True</em>, <em>out='values_map'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/iolidfiles/io_lid_files.html#get_uv_texture"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.iolidfiles.get_uv_texture" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a uv-texture map.
| with specified angular resolution (°) and with positive z-axis as normal.
|   u corresponds to phi [0° - 360°]
|   v corresponds to theta [0° - 180°], (or [-90° - 90°])</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">theta:</th><td class="field-body"><div class="first last line-block">
<div class="line">Float, int or ndarray</div>
<div class="line">Angle with positive z-axis.</div>
<div class="line">Values corresponding to 0 and 180° must be specified!</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">phi:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Float, int or ndarray</div>
<div class="line">Angle around positive z-axis starting from x-axis.</div>
<div class="line">If not None: values corresponding to 0 and 360° must be specified!</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">values:</th><td class="field-body"><div class="first last line-block">
<div class="line">None</div>
<div class="line">ndarray or mesh of values at (theta, phi) locations. </div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">input_types:</th><td class="field-body"><div class="first last line-block">
<div class="line">(‘array’,’array’), optional</div>
<div class="line">Specification of type of input of (angles,values)</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">method:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘linear’, optional</div>
<div class="line">Interpolation method.</div>
<div class="line">(supported scipy.interpolate.griddata methods: </div>
<div class="line-block">
<div class="line">‘nearest’, ‘linear’, ‘cubic’)</div>
</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">theta_min:</th><td class="field-body"><div class="first last line-block">
<div class="line">0, optional</div>
<div class="line">If 0: [0, 180]; If -90: theta range = [-90,90]</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">close_phi:</th><td class="field-body"><div class="first last line-block">
<div class="line">False, optional</div>
<div class="line">Make phi angles array closed (full circle).</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">angle_res:</th><td class="field-body"><div class="first last line-block">
<div class="line">1, optional</div>
<div class="line">Resolution in degrees.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">deg:</th><td class="field-body"><div class="first last line-block">
<div class="line">True, optional</div>
<div class="line">Type of angle input (True: degrees, False: radians).</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">r:</th><td class="field-body"><div class="first last line-block">
<div class="line">1, optional</div>
<div class="line">Float, int or ndarray</div>
<div class="line">radius</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">show:</th><td class="field-body"><div class="first last line-block">
<div class="line">True, optional</div>
<div class="line">Plot results.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">out:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘values_map’, optional</div>
<div class="line">Specifies output: “return eval(out)”</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body">as specified by :out:.</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.iolidfiles.save_texture">
<code class="descclassname">luxpy.toolboxes.iolidfiles.</code><code class="descname">save_texture</code><span class="sig-paren">(</span><em>filename</em>, <em>tex</em>, <em>bits=16</em>, <em>transpose=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/iolidfiles/io_lid_files.html#save_texture"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.iolidfiles.save_texture" title="Permalink to this definition">¶</a></dt>
<dd><p>Save 16 bit grayscale PNG image of uv-texture.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">filename:</th><td class="field-body"><div class="first last line-block">
<div class="line">Filename of output image.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">tex:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray float uv-texture.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">transpose:</th><td class="field-body"><div class="first last line-block">
<div class="line">True, optional</div>
<div class="line">If True: transpose tex (u,v) to set u as columns and v as rows </div>
<div class="line">in texture image.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">None:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd>
<dt>Note:</dt>
<dd><div class="first last line-block">
<div class="line">Texture is rescaled to max = 1 and saved as uint16.</div>
<div class="line">–&gt; Before using uv_map: rescale back to set ‘normal’ to 1.</div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.iolidfiles.draw_lid">
<code class="descclassname">luxpy.toolboxes.iolidfiles.</code><code class="descname">draw_lid</code><span class="sig-paren">(</span><em>LID, grid_interp_method='linear', theta_min=0, angle_res=1, ax=None, projection='2d', polar_plot_Cx_planes=[0, 90], use_scatter_plot=False, plot_colorbar=True, legend_on=True, plot_luminaire_position=True, plot_diagram_top=0.001, out='ax', **plottingkwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/iolidfiles/io_lid_files.html#draw_lid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.iolidfiles.draw_lid" title="Permalink to this definition">¶</a></dt>
<dd><p>Draw the light intensity distribution.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">LID:</th><td class="field-body"><div class="first last line-block">
<div class="line">dict with IES or LDT file data. </div>
<div class="line">(obtained with iolidfiles.read_lamp_data())</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">grid_interp_method:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">‘linear’, optional</div>
<div class="line">Interpolation method for (theta,phi)-grid of normalized luminous intensity values.</div>
<div class="line">(supported scipy.interpolate.griddata methods: </div>
<div class="line-block">
<div class="line">‘nearest’, ‘linear’, ‘cubic’)</div>
</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">theta_min:</th><td class="field-body"><div class="first last line-block">
<div class="line">0, optional</div>
<div class="line">If 0: [0, 180]; If -90: theta range = [-90,90]</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">angle_res:</th><td class="field-body"><div class="first last line-block">
<div class="line">1, optional</div>
<div class="line">Resolution in degrees.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">ax:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">If None: create new 3D-axes for plotting.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">projection:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘2d’, optional</div>
<div class="line">If ‘3d’ make 3 plot</div>
<div class="line">If ‘2d’: make polar plot(s). [not yet implemented (25/03/2021)]</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">polar_plot_Cx_planes:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">[0,90], optional</div>
<div class="line">Plot (Cx)-(Cx+180) planes; eg. [0,90] will plot C0-C180 and C90-C270 planes in 2D polar plot.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">use_scatter_plot:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">False, optional</div>
<div class="line">If True: use plt.scatter for plotting intensity values in 3D plot.</div>
<div class="line">If False: use plt.plot_surface for plotting in 3D plot.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">plot_colorbar:</th><td class="field-body"><div class="first last line-block">
<div class="line">True, optional</div>
<div class="line">Plot colorbar representing the normalized luminous intensity values in the LID 3D plot.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">legend_on:</th><td class="field-body"><div class="first last line-block">
<div class="line">True, optional</div>
<div class="line">If True: plot legend on polar plot (no legend for 3D plot!).</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">plot_luminaire_position:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">True, optional</div>
<div class="line">Plot the position of the luminaire (0,0,0) in the 3D graph as a red diamond.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">plot_diagram_top:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">1e-3, optional</div>
<div class="line">Plot the top of the polar diagram (True).</div>
<div class="line">If None: automatic detection of non-zero intensity values in top part.</div>
<div class="line">If float: automatic detection of intensity values larger than max__intensity*float in top part.</div>
<div class="line-block">
<div class="line">(if smaller: don’t plot top.)</div>
</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">out:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘ax’, optional</div>
<div class="line">string with variable to return</div>
<div class="line">default: ax handle to plot.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first last line-block">
<div class="line">Whatever requested as determined by the string in :out:</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.iolidfiles.render_lid">
<code class="descclassname">luxpy.toolboxes.iolidfiles.</code><code class="descname">render_lid</code><span class="sig-paren">(</span><em>LID='./data/luxpy_test_lid_file.ies', sensor_resolution=100, sensor_position=[0, -1, 0.8], sensor_n=[0, 1, -0.2], fov=(90, 90), Fd=2, luminaire_position=[0, 1.3, 2], luminaire_n=[0, 0, -1], wall_center=[0, 2, 1], wall_n=[0, -1, 0], wall_width=4, wall_height=2, wall_rho=1, floor_center=[0, 1, 0], floor_n=[0, 0, 1], floor_width=4, floor_height=2, floor_rho=1, grid_interp_method='linear', angle_res=5, theta_min=0, ax3D=None, ax2D=None, join_axes=True, legend_on=True, plot_luminaire_position=True, plot_lumiaire_rays=False, plot_luminaire_lid=True, plot_sensor_position=True, plot_sensor_pixels=True, plot_sensor_rays=False, plot_wall_edges=True, plot_wall_luminance=True, plot_wall_intersections=False, plot_floor_edges=True, plot_floor_luminance=True, plot_floor_intersections=False, out='Lv2D'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/iolidfiles/io_lid_files.html#render_lid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.iolidfiles.render_lid" title="Permalink to this definition">¶</a></dt>
<dd><p>Render a light intensity distribution.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">LID:</th><td class="field-body"><div class="first last line-block">
<div class="line">dict with IES or LDT file data or string with path/filename;</div>
<div class="line">or String or StringIO object with IES or LDT data.</div>
<div class="line">(dict should be obtained with iolidfiles.read_lamp_data())</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">sensor_resolution:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">100, optional</div>
<div class="line">Number of sensor ‘pixels’ along each dimension.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">sensor_position:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">[0,-1,0.8], optional</div>
<div class="line">x,y,z position of the sensor ‘focal’ point (is located Fd meters behind actual sensor plane)</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">sensor_n:</th><td class="field-body"><div class="first last line-block">
<div class="line">[0,1,-0.2], optional</div>
<div class="line">Sensor plane surface normal</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">fov:</th><td class="field-body"><div class="first last line-block">
<div class="line">(90,90), optional</div>
<div class="line">Field of view of sensor image in degrees.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Fd:</th><td class="field-body"><div class="first last line-block">
<div class="line">2, optional</div>
<div class="line">‘Focal’ distance in meter. Sensor center is located Fd meter away from</div>
<div class="line">:sensor_position:</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">luminaire_position:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">[0,1.3,2], optional</div>
<div class="line">x,y,z position of the photometric equivalent point source</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">luminaire_n:</th><td class="field-body"><div class="first last line-block">
<div class="line">[0,0,-1], optional</div>
<div class="line">Orientation of lumaire LID (default points downward along z-axis away from source)</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">wall_center:</th><td class="field-body"><div class="first last line-block">
<div class="line">[0,2,1], optiona</div>
<div class="line">x,y,z position of the back wall</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">wall_n:</th><td class="field-body"><div class="first last line-block">
<div class="line">[0,-1,0], optional</div>
<div class="line">surface normal of wall</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">wall_width:</th><td class="field-body"><div class="first last line-block">
<div class="line">4, optional</div>
<div class="line">width of wall (m)</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">wall_height:</th><td class="field-body"><div class="first last line-block">
<div class="line">2, optional</div>
<div class="line">height of wall (m)</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">wall_rho:</th><td class="field-body"><div class="first last line-block">
<div class="line">1, optional</div>
<div class="line">Diffuse (Lambertian) reflectance of wall.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">floor_center:</th><td class="field-body"><div class="first last line-block">
<div class="line">[0,1,0], optiona</div>
<div class="line">x,y,z position of the floor</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">floor_n:</th><td class="field-body"><div class="first last line-block">
<div class="line">[0,0,1], optional</div>
<div class="line">surface normal of floor</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">floor_width:</th><td class="field-body"><div class="first last line-block">
<div class="line">4, optional</div>
<div class="line">width of floor (m)</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">floor_height:</th><td class="field-body"><div class="first last line-block">
<div class="line">2, optional</div>
<div class="line">height of floor (m)</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">floor_rho:</th><td class="field-body"><div class="first last line-block">
<div class="line">1, optional</div>
<div class="line">Diffuse (Lambertian) reflectance of floor.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">grid_interp_method:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">‘linear’, optional</div>
<div class="line">Interpolation method for (theta,phi)-grid of normalized luminous intensity values.</div>
<div class="line">(supported scipy.interpolate.griddata methods: </div>
<div class="line-block">
<div class="line">‘nearest’, ‘linear’, ‘cubic’)</div>
</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">theta_min:</th><td class="field-body"><div class="first last line-block">
<div class="line">0, optional</div>
<div class="line">If 0: [0, 180]; If -90: theta range = [-90,90]</div>
<div class="line">Only used when generating a plot of the LID in the 3D graphs.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">angle_res:</th><td class="field-body"><div class="first last line-block">
<div class="line">1, optional</div>
<div class="line">Angle resolution in degrees of LID sampling.</div>
<div class="line">Only used when generating a plot of the LID in the 3D graphs.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">ax3D,ax2D:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">If None: create new 3D- or 2D- axes for plotting.</div>
<div class="line">If join_axes == True: try and combine two axes on same figure.</div>
<div class="line">If False: don’t plot..</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">legend_on:</th><td class="field-body"><div class="first last line-block">
<div class="line">False, optional</div>
<div class="line">plot legend.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">plot_luminaire_position:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">True, optional</div>
<div class="line">Plot the position of the luminaire (0,0,0) in the graph as a red diamond.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">plot_X…:</th><td class="field-body"><div class="first last line-block">
<div class="line">VArious options to customize plotting. Mainly allows for plotting of</div>
<div class="line">additional info such as plane-ray intersection points, sensor pixels,</div>
<div class="line">sensor-to-plane rays, plane-to-luminaire rays, 3D plot of LID, etc.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">out:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘Lv2D’, optional</div>
<div class="line">string with variable to return</div>
<div class="line">default: variable storing an grayscale image of the rendered LID.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first last line-block">
<div class="line">Whatever requested as determined by the string in :out:</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="spectro">
<h2>spectro/<a class="headerlink" href="#spectro" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">py:</th><td class="field-body"><ul class="first simple">
<li>__init__.py</li>
<li>spectro.py</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">namespace:</th><td class="field-body"><p class="first last">luxpy.spectro</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<span class="target" id="module-luxpy.toolboxes.spectro"></span><div class="section" id="package-for-spectral-measurements">
<h3>Package for spectral measurements<a class="headerlink" href="#package-for-spectral-measurements" title="Permalink to this headline">¶</a></h3>
<div class="section" id="supported-devices">
<h4>Supported devices:<a class="headerlink" href="#supported-devices" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>JETI: specbos 1211, etc.</li>
<li>OceanOptics: QEPro, QE65Pro, QE65000, USB2000, USB650,etc.</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">get_spd():</th><td class="field-body">wrapper function to measure a spectral power distribution using a spectrometer of one of the supported manufacturers.</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="id24">
<h4>Notes<a class="headerlink" href="#id24" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ol class="arabic simple">
<li>For info on the input arguments of get_spd(), see help for each identically named function in each of the subpackages.</li>
<li>The use of jeti spectrometers requires access to some dll files (delivered with this package).</li>
<li>The use of oceanoptics spectrometers requires the manual installation of pyseabreeze, as well as some other ‘manual’ settings. See help for oceanoptics sub-package.</li>
</ol>
</div></blockquote>
<dl class="function">
<dt id="luxpy.toolboxes.spectro.init">
<code class="descclassname">luxpy.toolboxes.spectro.</code><code class="descname">init</code><span class="sig-paren">(</span><em>manufacturer</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spectro/spectro.html#init"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spectro.init" title="Permalink to this definition">¶</a></dt>
<dd><p>Import module for specified manufacturer. Make sure everything (drivers, external packages, …) required is installed!</p>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.spectro.get_spd">
<code class="descclassname">luxpy.toolboxes.spectro.</code><code class="descname">get_spd</code><span class="sig-paren">(</span><em>manufacturer='jeti'</em>, <em>dvc=0</em>, <em>Tint=0</em>, <em>autoTint_max=None</em>, <em>close_device=True</em>, <em>out='spd'</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spectro/spectro.html#get_spd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spectro.get_spd" title="Permalink to this definition">¶</a></dt>
<dd><p>Measure a spectral power distribution using a spectrometer of one of the supported manufacturers.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">manufacturer:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘jeti’ or ‘oceanoptics’, optional</div>
<div class="line">Manufacturer of spectrometer (ensures the correct module is loaded).</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">dvc:</th><td class="field-body"><div class="first last line-block">
<div class="line">0 or int or spectrometer handle, optional</div>
<div class="line">If int: function will try to initialize the spectrometer to </div>
<div class="line-block">
<div class="line">obtain a handle. The int represents the device </div>
<div class="line">number in a list of all detected devices of the manufacturer.</div>
</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Tint:</th><td class="field-body"><div class="first last line-block">
<div class="line">0 or Float, optional</div>
<div class="line">Integration time in seconds. (if 0: find best integration time, but &lt; autoTint_max).</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">autoTint_max:</th><td class="field-body"><div class="first last line-block">
<div class="line">Limit Tint to this value when Tint = 0.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">close_device:</th><td class="field-body"><div class="first last line-block">
<div class="line">True, optional</div>
<div class="line">Close spectrometer after measurement.</div>
<div class="line">If ‘dvc’ not in out.split(‘,’): always close!!!</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">out:</th><td class="field-body"><div class="first last line-block">
<div class="line">“spd” or e.g. “spd,dvc,Errors”, optional</div>
<div class="line">Requested return.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">kwargs:</th><td class="field-body"><div class="first last line-block">
<div class="line">For info on additional input (keyword) arguments of get_spd(), </div>
<div class="line">see help for each identically named function in each of the subpackages. </div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">spd:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with spectrum. (row 0: wavelengths, row1: values)</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">dvc:</th><td class="field-body"><div class="first last line-block">
<div class="line">Device handle, if succesfull open (_ERROR: failure, nan: closed)</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Errors:</th><td class="field-body"><div class="first last line-block">
<div class="line">Dict with error messages.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

</div>
</div>
</div>
<div class="section" id="sherbrooke-spectral-indices">
<h2>sherbrooke_spectral_indices/<a class="headerlink" href="#sherbrooke-spectral-indices" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">py:</th><td class="field-body"><ul class="first simple">
<li>__init__.py</li>
<li>sherbrooke_spectral_indices_2013.py</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">namespace:</th><td class="field-body"><p class="first last">luxpy.sherbrooke_spectral_indices</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<span class="target" id="module-luxpy.toolboxes.sherbrooke_spectral_indices"></span><p>Module for the calculation of the Melatonin Suppression Index (MSI), 
the Induced Photosynthesis Index (IPI) and the Star Light Index (SLI)
———————————————————————</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">spd_to_msi():</th><td class="field-body">calculate Melatonin Suppression Index from spectrum.</td>
</tr>
<tr class="field-even field"><th class="field-name">spd_to_ipi():</th><td class="field-body">calculate Induced Photosynthesis Index from spectrum.</td>
</tr>
<tr class="field-odd field"><th class="field-name">spd_to_sli():</th><td class="field-body">calculate Star Light Index  from spectrum.</td>
</tr>
</tbody>
</table>
</div></blockquote>
<dl class="docutils">
<dt>References: </dt>
<dd>1. Aubé M, Roby J, Kocifaj M (2013) 
Evaluating Potential Spectral Impacts of Various Artificial Lights on Melatonin Suppression, Photosynthesis, and Star Visibility. 
PLoS ONE 8(7): e67798
<a class="reference external" href="https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0067798">https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0067798</a></dd>
</dl>
<p>Created on Fri Jun 11 13:46:33 2021</p>
<p>&#64;author: ksmet1977 [at] gmail dot com</p>
<dl class="function">
<dt id="luxpy.toolboxes.sherbrooke_spectral_indices.spd_to_msi">
<code class="descclassname">luxpy.toolboxes.sherbrooke_spectral_indices.</code><code class="descname">spd_to_msi</code><span class="sig-paren">(</span><em>spd</em>, <em>force_5nm_interval=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/sherbrooke_spectral_indices/sherbrooke_spectral_indices_2013.html#spd_to_msi"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.sherbrooke_spectral_indices.spd_to_msi" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate Melatonin Suppression Index from spectrum.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">spd:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with spectral data (first row are wavelengths)</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">force_5nm_interval:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">True, optional</div>
<div class="line">If True: interpolate spd to 5nm wavelengths intervals, else: keep as in spd.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">msi:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with Melatonin Suppression Index values for each input spectrum.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.sherbrooke_spectral_indices.spd_to_ipi">
<code class="descclassname">luxpy.toolboxes.sherbrooke_spectral_indices.</code><code class="descname">spd_to_ipi</code><span class="sig-paren">(</span><em>spd</em>, <em>force_5nm_interval=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/sherbrooke_spectral_indices/sherbrooke_spectral_indices_2013.html#spd_to_ipi"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.sherbrooke_spectral_indices.spd_to_ipi" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate Induced Photosynthesis Index from spectrum.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">spd:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with spectral data (first row are wavelengths)</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">force_5nm_interval:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">True, optional</div>
<div class="line">If True: interpolate spd to 5nm wavelengths intervals, else: keep as in spd.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">msi:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with Induced Photosynthesis Index values for each input spectrum.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.sherbrooke_spectral_indices.spd_to_sli">
<code class="descclassname">luxpy.toolboxes.sherbrooke_spectral_indices.</code><code class="descname">spd_to_sli</code><span class="sig-paren">(</span><em>spd</em>, <em>force_5nm_interval=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/sherbrooke_spectral_indices/sherbrooke_spectral_indices_2013.html#spd_to_sli"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.sherbrooke_spectral_indices.spd_to_sli" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate Star Light Index from spectrum.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">spd:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with spectral data (first row are wavelengths)</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">force_5nm_interval:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">True, optional</div>
<div class="line">If True: interpolate spd to 5nm wavelengths intervals, else: keep as in spd.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">msi:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with Star Light Index values for each input spectrum.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="spectral-mismatch-and-uncertainty">
<h2>spectral_mismatch_and_uncertainty/<a class="headerlink" href="#spectral-mismatch-and-uncertainty" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">py:</th><td class="field-body"><ul class="first simple">
<li>__init__.py</li>
<li>detector_spectral_mismatch.py</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">namespace:</th><td class="field-body"><p class="first last">luxpy.spectral_mismatch_and_uncertainty</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<span class="target" id="module-luxpy.toolboxes.spectral_mismatch_and_uncertainty"></span><div class="section" id="toolbox-for-spectral-mismatch-and-measurement-uncertainty-calculations">
<h3>Toolbox for spectral mismatch and measurement uncertainty calculations<a class="headerlink" href="#toolbox-for-spectral-mismatch-and-measurement-uncertainty-calculations" title="Permalink to this headline">¶</a></h3>
<div class="section" id="spectral-mismatch-and-uncertainty-detector-spectral-mismatch-py">
<h4>spectral_mismatch_and_uncertainty/detector_spectral_mismatch.py<a class="headerlink" href="#spectral-mismatch-and-uncertainty-detector-spectral-mismatch-py" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">f1prime():</th><td class="field-body">Determine the f1prime spectral mismatch index.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">get_spectral_mismatch_correct_factors():</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">Determine the spectral mismatch factors.</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="reference">
<h4>Reference<a class="headerlink" href="#reference" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ol class="arabic simple">
<li>Krüger, U. et al. GENERAL V(λ) MISMATCH - INDEX HISTORY, CURRENT STATE, NEW IDEAS (TechnoTeam)</li>
</ol>
</div></blockquote>
<hr class="docutils" />
<p>Created on Tue Aug 31 10:46:02 2021</p>
<p>&#64;author: ksmet1977 [at] gmail.com</p>
<dl class="function">
<dt id="luxpy.toolboxes.spectral_mismatch_and_uncertainty.f1prime">
<code class="descclassname">luxpy.toolboxes.spectral_mismatch_and_uncertainty.</code><code class="descname">f1prime</code><span class="sig-paren">(</span><em>s_detector</em>, <em>S_C='A'</em>, <em>cieobs='1931_2'</em>, <em>s_target_index=2</em>, <em>wlr=None</em>, <em>interp_kind='linear'</em>, <em>out='f1p'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spectral_mismatch_and_uncertainty/detector_spectral_mismatch.html#f1prime"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spectral_mismatch_and_uncertainty.f1prime" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine the f1prime spectral mismatch index.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">s_detector:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with detector spectral responsivity (first row = wavelengths)</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">S_C:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘A’, optional</div>
<div class="line">Standard ‘calibration’ illuminant.</div>
<div class="line">string specifying the illuminant to use from the luxpy._CIE_ILLUMINANTS dict </div>
<div class="line">or ndarray with standard illuminant spectral data.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">cieobs:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘1931_2’, optional</div>
<div class="line">string with CIE standard observer color matching functions to use (from luxpy._CMF)</div>
<div class="line">or ndarray with CMFs (s_target_index &gt; 0) </div>
<div class="line">or target spectral responsivity (s_target_index == 0)</div>
<div class="line">(first row contains the wavelengths).</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">s_target_index:</th><td class="field-body"><div class="first last line-block">
<div class="line">2, optional</div>
<div class="line">if &gt; 0: index into CMF set (1-&gt;’xbar’, 2-&gt;’ybar’=’Vlambda’, 3-&gt;’zbar’)</div>
<div class="line">if == 0: cieobs is expected to contain an ndarray with the target spectral responsivity. </div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">wlr:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Wavelength range (None, ndarray or [start, stop, spacing]).</div>
<div class="line">If None: the wavelengths of the detector are used throughout.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">interp_kind:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘linear’, optional</div>
<div class="line">Interpolation type to use when interpolating function to specified wavelength range.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">out:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘f1p’, optional</div>
<div class="line">Specify requested output of function, </div>
<div class="line-block">
<div class="line">e.g. ‘f1p,s_rel’ also outputs the normalized target spectral responsitivity. </div>
</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">f1p:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray (vector) with f1prime values for each of the spectral responsivities in s_detector.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.toolboxes.spectral_mismatch_and_uncertainty.get_spectral_mismatch_correction_factors">
<code class="descclassname">luxpy.toolboxes.spectral_mismatch_and_uncertainty.</code><code class="descname">get_spectral_mismatch_correction_factors</code><span class="sig-paren">(</span><em>S_Z</em>, <em>s_detector</em>, <em>S_C='A'</em>, <em>cieobs='1931_2'</em>, <em>s_target_index=2</em>, <em>wlr=None</em>, <em>interp_kind='linear'</em>, <em>out='F'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/toolboxes/spectral_mismatch_and_uncertainty/detector_spectral_mismatch.html#get_spectral_mismatch_correction_factors"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.toolboxes.spectral_mismatch_and_uncertainty.get_spectral_mismatch_correction_factors" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine the spectral mismatch factors.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">S_Z:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with spectral power distribution of measured light source (first row = wavelengths).</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">s_detector:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with detector spectral responsivity (first row = wavelengths)</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">S_C:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘A’, optional</div>
<div class="line">Standard ‘calibration’ illuminant.</div>
<div class="line">string specifying the illuminant to use from the luxpy._CIE_ILLUMINANTS dict </div>
<div class="line">or ndarray with standard illuminant spectral data.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">cieobs:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘1931_2’, optional</div>
<div class="line">string with CIE standard observer color matching functions to use (from luxpy._CMF)</div>
<div class="line">or ndarray with CMFs (s_target_index &gt; 0) </div>
<div class="line">or target spectral responsivity (s_target_index == 0)</div>
<div class="line">(first row contains the wavelengths).</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">s_target_index:</th><td class="field-body"><div class="first last line-block">
<div class="line">2, optional</div>
<div class="line">if &gt; 0: index into CMF set (1-&gt;’xbar’, 2-&gt;’ybar’=’Vlambda’, 3-&gt;’zbar’)</div>
<div class="line">if == 0: cieobs is expected to contain an ndarray with the target spectral responsivity. </div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">wlr:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Wavelength range (ndarray or [start, stop, spacing]).</div>
<div class="line">If None: use the wavelength range of S_Z.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">interp_kind:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘linear’, optional</div>
<div class="line">Interpolation type to use when interpolating function to specified wavelength range.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">out:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘F’, optional</div>
<div class="line">Specify requested output of function, </div>
<div class="line-block">
<div class="line">e.g. ‘F,f1p’ also outputs the f1prime spectral mismatch index. </div>
</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">F:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with correction factors for each of the mesured spectra (rows)</div>
<div class="line">and spectral responsivities in s_detector (columns).</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="color.html" class="btn btn-neutral float-left" title="Color sub-package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Kevin A.G. Smet.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>