<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Spectrum sub-package &mdash; LuxPy 1.9.8 documentation</title><link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Color sub-package" href="color.html" />
    <link rel="prev" title="Math sub-package" href="math.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> LuxPy
          </a>
              <div class="version">
                1.9.8
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="license.html">License: GPLv3</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="required_packages.html">Imported (required) packages</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="luxpy_structure.html">Luxpy package structure</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="utils.html">Utils sub-package</a></li>
<li class="toctree-l2"><a class="reference internal" href="math.html">Math sub-package</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Spectrum sub-package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#spectrum-sub-package-supporting-basic-spectral-calculations">spectrum: sub-package supporting basic spectral calculations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#spectrum-cmf-py">spectrum/cmf.py</a></li>
<li class="toctree-l4"><a class="reference internal" href="#spectrum-spectral-py">spectrum/spectral.py</a></li>
<li class="toctree-l4"><a class="reference internal" href="#spectrum-spectral-databases-py">spectrum/spectral_databases.py</a></li>
<li class="toctree-l4"><a class="reference internal" href="#spectrum-illuminants-py">spectrum/illuminants.py</a></li>
<li class="toctree-l4"><a class="reference internal" href="#spectrum-spdx-iestm2714-py">spectrum/spdx_iestm2714.py</a></li>
<li class="toctree-l4"><a class="reference internal" href="#references">References</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#spd-class">SPD class</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="color.html">Color sub-package</a></li>
<li class="toctree-l2"><a class="reference internal" href="toolboxes.html">Toolboxes</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">LuxPy</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="luxpy_structure.html">Luxpy package structure</a> &raquo;</li>
      <li>Spectrum sub-package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/spectrum.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="spectrum-sub-package">
<h1>Spectrum sub-package<a class="headerlink" href="#spectrum-sub-package" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">py:</th><td class="field-body"><ul class="first simple">
<li>__init__.py</li>
<li>spdx_ietm2714.py</li>
<li><dl class="first docutils">
<dt>basics/</dt>
<dd><ul class="first last">
<li>__init__.py</li>
<li>cmf.py</li>
<li>spectral.py</li>
<li>spectral_databases.py</li>
</ul>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">namespace:</th><td class="field-body"><p class="first last">luxpy</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<span class="target" id="module-luxpy.spectrum"></span><div class="section" id="spectrum-sub-package-supporting-basic-spectral-calculations">
<h2>spectrum: sub-package supporting basic spectral calculations<a class="headerlink" href="#spectrum-sub-package-supporting-basic-spectral-calculations" title="Permalink to this headline">¶</a></h2>
<div class="section" id="spectrum-cmf-py">
<h3>spectrum/cmf.py<a class="headerlink" href="#spectrum-cmf-py" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">luxpy._CMF:</th><td class="field-body"><blockquote class="first">
<div><div class="line-block">
<div class="line">Dict with keys ‘types’ and x</div>
<div class="line">x are dicts with keys ‘bar’, ‘K’, ‘M’</div>
<div class="line"><br /></div>
<div class="line">* luxpy._CMF[‘types’]  = [‘1931_2’,’1964_10’,</div>
<div class="line-block">
<div class="line">‘2006_2’,’2006_10’,’2015_2’,’2015_10’,</div>
<div class="line">‘1931_2_judd1951’,’1931_2_juddvos1978’,</div>
<div class="line">‘1951_20_scotopic’]</div>
</div>
<div class="line">* luxpy._CMF[x][‘bar’] = numpy array with CMFs for type x </div>
<div class="line-block">
<div class="line">between 360 nm and 830 nm (has shape: (4,471))</div>
</div>
<div class="line">* luxpy._CMF[x][‘K’]   = Constant converting Watt to lumen for CMF type x.</div>
<div class="line">* luxpy._CMF[x][‘M’]   = XYZ to LMS conversion matrix for CMF type x.</div>
<div class="line-block">
<div class="line">Matrix is numpy array with shape: (3,3)</div>
</div>
<div class="line">* luxpy._CMF[x][‘N’]   = XYZ to RGB conversion matrix for CMF type x.</div>
<div class="line-block">
<div class="line">Matrix is numpy array with shape: (3,3)</div>
</div>
</div>
</div></blockquote>
<p>Notes:</p>
<blockquote class="last">
<div><ol class="arabic simple">
<li><dl class="first docutils">
<dt>All functions have been expanded (when necessary) using zeros to a </dt>
<dd>full 360-830 range. This way those wavelengths do not contribute 
in the calculation, AND are not extrapolated using the closest 
known value, as per CIE recommendation.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>There is no XYZ to LMS conversion matrices defined for the </dt>
<dd>1931 2° Judd corrected (1951) cmf sets.
The Hunt-Pointer-Estevez conversion matrix of the 1931 2° is 
therefore used as an approximation!</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>The XYZ to LMS conversion matrix M for the Judd-Vos XYZ CMFs is the one</dt>
<dd>that converts to the 1979 Smith-Pokorny cone fundamentals.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>The XYZ to LMS conversion matrix for the 1964 10° XYZ CMFs is set</dt>
<dd>to the one of the CIE 2006 10° cone fundamentals, as not matrix has
been officially defined for this CMF set.</dd>
</dl>
</li>
</ol>
<ol class="arabic simple" start="4">
<li><dl class="first docutils">
<dt>The K lm to Watt conversion factors for the Judd and Judd-Vos cmf </dt>
<dd>sets have been set to 683.002 lm/W (same as for standard 1931 2°).</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>The 1951 scoptopic V’ function has been replicated in the 3 </dt>
<dd>xbar, ybar, zbar columns to obtain a data format similar to the 
photopic color matching functions. 
This way V’ can be called in exactly the same way as other V 
functions can be called from the X,Y,Z cmf sets. 
The K value has been set to 1700.06 lm/W and the conversion matrix 
has been filled with NaN’s.</dd>
</dl>
</li>
<li>The ‘2015_x’ (with x = 2 or 10) are the same XYZ-CMFs as stored in ‘2006_x’.</li>
<li><dl class="first docutils">
<dt>_CMF[x][‘M’] for x equal to ‘2006_2’ (=’2015_2’) or ‘2006_10’ (=’2015_10’) is NOT </dt>
<dd>normalized to illuminant E! These are the original matrices 
as defined by [1] &amp; [2].</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>_CMF[x][‘N’] stores known or calculated conversion matrices from</dt>
<dd>xyz to rgb. If not available, N has been filled with NaNs.</dd>
</dl>
</li>
</ol>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="spectrum-spectral-py">
<h3>spectrum/spectral.py<a class="headerlink" href="#spectrum-spectral-py" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">_WL3:</th><td class="field-body">Default wavelength specification in vector-3 format: 
numpy.array([start, end, spacing])</td>
</tr>
<tr class="field-even field"><th class="field-name">_INTERP_TYPES:</th><td class="field-body">Dict with interpolation types associated with various types of
spectral data according to CIE recommendation:</td>
</tr>
<tr class="field-odd field"><th class="field-name">_S_INTERP_TYPE:</th><td class="field-body">Interpolation type for light source spectral data</td>
</tr>
<tr class="field-even field"><th class="field-name">_R_INTERP_TYPE:</th><td class="field-body">Interpolation type for reflective/transmissive spectral data</td>
</tr>
<tr class="field-odd field"><th class="field-name">_C_INTERP_TYPE:</th><td class="field-body">Interpolation type for CMF and cone-fundamental spectral data</td>
</tr>
<tr class="field-even field"><th class="field-name">getwlr():</th><td class="field-body">Get/construct a wavelength range from a (start, stop, spacing) 
3-vector.</td>
</tr>
<tr class="field-odd field"><th class="field-name">getwld():</th><td class="field-body">Get wavelength spacing of numpy.ndarray with wavelengths.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">spd_normalize():</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">Spectrum normalization (supports: area, max, lambda, 
radiometric, photometric and quantal energy units).</td>
</tr>
<tr class="field-odd field"><th class="field-name">cie_interp():</th><td class="field-body">Interpolate / extrapolate spectral data following standard 
[<a class="reference external" href="https://doi.org/10.25039/TR.015.2018">CIE15:2018, “Colorimetry,” CIE, Vienna, Austria, 2018.</a>]</td>
</tr>
<tr class="field-even field"><th class="field-name">spd():</th><td class="field-body"><div class="first last line-block">
<div class="line">All-in-one function that can:</div>
<div class="line-block">
<div class="line">1. Read spectral data from data file or take input directly as 
pandas.dataframe or ndarray.</div>
<div class="line">2. Convert spd-like data from ndarray to pandas.dataframe and back.</div>
<div class="line">3. Interpolate spectral data.</div>
<div class="line">4. Normalize spectral data.</div>
</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">xyzbar():</th><td class="field-body">Get color matching functions.</td>
</tr>
<tr class="field-even field"><th class="field-name">vlbar():</th><td class="field-body">Get Vlambda function.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">vlbar_cie_mesopic():</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">Get CIE mesopic luminous efficiency function Vmesm according to CIE191:2010</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">get_cie_mesopic_adaptation():</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">Get the mesopic adaptation state according to CIE191:2010</td>
</tr>
<tr class="field-odd field"><th class="field-name">spd_to_xyz():</th><td class="field-body">Calculates xyz tristimulus values from spectral data.</td>
</tr>
<tr class="field-even field"><th class="field-name">spd_to_ler():</th><td class="field-body">Calculates Luminous efficacy of radiation (LER) 
from spectral data.</td>
</tr>
<tr class="field-odd field"><th class="field-name">spd_to_power():</th><td class="field-body">Calculate power of spectral data in radiometric, photometric
or quantal energy units.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">detect_peakwl():</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">Detect peak wavelengths and fwhm of peaks in spectrum spd.</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="spectrum-spectral-databases-py">
<h3>spectrum/spectral_databases.py<a class="headerlink" href="#spectrum-spectral-databases-py" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">_S_PATH:</th><td class="field-body">Path to light source spectra data.</td>
</tr>
<tr class="field-even field"><th class="field-name">_R_PATH:</th><td class="field-body">Path to with spectral reflectance data</td>
</tr>
<tr class="field-odd field"><th class="field-name">_IESTM3015:</th><td class="field-body">Database with spectral reflectances related to and light source 
spectra contained excel calculator of IES TM30-15 publication.</td>
</tr>
<tr class="field-even field"><th class="field-name">_IESTM3018:</th><td class="field-body">Database with spectral reflectances related to and light source 
spectra contained excel calculator of IES TM30-18 publication.</td>
</tr>
<tr class="field-odd field"><th class="field-name">_IESTM3015_S:</th><td class="field-body">Database with only light source spectra contained in the 
IES TM30-15 excel calculator.</td>
</tr>
<tr class="field-even field"><th class="field-name">_IESTM3018_S:</th><td class="field-body">Database with only light source spectra contained in the 
IES TM30-18 excel calculator.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">_CIE_ILLUMINANTS:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">Database with CIE illuminants: </div>
<div class="line">* ‘E’, ‘D65’, ‘A’, ‘C’,</div>
<div class="line">* ‘F1’, ‘F2’, ‘F3’, ‘F4’, ‘F5’, ‘F6’,
‘F7’, ‘F8’, ‘F9’, ‘F10’, ‘F11’, ‘F12’</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">_CIE_E, _CIE_D65, _CIE_A, _CIE_C, _CIE_F4:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">Some CIE illuminants for easy use.</td>
</tr>
<tr class="field-odd field"><th class="field-name">_CRI_RFL:</th><td class="field-body"><div class="first last line-block">
<div class="line">Database with spectral reflectance functions for various 
color rendition calculators:</div>
<div class="line">* <a class="reference external" href="http://www.cie.co.at/index.php/index.php?i_ca_id=303">CIE 13.3-1995 (8, 14 munsell samples)</a></div>
<div class="line">* <a class="reference external" href="http://www.cie.co.at/index.php?i_ca_id=1027">CIE 224:2015 (99 set)</a></div>
<div class="line">* <a class="reference external" href="http://journals.sagepub.com/doi/abs/10.1177/1477153513481375">CRI2012 (HL17 &amp; HL1000 spectrally uniform and 210 real samples)</a></div>
<div class="line">* <a class="reference external" href="https://www.ies.org/store/technical-memoranda/ies-method-for-evaluating-light-source-color-rendition">IES TM30 (99, 4880 sepctrally uniform samples)</a></div>
<div class="line">* <a class="reference external" href="http://www.sciencedirect.com/science/article/pii/S0378778812000837">MCRI (10 familiar object set)</a></div>
<div class="line">* <a class="reference external" href="http://spie.org/Publications/Journal/10.1117/1.3360335">CQS (v7.5 and v9.0 sets)</a></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">_MUNSELL:</th><td class="field-body">Database (dict) with 1269 Munsell spectral reflectance functions 
and Value (V), Chroma (C), hue (h) and (ab) specifications.</td>
</tr>
<tr class="field-odd field"><th class="field-name">_RFL:</th><td class="field-body"><div class="first last line-block">
<div class="line">Database (dict) with RFLs, including:</div>
<div class="line">* all those in _CRI_RFL, </div>
<div class="line">* the 1269 Matt Munsell samples (see also _MUNSELL),</div>
<div class="line">* the 24 Macbeth ColorChecker samples,</div>
<div class="line">* the 215 samples proposed by Opstelten, J.J. , 1983, The establishment of a representative set of test colours</div>
<div class="line-block">
<div class="line">for the specification of the colour rendering properties of light sources, CIE-20th session, Amsterdam. </div>
</div>
<div class="line">* the 114120 RFLs from capbone.com/spectral-reflectance-database/</div>
</div>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="spectrum-illuminants-py">
<h3>spectrum/illuminants.py<a class="headerlink" href="#spectrum-illuminants-py" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">_BB:</th><td class="field-body"><p class="first">Dict with constants for blackbody radiator calculation 
constant are (c1, c2, n, na, c, h, k).</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">_S012_DAYLIGHTPHASE:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first">ndarray with CIE S0,S1, S2 curves for daylight 
phase calculation (linearly interpolated to 1 nm).</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">_CRI_REF_TYPES:</th><td class="field-body"><p class="first">Dict with blackbody to daylight transition (mixing) ranges for
various types of reference illuminants used in color rendering
index calculations.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">blackbody():</th><td class="field-body"><p class="first">Calculate blackbody radiator spectrum.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">_DAYLIGHT_LOCI_PARAMETERS:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><p class="first">dict with parameters for daylight loci for various CMF sets; used by daylightlocus().</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">_DAYLIGHT_M12_COEFFS:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first">dict with coefficients in weights M1 &amp; M2 for daylight phases for various CMF sets.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">get_daylightloci_parameters():</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><p class="first">Get parameters for the daylight loci functions xD(1000/CCT) and yD(xD); used by daylightlocus().</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">get_daylightphase_Mi_coeffs():</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first">Get coefficients of Mi weights of daylight phase for specific cieobs following Judd et al. (1964).</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">_get_daylightphase_Mi_values():</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><p class="first">Get daylight phase coefficients M1, M2 following Judd et al. (1964).</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">_get_daylightphase_Mi():</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first">Get daylight phase coefficients M1, M2 following Judd et al. (1964)</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">daylightlocus():</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><p class="first">Calculates daylight chromaticity from cct.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">daylightphase():</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first">Calculate daylight phase spectrum.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">cri_ref():</th><td class="field-body"><dl class="first docutils">
<dt>Calculates a reference illuminant spectrum based on cct for color </dt>
<dd><p class="first last">rendering index calculations.</p>
</dd>
<dt>(<a class="reference external" href="https://doi.org/10.25039/TR.015.2018">CIE15:2018, “Colorimetry,” CIE, Vienna, Austria, 2018.</a>, </dt>
<dd><p class="first last"><a class="reference external" href="http://www.cie.co.at/index.php?i_ca_id=1027">cie224:2017, CIE 2017 Colour Fidelity Index for accurate scientific use. (2017), ISBN 978-3-902842-61-9.</a>,
<a class="reference external" href="https://www.ies.org/store/technical-memoranda/ies-method-for-evaluating-light-source-color-rendition/">IES-TM-30-15: Method for Evaluating Light Source Color Rendition. New York, NY: The Illuminating Engineering Society of North America.</a></p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">spd_to_indoor():</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first last">Convert spd to indoor variant by multiplying it with the CIE spectral transmission for glass.</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="spectrum-spdx-iestm2714-py">
<h3>spectrum/spdx_iestm2714.py<a class="headerlink" href="#spectrum-spdx-iestm2714-py" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">_SPDX_TEMPLATE:</th><td class="field-body">template dictionary for SPDX data.</td>
</tr>
<tr class="field-even field"><th class="field-name">read_spdx():</th><td class="field-body">Read xml file or convert xml string with spdx data to dictionary.</td>
</tr>
<tr class="field-odd field"><th class="field-name">write_spdx():</th><td class="field-body">Convert spdx dictionary to xml string (and write to .spdx file)</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="references">
<h3>References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ol class="arabic simple">
<li><a class="reference external" href="https://doi.org/10.25039/TR.015.2018">CIE15:2018, “Colorimetry,” CIE, Vienna, Austria, 2018.</a></li>
</ol>
<p>2. <a class="reference external" href="http://www.cie.co.at/publications/fundamental-chromaticity-diagram-physiological-axes-part-1">CIE, and CIE (2006). 
Fundamental Chromaticity Diagram with Physiological Axes - Part I.(Vienna: CIE).</a></p>
<p>3. <a class="reference external" href="http://www.cie.co.at/index.php?i_ca_id=1027">cie224:2017, CIE 2017 Colour Fidelity Index for accurate scientific use. (2017),
ISBN 978-3-902842-61-9.</a></p>
<p>4. <a class="reference external" href="https://www.ies.org/store/technical-memoranda/ies-method-for-evaluating-light-source-color-rendition/">IES-TM-30-15: Method for Evaluating Light Source Color Rendition. 
New York, NY: The Illuminating Engineering Society of North America.</a></p>
<ol class="arabic simple" start="5">
<li>Judd, D. B., MacAdam, D. L., Wyszecki, G., Budde, H. W., Condit, H. R., Henderson, S. T., &amp; Simonds, J. L. (1964). Spectral Distribution of Typical Daylight as a Function of Correlated Color Temperature. J. Opt. Soc. Am., 54(8), 1031–1040. <a class="reference external" href="https://doi.org/10.1364/JOSA.54.001031">https://doi.org/10.1364/JOSA.54.001031</a></li>
<li><a class="reference external" href="http://www.ies.org/iestm2714">http://www.ies.org/iestm2714</a></li>
</ol>
</div></blockquote>
<hr class="docutils" />
<dl class="function">
<dt id="luxpy.spectrum.getwlr">
<code class="descclassname">luxpy.spectrum.</code><code class="descname">getwlr</code><span class="sig-paren">(</span><em>wl3=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/spectrum/basics/spectral.html#getwlr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.spectrum.getwlr" title="Permalink to this definition">¶</a></dt>
<dd><p>Get/construct a wavelength range from a 3-vector (start, stop, spacing).</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">wl3:</th><td class="field-body"><div class="first last line-block">
<div class="line">list[start, stop, spacing], optional </div>
<div class="line">(defaults to luxpy._WL3)</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray (.shape = (n,)) with n wavelengths ranging from</div>
<div class="line">start to stop, with wavelength interval equal to spacing.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.spectrum.getwld">
<code class="descclassname">luxpy.spectrum.</code><code class="descname">getwld</code><span class="sig-paren">(</span><em>wl</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/spectrum/basics/spectral.html#getwld"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.spectrum.getwld" title="Permalink to this definition">¶</a></dt>
<dd><p>Get wavelength spacing.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">wl:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with wavelengths</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first last line-block">
<div class="line">- float:  for equal wavelength spacings</div>
<div class="line">- ndarray (.shape = (n,)): for unequal wavelength spacings</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.spectrum.spd_normalize">
<code class="descclassname">luxpy.spectrum.</code><code class="descname">spd_normalize</code><span class="sig-paren">(</span><em>data</em>, <em>norm_type=None</em>, <em>norm_f=1</em>, <em>wl=True</em>, <em>cieobs='1931_2'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/spectrum/basics/spectral.html#spd_normalize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.spectrum.spd_normalize" title="Permalink to this definition">¶</a></dt>
<dd><p>Normalize a spectral power distribution (SPD).</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">data:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">norm_type:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional </div>
<div class="line-block">
<div class="line">- ‘lambda’: make lambda in norm_f equal to 1</div>
<div class="line">- ‘area’: area-normalization times norm_f</div>
<div class="line">- ‘max’: max-normalization times norm_f</div>
<div class="line">- ‘ru’: to :norm_f: radiometric units </div>
<div class="line">- ‘pu’: to :norm_f: photometric units </div>
<div class="line">- ‘pusa’: to :norm_f: photometric units (with Km corrected</div>
<div class="line-block">
<div class="line">to standard air, cfr. CIE TN003-2015)</div>
</div>
<div class="line">- ‘qu’: to :norm_f: quantal energy units</div>
</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">norm_f:</th><td class="field-body"><div class="first last line-block">
<div class="line">1, optional</div>
<div class="line">Normalization factor that determines the size of normalization </div>
<div class="line">for ‘max’ and ‘area’ </div>
<div class="line">or which wavelength is normalized to 1 for ‘lambda’ option.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">wl:</th><td class="field-body"><div class="first last line-block">
<div class="line">True or False, optional </div>
<div class="line">If True, the first column of data contains wavelengths.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">cieobs:</th><td class="field-body"><div class="first last line-block">
<div class="line">_CIEOBS or str, optional</div>
<div class="line">Type of cmf set to use for normalization using photometric units </div>
<div class="line">(norm_type == ‘pu’)</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with normalized data.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.spectrum.cie_interp">
<code class="descclassname">luxpy.spectrum.</code><code class="descname">cie_interp</code><span class="sig-paren">(</span><em>data</em>, <em>wl_new</em>, <em>kind=None</em>, <em>sprague5_allowed=False</em>, <em>negative_values_allowed=False</em>, <em>extrap_values='ext'</em>, <em>extrap_kind='linear'</em>, <em>extrap_log=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/spectrum/basics/spectral.html#cie_interp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.spectrum.cie_interp" title="Permalink to this definition">¶</a></dt>
<dd><p>Interpolate / extrapolate spectral data following standard CIE15-2018.</p>
<div class="line-block">
<div class="line">The kind of interpolation depends on the spectrum type defined in :kind:. </div>
</div>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">data:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with spectral data </div>
<div class="line">(.shape = (number of spectra + 1, number of original wavelengths))</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">wl_new:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with new wavelengths</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">kind:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line-block">
<div class="line">- If :kind: is None, return original data.</div>
<div class="line">- If :kind: is a spectrum type (see _INTERP_TYPES), the correct </div>
<div class="line-block">
<div class="line">interpolation type is automatically chosen </div>
<div class="line-block">
<div class="line">(The use of the slow(er) ‘sprague5’ can be toggled on using :sprague5_allowed:).</div>
</div>
</div>
<div class="line">- Or :kind: can be any interpolation type supported by </div>
<div class="line-block">
<div class="line">scipy.interpolate.interp1d (or luxpy.math.interp1 if nan’s are present!!)</div>
<div class="line">or can be ‘sprague5’ (uses luxpy.math.interp1_sprague5).  </div>
</div>
</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">sprague5_allowed:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">False, optional</div>
<div class="line">If True: When kind is a spectral data type from _INTERP_TYPES[‘cubic’],</div>
<div class="line-block">
<div class="line">then a cubic spline interpolation will be used in case of </div>
<div class="line">unequal wavelength spacings, otherwise a 5th order Sprague will be used.</div>
</div>
<div class="line">If False: always use ‘cubic’, don’t use ‘sprague5’. </div>
<div class="line-block">
<div class="line">This is the default, as differences are minimal and </div>
<div class="line">use of the ‘sprague5’ function is a lot slower!</div>
</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">negative_values_allowed:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">False, optional</div>
<div class="line">If False: negative values are clipped to zero.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">extrap_values:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘ext’, optional</div>
<div class="line">If ‘ext’: extrapolate using ‘linear’ (‘cie167:2005’), ‘quadratic’ (‘cie15:2018’) </div>
<div class="line-block">
<div class="line">‘nearest’ (‘cie15:2004’) recommended or other (e.g. ‘cubic’) methods.</div>
</div>
<div class="line">If None: use CIE15:2004 recommended ‘nearest value’ approach when extrapolating.</div>
<div class="line">If float or list or ndarray, use those values to fill extrapolated value(s).</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">extrap_kind:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘linear’, optional</div>
<div class="line">Extrapolation method used when :extrap_values: is set to ‘ext’. </div>
<div class="line">Options: ‘linear’ (‘cie167:2005’), ‘quadratic’ (‘cie15:2018’), </div>
<div class="line-block">
<div class="line">‘nearest’ (‘cie15:2004’), ‘cubic’</div>
</div>
<div class="line">CIE15:2018 states that based on a 2017 paper by Wang that ‘quadratic’ is ‘better’. </div>
<div class="line">However, no significant difference was found between ‘quadratic’ and ‘linear’ methods.</div>
<div class="line">Also see note 1 below, for why the CIE67:2005 recommended ‘linear’ extrapolation</div>
<div class="line">is set as the default.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">extrap_log:</th><td class="field-body"><div class="first last line-block">
<div class="line">False, optional</div>
<div class="line">If True: extrap the log of the spectral values </div>
<div class="line-block">
<div class="line">(not CIE recommended but in most cases seems to give a </div>
<div class="line">more realistic estimate, but can sometimes seriously fail, </div>
<div class="line">especially for the ‘quadratic’ extrapolation case (see note 1)!!!)</div>
</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray of interpolated spectral data.</div>
<div class="line">(.shape = (number of spectra + 1, number of wavelength in wl_new))</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Notes:</dt>
<dd><div class="first last line-block">
<div class="line">1. Type of extrapolation: ‘quadratic’ vs ‘linear’; impact of extrapolating log spectral values:</div>
<div class="line-block">
<div class="line">Using a ‘linear’ or ‘quadratic’ extrapolation, as mentioned in </div>
<div class="line">CIE167:2005 and CIE15:2018, resp., can lead to extreme large values </div>
<div class="line">when setting :extrap_log: (not CIE recommended) to True. </div>
<div class="line">A quick test with the IES TM30 spectra (400 nm - 700 nm, 5 nm spacing) </div>
<div class="line">shows that ‘linear’ is better than ‘quadratic’ in terms of </div>
<div class="line">mean, median and max DEu’v’ with the original spectra (380 nm - 780 nm, 5 nm spacing).</div>
<div class="line">This conferms the recommendation from CIE167:2005 to use ‘linear’ extrapolation.</div>
<div class="line">Setting :extrap_log: to True reduces the median, but inflates the mean due to some</div>
<div class="line">extremely large DEu’v’ values. However, the increase in mean and max DEu’v’ is much </div>
<div class="line">larger for the ‘quadratic’ case, suggesting that ‘linear’ extrapolation </div>
<div class="line">is likely a more suitable recommendation. When using a 1 nm spacing</div>
<div class="line">‘linear’ is more similar to ‘quadratic’ when :extrap_log: is False, otherwise ‘linear’</div>
<div class="line">remains the ‘best’. Hence the choice to use the CIE167:2005 recommended linear extrapolation as default!</div>
</div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.spectrum.spd">
<code class="descclassname">luxpy.spectrum.</code><code class="descname">spd</code><span class="sig-paren">(</span><em>data=None</em>, <em>interpolation=None</em>, <em>kind='np'</em>, <em>wl=None</em>, <em>columns=None</em>, <em>sep='</em>, <em>'</em>, <em>header=None</em>, <em>datatype='S'</em>, <em>norm_type=None</em>, <em>norm_f=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/spectrum/basics/spectral.html#spd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.spectrum.spd" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">All-in-one function that can:</div>
<div class="line-block">
<div class="line">1. Read spectral data from data file or take input directly 
as pandas.dataframe or ndarray.</div>
<div class="line">2. Convert spd-like data from ndarray to pandas.dataframe and back.</div>
<div class="line">3. Interpolate spectral data.</div>
<div class="line">4. Normalize spectral data.</div>
</div>
</div>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">data:</th><td class="field-body"><div class="first last line-block">
<div class="line">- str with path to file containing spectral data</div>
<div class="line">- ndarray with spectral data</div>
<div class="line">- pandas.dataframe with spectral data</div>
<div class="line">(.shape = (number of spectra + 1, number of original wavelengths))</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">interpolation:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">- None: don’t interpolate</div>
<div class="line">- str with interpolation type or spectrum type</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">kind:</th><td class="field-body"><div class="first last line-block">
<div class="line">str [‘np’,’df’], optional </div>
<div class="line">Determines type(:returns:), np: ndarray, df: pandas.dataframe</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">wl:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">New wavelength range for interpolation. </div>
<div class="line">Defaults to wavelengths specified by luxpy._WL3.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">columns:</th><td class="field-body"><div class="first last line-block">
<div class="line">-  None or list[str] of column names for dataframe, optional</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">header:</th><td class="field-body"><div class="first last line-block">
<div class="line">None or ‘infer’, optional</div>
<div class="line">- None: no header in file</div>
<div class="line">- ‘infer’: infer headers from file</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">sep:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘,’ or ‘  ‘ or other char, optional</div>
<div class="line">Column separator in case :data: specifies a data file. </div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">datatype’:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘S’ (light source) or ‘R’ (reflectance) or other, optional</div>
<div class="line">Specifies a type of spectral data. </div>
<div class="line">Is used when creating column headers when :column: is None.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">norm_type:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional </div>
<div class="line-block">
<div class="line">- ‘lambda’: make lambda in norm_f equal to 1</div>
<div class="line">- ‘area’: area-normalization times norm_f</div>
<div class="line">- ‘max’: max-normalization times norm_f</div>
<div class="line">- ‘ru’: to :norm_f: radiometric units </div>
<div class="line">- ‘pu’: to :norm_f: photometric units </div>
<div class="line">- ‘pusa’: to :norm_f: photometric units (with Km corrected</div>
<div class="line-block">
<div class="line">to standard air, cfr. CIE TN003-2015)</div>
</div>
<div class="line">- ‘qu’: to :norm_f: quantal energy units</div>
</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">norm_f:</th><td class="field-body"><div class="first last line-block">
<div class="line">1, optional</div>
<div class="line">Normalization factor that determines the size of normalization 
for ‘max’ and ‘area’ 
or which wavelength is normalized to 1 for ‘lambda’ option.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray or pandas.dataframe </div>
<div class="line">with interpolated and/or normalized spectral data.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.spectrum.xyzbar">
<code class="descclassname">luxpy.spectrum.</code><code class="descname">xyzbar</code><span class="sig-paren">(</span><em>cieobs='1931_2'</em>, <em>scr='dict'</em>, <em>wl_new=None</em>, <em>kind='np'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/spectrum/basics/spectral.html#xyzbar"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.spectrum.xyzbar" title="Permalink to this definition">¶</a></dt>
<dd><p>Get color matching functions.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">cieobs:</th><td class="field-body"><div class="first last line-block">
<div class="line">luxpy._CIEOBS, optional</div>
<div class="line">Sets the type of color matching functions to load.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">scr:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘dict’ or ‘file’, optional</div>
<div class="line">Determines whether to load cmfs from file (./data/cmfs/) </div>
<div class="line">or from dict defined in .cmf.py</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">wl:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">New wavelength range for interpolation. </div>
<div class="line">Defaults to wavelengths specified by luxpy._WL3.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">kind:</th><td class="field-body"><div class="first last line-block">
<div class="line">str [‘np’,’df’], optional </div>
<div class="line">Determines type(:returns:), np: ndarray, df: pandas.dataframe</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray or pandas.dataframe with CMFs </div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>References:</dt>
<dd><ol class="first last arabic simple">
<li><a class="reference external" href="https://doi.org/10.25039/TR.015.2018">CIE15:2018, “Colorimetry,” CIE, Vienna, Austria, 2018.</a></li>
</ol>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.spectrum.vlbar">
<code class="descclassname">luxpy.spectrum.</code><code class="descname">vlbar</code><span class="sig-paren">(</span><em>cieobs='1931_2'</em>, <em>scr='dict'</em>, <em>wl_new=None</em>, <em>kind='np'</em>, <em>out=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/spectrum/basics/spectral.html#vlbar"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.spectrum.vlbar" title="Permalink to this definition">¶</a></dt>
<dd><p>Get Vlambda functions.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">cieobs:</th><td class="field-body"><div class="first last line-block">
<div class="line">str, optional</div>
<div class="line">Sets the type of Vlambda function to obtain.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">scr:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘dict’ or array, optional</div>
<div class="line">- ‘dict’: get from ybar from _CMF</div>
<div class="line">- ‘array’: ndarray in :cieobs:</div>
<div class="line">Determines whether to load cmfs from file (./data/cmfs/) </div>
<div class="line">or from dict defined in .cmf.py</div>
<div class="line">Vlambda is obtained by collecting Ybar.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">wl:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">New wavelength range for interpolation. </div>
<div class="line">Defaults to wavelengths specified by luxpy._WL3.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">kind:</th><td class="field-body"><div class="first last line-block">
<div class="line">str [‘np’,’df’], optional </div>
<div class="line">Determines type(:returns:), np: ndarray, df: pandas.dataframe</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">out:</th><td class="field-body"><div class="first last line-block">
<div class="line">1 or 2, optional</div>
<div class="line-block">
<div class="line">1: returns Vlambda</div>
<div class="line">2: returns (Vlambda, Km)</div>
</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first last line-block">
<div class="line">dataframe or ndarray with Vlambda of type :cieobs: </div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>References:</dt>
<dd><ol class="first last arabic simple">
<li><a class="reference external" href="https://doi.org/10.25039/TR.015.2018">CIE15:2018, “Colorimetry,” CIE, Vienna, Austria, 2018.</a></li>
</ol>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.spectrum.vlbar_cie_mesopic">
<code class="descclassname">luxpy.spectrum.</code><code class="descname">vlbar_cie_mesopic</code><span class="sig-paren">(</span><em>m=[1], wl_new=None, kind='np', out=1, Lp=None, Ls=None, SP=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/spectrum/basics/spectral.html#vlbar_cie_mesopic"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.spectrum.vlbar_cie_mesopic" title="Permalink to this definition">¶</a></dt>
<dd><p>Get CIE mesopic luminous efficiency function Vmesm according to CIE191:2010</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">m:</th><td class="field-body"><div class="first last line-block">
<div class="line">float or list or ndarray with mesopic adaptation coefficients</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">wl:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">New wavelength range for interpolation. </div>
<div class="line">Defaults to wavelengths specified by luxpy._WL3.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">out:</th><td class="field-body"><div class="first last line-block">
<div class="line">1 or 2, optional</div>
<div class="line-block">
<div class="line">1: returns Vmesm</div>
<div class="line">2: returns (Vmes, Kmesm)</div>
</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Lp:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">float or ndarray with photopic adaptation luminance</div>
<div class="line">If not None: use this (and SP or Ls) to calculate the </div>
<div class="line">mesopic adaptation coefficient</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Ls:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">float or ndarray with scotopic adaptation luminance</div>
<div class="line">If None: SP must be supplied.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">SP:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">S/P ratio</div>
<div class="line">If None: Ls must be supplied.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Vmes:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with mesopic luminous efficiency function </div>
<div class="line">for adaptation coefficient(s) m</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Kmes:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with luminous efficacies of 555 nm monochromatic light</div>
<div class="line">for for adaptation coefficient(s) m</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Reference:</dt>
<dd>1. <a class="reference external" href="http://cie.co.at/publications/recommended-system-mesopic-photometry-based-visual-performance">CIE 191:2010 Recommended System for Mesopic Photometry Based on Visual Performance.
(ISBN 978-3-901906-88-6  ),</a></dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.spectrum.get_cie_mesopic_adaptation">
<code class="descclassname">luxpy.spectrum.</code><code class="descname">get_cie_mesopic_adaptation</code><span class="sig-paren">(</span><em>Lp</em>, <em>Ls=None</em>, <em>SP=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/spectrum/basics/spectral.html#get_cie_mesopic_adaptation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.spectrum.get_cie_mesopic_adaptation" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the mesopic adaptation state according to CIE191:2010</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Lp:</th><td class="field-body"><div class="first last line-block">
<div class="line">float or ndarray with photopic adaptation luminance</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Ls:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">float or ndarray with scotopic adaptation luminance</div>
<div class="line">If None: SP must be supplied.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">SP:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">S/P ratio</div>
<div class="line">If None: Ls must be supplied.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Lmes:</th><td class="field-body"><div class="first last line-block">
<div class="line">mesopic adaptation luminance</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">m:</th><td class="field-body"><div class="first last line-block">
<div class="line">mesopic adaptation coefficient</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Reference:</dt>
<dd>1. <a class="reference external" href="http://cie.co.at/publications/recommended-system-mesopic-photometry-based-visual-performance">CIE 191:2010 Recommended System for Mesopic Photometry Based on Visual Performance.
(ISBN 978-3-901906-88-6 ),</a></dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.spectrum.spd_to_xyz">
<code class="descclassname">luxpy.spectrum.</code><code class="descname">spd_to_xyz</code><span class="sig-paren">(</span><em>data</em>, <em>relative=True</em>, <em>rfl=None</em>, <em>cieobs='1931_2'</em>, <em>K=None</em>, <em>out=None</em>, <em>cie_std_dev_obs=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/spectrum/basics/spectral.html#spd_to_xyz"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.spectrum.spd_to_xyz" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates xyz tristimulus values from spectral data.</p>
<dl class="docutils">
<dt>Args: </dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">data:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray or pandas.dataframe with spectral data</div>
<div class="line">(.shape = (number of spectra + 1, number of wavelengths))</div>
<div class="line">Note that :data: is never interpolated, only CMFs and RFLs. </div>
<div class="line">This way interpolation errors due to peaky spectra are avoided. </div>
<div class="line">Conform CIE15-2018.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">relative:</th><td class="field-body"><div class="first last line-block">
<div class="line">True or False, optional</div>
<div class="line">Calculate relative XYZ (Yw = 100) or absolute XYZ (Y = Luminance)</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">rfl:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with spectral reflectance functions.</div>
<div class="line">Will be interpolated if wavelengths do not match those of :data:</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">cieobs:</th><td class="field-body"><div class="first last line-block">
<div class="line">luxpy._CIEOBS or str, optional</div>
<div class="line">Determines the color matching functions to be used in the </div>
<div class="line">calculation of XYZ.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">K:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line-block">
<div class="line">e.g.  K  = 683 lm/W for ‘1931_2’ (relative == False) </div>
<div class="line">or K = 100/sum(spd*dl)        (relative == True)</div>
</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">out:</th><td class="field-body"><div class="first last line-block">
<div class="line">None or 1 or 2, optional</div>
<div class="line">Determines number and shape of output. (see :returns:)</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">cie_std_dev_obs:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">None or str, optional</div>
<div class="line">- None: don’t use CIE Standard Deviate Observer function.</div>
<div class="line">- ‘f1’: use F1 function.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first last line-block">
<div class="line">If rfl is None:</div>
<div class="line-block">
<div class="line">If out is None: ndarray of xyz values </div>
<div class="line-block">
<div class="line">(.shape = (data.shape[0],3))</div>
</div>
<div class="line">If out == 1: ndarray of xyz values </div>
<div class="line-block">
<div class="line">(.shape = (data.shape[0],3))</div>
</div>
<div class="line">If out == 2: (ndarray of xyz, ndarray of xyzw) values</div>
<div class="line-block">
<div class="line">Note that xyz == xyzw, with (.shape = (data.shape[0],3))</div>
</div>
</div>
<div class="line">If rfl is not None:</div>
<div class="line-block">
<div class="line">If out is None: ndarray of xyz values </div>
<div class="line-block">
<div class="line">(.shape = (rfl.shape[0],data.shape[0],3))</div>
</div>
<div class="line">If out == 1: ndarray of xyz values </div>
<div class="line-block">
<div class="line-block">
<div class="line">(.shape = (rfl.shape[0]+1,data.shape[0],3))</div>
<div class="line-block">
<div class="line">The xyzw values of the light source spd are the first set </div>
<div class="line">of values of the first dimension. The following values </div>
</div>
<div class="line">along this dimension are the sample (rfl) xyz values.</div>
</div>
<div class="line">If out == 2: (ndarray of xyz, ndarray of xyzw) values</div>
<div class="line-block">
<div class="line">with xyz.shape = (rfl.shape[0],data.shape[0],3)</div>
<div class="line">and with xyzw.shape = (data.shape[0],3)</div>
</div>
</div>
</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>References:</dt>
<dd><ol class="first last arabic simple">
<li><a class="reference external" href="https://doi.org/10.25039/TR.015.2018">CIE15:2018, “Colorimetry,” CIE, Vienna, Austria, 2018.</a></li>
</ol>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.spectrum.spd_to_ler">
<code class="descclassname">luxpy.spectrum.</code><code class="descname">spd_to_ler</code><span class="sig-paren">(</span><em>data</em>, <em>cieobs='1931_2'</em>, <em>K=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/spectrum/basics/spectral.html#spd_to_ler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.spectrum.spd_to_ler" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates Luminous efficacy of radiation (LER) from spectral data.</p>
<dl class="docutils">
<dt>Args: </dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">data:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray or pandas.dataframe with spectral data</div>
<div class="line">(.shape = (number of spectra + 1, number of wavelengths))</div>
<div class="line">Note that :data: is never interpolated, only CMFs and RFLs. </div>
<div class="line">This way interpolation errors due to peaky spectra are avoided. </div>
<div class="line">Conform CIE15-2018.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">cieobs:</th><td class="field-body"><div class="first last line-block">
<div class="line">luxpy._CIEOBS, optional</div>
<div class="line">Determines the color matching function set used in the </div>
<div class="line">calculation of LER. For cieobs = ‘1931_2’ the ybar CMF curve equals</div>
<div class="line">the CIE 1924 Vlambda curve.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">K:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line-block">
<div class="line">e.g.  K  = 683 lm/W for ‘1931_2’</div>
</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ler:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray of LER values. </div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>References:</dt>
<dd><ol class="first last arabic simple">
<li><a class="reference external" href="https://doi.org/10.25039/TR.015.2018">CIE15:2018, “Colorimetry,” CIE, Vienna, Austria, 2018.</a></li>
</ol>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.spectrum.spd_to_power">
<code class="descclassname">luxpy.spectrum.</code><code class="descname">spd_to_power</code><span class="sig-paren">(</span><em>data</em>, <em>ptype='ru'</em>, <em>cieobs='1931_2'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/spectrum/basics/spectral.html#spd_to_power"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.spectrum.spd_to_power" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate power of spectral data in radiometric, photometric 
or quantal energy units.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">data:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with spectral data</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">ptype:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘ru’ or str, optional</div>
<div class="line">str: - ‘ru’: in radiometric units </div>
<div class="line-block">
<div class="line">- ‘pu’: in photometric units </div>
<div class="line">- ‘pusa’: in photometric units with Km corrected </div>
<div class="line-block">
<div class="line">to standard air (cfr. CIE TN003-2015)</div>
</div>
<div class="line">- ‘qu’: in quantal energy units</div>
</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">cieobs:</th><td class="field-body"><div class="first last line-block">
<div class="line">_CIEOBS or str, optional</div>
<div class="line">Type of cmf set to use for photometric units.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><dl class="first last docutils">
<dt>returns: </dt>
<dd><div class="first last line-block">
<div class="line">ndarray with normalized spectral data (SI units)</div>
</div>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.spectrum.detect_peakwl">
<code class="descclassname">luxpy.spectrum.</code><code class="descname">detect_peakwl</code><span class="sig-paren">(</span><em>spd</em>, <em>n=1</em>, <em>verbosity=1</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/spectrum/basics/spectral.html#detect_peakwl"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.spectrum.detect_peakwl" title="Permalink to this definition">¶</a></dt>
<dd><p>Detect primary peak wavelengths and fwhm in spectrum spd.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">spd:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with spectral data (2xN). </div>
<div class="line">First row should be wavelengths.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">n:</th><td class="field-body"><div class="first last line-block">
<div class="line">1, optional</div>
<div class="line">The number of peaks to try to detect in spd. </div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">verbosity:</th><td class="field-body"><div class="first last line-block">
<div class="line">Make a plot of the detected peaks, their fwhm, etc.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">kwargs:</th><td class="field-body"><div class="first last line-block">
<div class="line">Additional input arguments for scipy.signal.find_peaks.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">prop:</th><td class="field-body"><div class="first last line-block">
<div class="line">list of dictionaries with keys: </div>
<div class="line">- ‘peaks_idx’ : index of detected peaks</div>
<div class="line">- ‘peaks’ : peak wavelength values (nm)</div>
<div class="line">- ‘heights’ : height of peaks</div>
<div class="line">- ‘fwhms’ : full-width-half-maxima of peaks</div>
<div class="line">- ‘fwhms_mid’ : wavelength at the middle of the fwhm-range of the peaks (if this is different from the values in ‘peaks’, then their is some non-symmetry in the peaks)</div>
<div class="line">- ‘fwhms_mid_heights’ : height at the middle of the peak</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.spectrum.create_spectral_interpolator">
<code class="descclassname">luxpy.spectrum.</code><code class="descname">create_spectral_interpolator</code><span class="sig-paren">(</span><em>S</em>, <em>wl=None</em>, <em>kind=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/spectrum/basics/spectral.html#create_spectral_interpolator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.spectrum.create_spectral_interpolator" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an interpolator of kind for spectral data S.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">S:</th><td class="field-body"><div class="first last line-block">
<div class="line">Spectral data array</div>
<div class="line">Row 0 should contain wavelengths if :wl:  is None.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">wl:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional </div>
<div class="line">Wavelengths</div>
<div class="line">If wl is None: row 0 of S should contain wavelengths.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">kind:</th><td class="field-body"><div class="first last line-block">
<div class="line">1, optional</div>
<div class="line">Order of spline functions used in interpolator (1&lt;=kind&lt;=5)</div>
<div class="line">Interpolator = scipy.interpolate.InterpolatedUnivariateSpline</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">interpolators:</th><td class="field-body"><div class="first last line-block">
<div class="line">List of interpolator functions for each row in S (minus wl-row if present).</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Note:</dt>
<dd><ol class="first last arabic simple">
<li>Nan’s, +infs, -infs will be ignored when generating the interpolators.</li>
</ol>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.spectrum.wls_shift">
<code class="descclassname">luxpy.spectrum.</code><code class="descname">wls_shift</code><span class="sig-paren">(</span><em>shfts</em>, <em>log_shft=False</em>, <em>wl=None</em>, <em>S=None</em>, <em>interpolators=None</em>, <em>kind=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/spectrum/basics/spectral.html#wls_shift"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.spectrum.wls_shift" title="Permalink to this definition">¶</a></dt>
<dd><p>Wavelength-shift array S over shft wavelengths.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">shfts:</th><td class="field-body"><div class="first last line-block">
<div class="line">array with wavelength shifts.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">log_shft:</th><td class="field-body"><div class="first last line-block">
<div class="line">False, optional</div>
<div class="line">If True: shift in log10 wavelength space.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">wl:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional </div>
<div class="line">Wavelengths to return</div>
<div class="line">If wl is None: S will be used and row 0 should contain wavelengths.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">S:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Spectral data array.</div>
<div class="line">Row 0 should contain wavelengths if :wl:  is None.</div>
<div class="line">If None: interpolators should be precalculated + wl must contain wavelength array !</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">interpolators:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Pre-calculated interpolators for the (non-wl) rows in S.</div>
<div class="line">If None: will be generated from :S: (which should contain wavelengths on row 0) </div>
<div class="line">with specified :kind: using scipy.interpolate.InterpolatedUnivariateSpline</div>
<div class="line">If not None and S is not None: interpolators take precedence</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">kind:</th><td class="field-body"><div class="first last line-block">
<div class="line">1, optional</div>
<div class="line">Order of spline functions used in interpolator (1&lt;=kind&lt;=5)</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">wavelength_shifted:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">array with wavelength-shifted S (or interpolators) evaluated at wl.</div>
<div class="line">(row 0 contains) </div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Note:</dt>
<dd><ol class="first last arabic simple">
<li>Nan’s, +infs, -infs will be ignored when generating the interpolators.</li>
</ol>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.spectrum.cri_ref">
<code class="descclassname">luxpy.spectrum.</code><code class="descname">cri_ref</code><span class="sig-paren">(</span><em>ccts</em>, <em>wl3=None</em>, <em>ref_type='ciera'</em>, <em>mix_range=None</em>, <em>cieobs=None</em>, <em>norm_type=None</em>, <em>norm_f=None</em>, <em>force_daylight_below4000K=False</em>, <em>n=None</em>, <em>daylight_locus=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/spectrum/basics/illuminants.html#cri_ref"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.spectrum.cri_ref" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates a reference illuminant spectrum based on cct 
for color rendering index calculations .</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ccts:</th><td class="field-body"><div class="first last line-block">
<div class="line">list of int/floats or ndarray with ccts.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">wl3:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">New wavelength range for interpolation. </div>
<div class="line">Defaults to wavelengths specified by luxpy._WL3.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">ref_type:</th><td class="field-body"><div class="first last line-block">
<div class="line">str or list[str], optional</div>
<div class="line">Specifies the type of reference spectrum to be calculated.</div>
<div class="line">Defaults to luxpy._CRI_REF_TYPE. </div>
<div class="line">If :ref_type: is list of strings, then for each cct in :ccts: </div>
<div class="line">a different reference illuminant can be specified. </div>
<div class="line">If :ref_type: == ‘spd’, then :ccts: is assumed to be an ndarray</div>
<div class="line">of reference illuminant spectra.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">mix_range:</th><td class="field-body"><div class="first last line-block">
<div class="line">None or ndarray, optional</div>
<div class="line">Determines the cct range between which the reference illuminant is</div>
<div class="line">a weigthed mean of a Planckian and Daylight Phase spectrum. </div>
<div class="line">Weighthing is done as described in IES TM30:</div>
<div class="line-block">
<div class="line">SPDreference = (Te-T)/(Te-Tb)*Planckian+(T-Tb)/(Te-Tb)*daylight</div>
<div class="line">with Tb and Te are resp. the starting and end CCTs of the </div>
<div class="line">mixing range and whereby the Planckian and Daylight SPDs </div>
<div class="line">have been normalized for equal luminous flux.</div>
</div>
<div class="line">If None: use the default specified for :ref_type:.</div>
<div class="line">Can be a ndarray with shape[0] &gt; 1, in which different mixing</div>
<div class="line">ranges will be used for cct in :ccts:.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">cieobs:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Required for the normalization of the Planckian and Daylight SPDs </div>
<div class="line">when calculating a ‘mixed’ reference illuminant.</div>
<div class="line">Required when calculating daylightphase (adjust locus parameters to cieobs)</div>
<div class="line">If None: _CIEOBS will be used.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">norm_type:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional </div>
<div class="line-block">
<div class="line">- ‘lambda’: make lambda in norm_f equal to 1</div>
<div class="line">- ‘area’: area-normalization times norm_f</div>
<div class="line">- ‘max’: max-normalization times norm_f</div>
<div class="line">- ‘ru’: to :norm_f: radiometric units </div>
<div class="line">- ‘pu’: to :norm_f: photometric units </div>
<div class="line">- ‘pusa’: to :norm_f: photometric units (with Km corrected</div>
<div class="line-block">
<div class="line">to standard air, cfr. CIE TN003-2015)</div>
</div>
<div class="line">- ‘qu’: to :norm_f: quantal energy units</div>
</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">norm_f:</th><td class="field-body"><div class="first last line-block">
<div class="line">1, optional</div>
<div class="line">Normalization factor that determines the size of normalization </div>
<div class="line">for ‘max’ and ‘area’ </div>
<div class="line">or which wavelength is normalized to 1 for ‘lambda’ option.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">force_daylight_below4000K:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">False or True, optional</div>
<div class="line">Daylight locus approximation is not defined below 4000 K, </div>
<div class="line">but by setting this to True, the calculation can be forced to </div>
<div class="line">calculate it anyway.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">n:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Refractive index (for use in calculation of blackbody radiators).</div>
<div class="line">If None: use the one stored in _BB[‘n’]</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">daylight_locus:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">dict with xD(T) and yD(xD) parameters to calculate daylight locus </div>
<div class="line">for specified cieobs.</div>
<div class="line">If None: use pre-calculated values.</div>
<div class="line">If ‘calc’: calculate them on the fly.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with reference illuminant spectra.</div>
<div class="line">(:returns:[0] contains wavelengths)</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Note: </dt>
<dd>Future versions will have the ability to take a dict as input 
for ref_type. This way other reference illuminants can be specified 
than the ones in _CRI_REF_TYPES.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.spectrum.blackbody">
<code class="descclassname">luxpy.spectrum.</code><code class="descname">blackbody</code><span class="sig-paren">(</span><em>cct</em>, <em>wl3=None</em>, <em>n=None</em>, <em>relative=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/spectrum/basics/illuminants.html#blackbody"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.spectrum.blackbody" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate blackbody radiator spectrum for correlated color temperature (cct).</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">cct:</th><td class="field-body"><div class="first last line-block">
<div class="line">int or float </div>
<div class="line">(for list of cct values, use cri_ref() with ref_type = ‘BB’)</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">wl3:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">New wavelength range for interpolation. </div>
<div class="line">Defaults to wavelengths specified by luxpy._WL3.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">n:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Refractive index.</div>
<div class="line">If None: use the one stored in _BB[‘n’]</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">relative:</th><td class="field-body"><div class="first last line-block">
<div class="line">False, optional</div>
<div class="line">True: return relative spectrum normalized to 560 nm</div>
<div class="line">False: return absolute spectral radiance (Planck’s law; W/(sr.m².nm)) </div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with blackbody radiator spectrum</div>
<div class="line">(:returns:[0] contains wavelengths)</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>References:</dt>
<dd><ol class="first last arabic simple">
<li><a class="reference external" href="https://doi.org/10.25039/TR.015.2018">CIE15:2018, “Colorimetry,” CIE, Vienna, Austria, 2018.</a></li>
</ol>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.spectrum.spd_to_indoor">
<code class="descclassname">luxpy.spectrum.</code><code class="descname">spd_to_indoor</code><span class="sig-paren">(</span><em>spd</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/spectrum/basics/illuminants.html#spd_to_indoor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.spectrum.spd_to_indoor" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert spd to indoor variant by multiplying it with the CIE spectral transmission for glass.</p>
</dd></dl>

<dl class="function">
<dt id="luxpy.spectrum.daylightlocus">
<code class="descclassname">luxpy.spectrum.</code><code class="descname">daylightlocus</code><span class="sig-paren">(</span><em>cct</em>, <em>force_daylight_below4000K=False</em>, <em>cieobs=None</em>, <em>daylight_locus=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/spectrum/basics/illuminants.html#daylightlocus"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.spectrum.daylightlocus" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates daylight chromaticity (xD,yD) from correlated color temperature (cct).</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">cct:</th><td class="field-body"><div class="first last line-block">
<div class="line">int or float or list of int/floats or ndarray</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">force_daylight_below4000K:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">False or True, optional</div>
<div class="line">Daylight locus approximation is not defined below 4000 K, </div>
<div class="line">but by setting this to True, the calculation can be forced to </div>
<div class="line">calculate it anyway.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">cieobs:</th><td class="field-body"><div class="first last line-block">
<div class="line">CMF set corresponding to xD, yD output.</div>
<div class="line">If None: use default CIE15-20xx locus for ‘1931_2’</div>
<div class="line">Else: use the locus specified in :daylight_locus:</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">daylight_locus:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">dict with xD(T) and yD(xD) parameters to calculate daylight locus </div>
<div class="line">for specified cieobs.</div>
<div class="line">If None: use pre-calculated values.</div>
<div class="line">If ‘calc’: calculate them on the fly.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">(xD, yD):</th><td class="field-body"><div class="first last line-block">
<div class="line">(ndarray of x-coordinates, ndarray of y-coordinates)</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>References:</dt>
<dd><ol class="first last arabic simple">
<li><a class="reference external" href="https://doi.org/10.25039/TR.015.2018">CIE15:2018, “Colorimetry,” CIE, Vienna, Austria, 2018.</a></li>
</ol>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.spectrum.daylightphase">
<code class="descclassname">luxpy.spectrum.</code><code class="descname">daylightphase</code><span class="sig-paren">(</span><em>cct</em>, <em>wl3=None</em>, <em>nominal_cct=False</em>, <em>force_daylight_below4000K=False</em>, <em>verbosity=None</em>, <em>n=None</em>, <em>cieobs=None</em>, <em>daylight_locus=None</em>, <em>daylight_Mi_coeffs=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/spectrum/basics/illuminants.html#daylightphase"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.spectrum.daylightphase" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate daylight phase spectrum for correlated color temperature (cct).</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">cct:</th><td class="field-body"><div class="first last line-block">
<div class="line">int or float </div>
<div class="line">(for list of cct values, use cri_ref() with ref_type = ‘DL’)</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">wl3:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">New wavelength range for interpolation. </div>
<div class="line">Defaults to wavelengths specified by luxpy._WL3.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">nominal_cct:</th><td class="field-body"><div class="first last line-block">
<div class="line">False, optional</div>
<div class="line">If cct is nominal (e.g. when calculating D65): multiply cct first</div>
<div class="line">by 1.4388/1.4380 to account for change in ‘c2’ in definition of Planckian.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">cieobs:</th><td class="field-body"><div class="first last line-block">
<div class="line">None or str or ndarray, optional</div>
<div class="line">CMF set to use when calculating coefficients for daylight locus and for M1, M2 weights.</div>
<div class="line">If None: use standard coefficients for CIE 1931 2° CMFs (for Si at 10 nm).</div>
<div class="line">Else: calculate coefficients following Appendix C of CIE15-2004 and Judd (1964).</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">force_daylight_below4000K:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">False or True, optional</div>
<div class="line">Daylight locus approximation is not defined below 4000 K, </div>
<div class="line">but by setting this to True, the calculation can be forced to </div>
<div class="line">calculate it anyway.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">verbosity:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line-block">
<div class="line">If None: do not print warning when CCT &lt; 4000 K.</div>
</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">n:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Refractive index (for use in calculation of blackbody radiators).</div>
<div class="line">If None: use the one stored in _BB[‘n’]</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">daylight_locus:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">dict with xD(T) and yD(xD) parameters to calculate daylight locus </div>
<div class="line">for specified cieobs.</div>
<div class="line">If None: use pre-calculated values.</div>
<div class="line">If ‘calc’: calculate them on the fly.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">daylight_Mi_coeffs:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">dict with coefficients for M1 &amp; M2 weights for specified cieobs.</div>
<div class="line">If None: use pre-calculated values.</div>
<div class="line">If ‘calc’: calculate them on the fly.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with daylight phase spectrum</div>
<div class="line">(:returns:[0] contains wavelengths)</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>References:</dt>
<dd><ol class="first arabic simple">
<li><a class="reference external" href="https://doi.org/10.25039/TR.015.2018">CIE15:2018, “Colorimetry,” CIE, Vienna, Austria, 2018.</a></li>
</ol>
<p class="last">2. <a class="reference external" href="https://doi.org/10.1364/JOSA.54.001031">Judd, MacAdam, Wyszecki, Budde, Condit, Henderson, &amp; Simonds (1964). 
Spectral Distribution of Typical Daylight as a Function of Correlated Color Temperature. 
J. Opt. Soc. Am., 54(8), 1031–1040.</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.spectrum.get_daylightloci_parameters">
<code class="descclassname">luxpy.spectrum.</code><code class="descname">get_daylightloci_parameters</code><span class="sig-paren">(</span><em>ccts=None, cieobs=None, wl3=[300, 830, 10], verbosity=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/spectrum/basics/illuminants.html#get_daylightloci_parameters"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.spectrum.get_daylightloci_parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Get parameters for the daylight loci functions xD(1000/CCT) and yD(xD).</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ccts:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">ndarray with CCTs, if None: ccts = np.arange(4000,25000,250)</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">cieobs:</th><td class="field-body"><div class="first last line-block">
<div class="line">None or list of str or list of ndarrays, optional</div>
<div class="line">CMF sets to determine parameters for.</div>
<div class="line">If None: get for all CMFs sets in _CMF (except scoptopic and deviate observer)</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">wl3:</th><td class="field-body"><div class="first last line-block">
<div class="line">[300,830,10], optional</div>
<div class="line">Wavelength range and spacing of daylight phases to be determined</div>
<div class="line">from ‘1931_2’. The default setting results in parameters very close</div>
<div class="line">to that in CIE15-2004/2018.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">verbosity:</th><td class="field-body"><div class="first last line-block">
<div class="line">0, optional</div>
<div class="line">print parameters and make plots.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">dayloci:</th><td class="field-body"><div class="first last line-block">
<div class="line">dict with parameters for each cieobs</div>
<div class="line">If cieobs contains ndarrays, then keys in dict will be </div>
<div class="line">labeled ‘cmf_0’, ‘cmf_1’, …</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.spectrum.get_daylightphase_Mi_coeffs">
<code class="descclassname">luxpy.spectrum.</code><code class="descname">get_daylightphase_Mi_coeffs</code><span class="sig-paren">(</span><em>cieobs=None</em>, <em>wl3=None</em>, <em>S012_daylightphase=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/spectrum/basics/illuminants.html#get_daylightphase_Mi_coeffs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.spectrum.get_daylightphase_Mi_coeffs" title="Permalink to this definition">¶</a></dt>
<dd><p>Get coefficients of Mi weights of daylight phase for specific cieobs</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">cieobs:</th><td class="field-body"><div class="first last line-block">
<div class="line">None or str or ndarray or list of str or list of ndarrays, optional</div>
<div class="line">CMF set to get coefficients for.</div>
<div class="line">If None: get coeffs for all CMFs in _CMF</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">wl3:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Wavelength range to interpolate S012_daylightphase to.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">S012_daylightphase:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">Daylight phase component functions.</div>
<div class="line">If None: use _S012_DAYLIGHTPHASE</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Mcoeffs:</th><td class="field-body"><div class="first last line-block">
<div class="line">Dictionary with i,j,k,i1,j1,k1,i2,j2,k2 for each cieobs in :cieobs:</div>
<div class="line">If cieobs contains ndarrays, then keys in dict will be </div>
<div class="line">labeled ‘cmf_0’, ‘cmf_1’, …</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.spectrum.read_spdx">
<code class="descclassname">luxpy.spectrum.</code><code class="descname">read_spdx</code><span class="sig-paren">(</span><em>spdx</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/spectrum/spdx_ietm2714.html#read_spdx"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.spectrum.read_spdx" title="Permalink to this definition">¶</a></dt>
<dd><p>Read xml file or convert xml string with spdx data to dictionary.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">spdx:</th><td class="field-body"><div class="first last line-block">
<div class="line">xml string or file with spdx data.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">spdx_dict:</th><td class="field-body"><div class="first last line-block">
<div class="line">spdx data in a dictionary.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="luxpy.spectrum.write_spdx">
<code class="descclassname">luxpy.spectrum.</code><code class="descname">write_spdx</code><span class="sig-paren">(</span><em>spdx_dict</em>, <em>filename=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/spectrum/spdx_ietm2714.html#write_spdx"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.spectrum.write_spdx" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert spdx dictionary to xml string (and write to .spdx file).</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">spdx_dict:</th><td class="field-body"><div class="first last line-block">
<div class="line">dictionary with spdx keys (see _SPDX for keys).</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">filename:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional</div>
<div class="line">string with filename to write xml data to.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">spdx_xml:</th><td class="field-body"><div class="first last line-block">
<div class="line">string with xml data in spdx dictionary.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="spd-class">
<h2>SPD class<a class="headerlink" href="#spd-class" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">py:</th><td class="field-body"><ul class="first simple">
<li>SPD.py</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">namespace:</th><td class="field-body"><p class="first last">luxpy</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<dl class="class">
<dt id="luxpy.spectrum.SPD.SPD">
<em class="property">class </em><code class="descclassname">luxpy.spectrum.SPD.</code><code class="descname">SPD</code><span class="sig-paren">(</span><em>spd=None</em>, <em>wl=None</em>, <em>ax0iswl=True</em>, <em>dtype='S'</em>, <em>wl_new=None</em>, <em>interp_method='auto'</em>, <em>negative_values_allowed=False</em>, <em>extrap_values='ext'</em>, <em>norm_type=None</em>, <em>norm_f=1</em>, <em>header=None</em>, <em>sep='</em>, <em>'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/spectrum/SPD.html#SPD"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.spectrum.SPD.SPD" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="luxpy.spectrum.SPD.SPD.read_csv_">
<code class="descname">read_csv_</code><span class="sig-paren">(</span><em>file</em>, <em>header=None</em>, <em>sep='</em>, <em>'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/spectrum/SPD.html#SPD.read_csv_"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.spectrum.SPD.SPD.read_csv_" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads spectral data from file.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">file:</th><td class="field-body"><div class="first last line-block">
<div class="line">filename </div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">header:</th><td class="field-body"><div class="first last line-block">
<div class="line">None or ‘infer’, optional</div>
<div class="line">If ‘infer’: headers will be inferred from file itself.</div>
<div class="line">If None: no headers are expected from file.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">sep:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘,’, optional</div>
<div class="line">Column separator.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with spectral data (first row are wavelengths)</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Note:</dt>
<dd>Spectral data in file should be organized in columns with the first
column containing  the wavelengths.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="luxpy.spectrum.SPD.SPD.plot">
<code class="descname">plot</code><span class="sig-paren">(</span><em>ylabel='Spectrum'</em>, <em>wavelength_bar=True</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/spectrum/SPD.html#SPD.plot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.spectrum.SPD.SPD.plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a plot of the spectral data in SPD instance.</p>
<dl class="docutils">
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first last line-block">
<div class="line">handle to current axes.</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="luxpy.spectrum.SPD.SPD.mean">
<code class="descname">mean</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/spectrum/SPD.html#SPD.mean"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.spectrum.SPD.SPD.mean" title="Permalink to this definition">¶</a></dt>
<dd><p>Take mean of all spectra in SPD instance.</p>
</dd></dl>

<dl class="method">
<dt id="luxpy.spectrum.SPD.SPD.sum">
<code class="descname">sum</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/spectrum/SPD.html#SPD.sum"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.spectrum.SPD.SPD.sum" title="Permalink to this definition">¶</a></dt>
<dd><p>Sum all spectra in SPD instance.</p>
</dd></dl>

<dl class="method">
<dt id="luxpy.spectrum.SPD.SPD.dot">
<code class="descname">dot</code><span class="sig-paren">(</span><em>S</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/spectrum/SPD.html#SPD.dot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.spectrum.SPD.SPD.dot" title="Permalink to this definition">¶</a></dt>
<dd><p>Take dot product with instance of SPD.</p>
</dd></dl>

<dl class="method">
<dt id="luxpy.spectrum.SPD.SPD.add">
<code class="descname">add</code><span class="sig-paren">(</span><em>S</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/spectrum/SPD.html#SPD.add"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.spectrum.SPD.SPD.add" title="Permalink to this definition">¶</a></dt>
<dd><p>Add instance of SPD.</p>
</dd></dl>

<dl class="method">
<dt id="luxpy.spectrum.SPD.SPD.sub">
<code class="descname">sub</code><span class="sig-paren">(</span><em>S</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/spectrum/SPD.html#SPD.sub"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.spectrum.SPD.SPD.sub" title="Permalink to this definition">¶</a></dt>
<dd><p>Subtract instance of SPD.</p>
</dd></dl>

<dl class="method">
<dt id="luxpy.spectrum.SPD.SPD.mul">
<code class="descname">mul</code><span class="sig-paren">(</span><em>S</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/spectrum/SPD.html#SPD.mul"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.spectrum.SPD.SPD.mul" title="Permalink to this definition">¶</a></dt>
<dd><p>Multiply by instance of SPD.</p>
</dd></dl>

<dl class="method">
<dt id="luxpy.spectrum.SPD.SPD.div">
<code class="descname">div</code><span class="sig-paren">(</span><em>S</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/spectrum/SPD.html#SPD.div"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.spectrum.SPD.SPD.div" title="Permalink to this definition">¶</a></dt>
<dd><p>Divide by instance of SPD.</p>
</dd></dl>

<dl class="method">
<dt id="luxpy.spectrum.SPD.SPD.pow">
<code class="descname">pow</code><span class="sig-paren">(</span><em>n</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/spectrum/SPD.html#SPD.pow"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.spectrum.SPD.SPD.pow" title="Permalink to this definition">¶</a></dt>
<dd><p>Raise SPD instance to power n.</p>
</dd></dl>

<dl class="method">
<dt id="luxpy.spectrum.SPD.SPD.get_">
<code class="descname">get_</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/spectrum/SPD.html#SPD.get_"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.spectrum.SPD.SPD.get_" title="Permalink to this definition">¶</a></dt>
<dd><p>Get spd as ndarray in instance of SPD.</p>
</dd></dl>

<dl class="method">
<dt id="luxpy.spectrum.SPD.SPD.setwlv">
<code class="descname">setwlv</code><span class="sig-paren">(</span><em>spd</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/spectrum/SPD.html#SPD.setwlv"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.spectrum.SPD.SPD.setwlv" title="Permalink to this definition">¶</a></dt>
<dd><p>Store spd ndarray in fields wl and values of instance of SPD.</p>
</dd></dl>

<dl class="method">
<dt id="luxpy.spectrum.SPD.SPD.getwld_">
<code class="descname">getwld_</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/spectrum/SPD.html#SPD.getwld_"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.spectrum.SPD.SPD.getwld_" title="Permalink to this definition">¶</a></dt>
<dd><p>Get wavelength spacing of SPD instance.</p>
<dl class="docutils">
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first last line-block">
<div class="line">float:  for equal wavelength spacings</div>
<div class="line-block">
<div class="line">ndarray (.shape = (n,)): for unequal wavelength spacings</div>
</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="luxpy.spectrum.SPD.SPD.normalize">
<code class="descname">normalize</code><span class="sig-paren">(</span><em>norm_type=None</em>, <em>norm_f=1</em>, <em>cieobs='1931_2'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/spectrum/SPD.html#SPD.normalize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.spectrum.SPD.SPD.normalize" title="Permalink to this definition">¶</a></dt>
<dd><p>Normalize spectral power distributions in SPD instance.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">norm_type:</th><td class="field-body"><div class="first last line-block">
<div class="line">None, optional </div>
<div class="line-block">
<div class="line">- ‘lambda’: make lambda in norm_f equal to 1</div>
<div class="line">- ‘area’: area-normalization times norm_f</div>
<div class="line">- ‘max’: max-normalization times norm_f</div>
<div class="line">- ‘ru’: to :norm_f: radiometric units </div>
<div class="line">- ‘pu’: to :norm_f: photometric units </div>
<div class="line">- ‘pusa’: to :norm_f: photometric units (with Km corrected</div>
<div class="line-block">
<div class="line">to standard air, cfr. CIE TN003-2015)</div>
</div>
<div class="line">- ‘qu’: to :norm_f: quantal energy units</div>
</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">norm_f:</th><td class="field-body"><div class="first last line-block">
<div class="line">1, optional</div>
<div class="line">Determines size of normalization for ‘max’ and ‘area’ 
or which wavelength is normalized to 1 for ‘lambda’ option.</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">cieobs:</th><td class="field-body"><div class="first last line-block">
<div class="line">_CIEOBS or str, optional</div>
<div class="line">Type of cmf set to use for normalization using photometric 
units (norm_type == ‘pu’)</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="luxpy.spectrum.SPD.SPD.cie_interp">
<code class="descname">cie_interp</code><span class="sig-paren">(</span><em>wl_new</em>, <em>kind='auto'</em>, <em>sprague5_allowed=False</em>, <em>negative_values_allowed=False</em>, <em>extrap_values='ext'</em>, <em>extrap_kind='linear'</em>, <em>extrap_log=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/spectrum/SPD.html#SPD.cie_interp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.spectrum.SPD.SPD.cie_interp" title="Permalink to this definition">¶</a></dt>
<dd><p>Interpolate / extrapolate spectral data following standard CIE15-2018.</p>
<div class="line-block">
<div class="line">The interpolation type depends on the spectrum type defined in :kind:. </div>
</div>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">wl_new:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with new wavelengths</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">kind:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘auto’, optional</div>
<div class="line">If :kind: is None, return original data.</div>
<div class="line">If :kind: is a spectrum type (see _INTERP_TYPES), the correct </div>
<div class="line-block">
<div class="line">interpolation type if automatically chosen.</div>
<div class="line-block">
<div class="line">(The use of the slow(er) ‘sprague5’ can be toggled on using :sprague5_allowed:).</div>
</div>
</div>
<div class="line">If kind = ‘auto’: use self.dtype</div>
<div class="line">Or :kind: can be any interpolation type supported by </div>
<div class="line-block">
<div class="line">scipy.interpolate.interp1d (luxpy.math.interp1 if nan’s are present!!)</div>
<div class="line">or can be ‘sprague5’ (uses luxpy.math.interp1_sprague5). </div>
</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">sprague5_allowed:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">False, optional</div>
<div class="line">If True: When kind is a spectral data type from _INTERP_TYPES[‘cubic’],</div>
<div class="line-block">
<div class="line">then a cubic spline interpolation will be used in case of </div>
<div class="line">unequal wavelength spacings, otherwise a 5th order Sprague will be used.</div>
</div>
<div class="line">If False: always use ‘cubic’, don’t use ‘sprague5’. </div>
<div class="line-block">
<div class="line">This is the default, as differences are minimal and </div>
<div class="line">use of the ‘sprague5’ function is a lot slower!</div>
</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">negative_values_allowed:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><div class="first last line-block">
<div class="line">False, optional</div>
<div class="line">If False: negative values are clipped to zero</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">extrap_values:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘ext’, optional</div>
<div class="line">If ‘ext’: extrapolate using ‘linear’ (‘cie167:2005’ r), ‘quadratic’ (‘cie15:2018’) </div>
<div class="line-block">
<div class="line">‘nearest’ (‘cie15:2004’) recommended or other (e.g. ‘cubic’) methods.</div>
</div>
<div class="line">If None: use CIE15:2004 recommended ‘nearest value’ approach when extrapolating.</div>
<div class="line">If float or list or ndarray, use those values to fill extrapolated value(s).</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">extrap_kind:</th><td class="field-body"><div class="first last line-block">
<div class="line">‘linear’, optional</div>
<div class="line">Extrapolation method used when :extrap_values: is set to ‘ext’. </div>
<div class="line">Options: ‘linear’ (‘cie167:2005’), ‘quadratic’ (‘cie15:2018’), </div>
<div class="line-block">
<div class="line">‘nearest’ (‘cie15:2004’), ‘cubic’</div>
</div>
<div class="line">CIE15:2018 states that based on a 2017 paper by Wang that ‘quadratic’ is ‘better’. </div>
<div class="line">However, no significant difference was found between ‘quadratic’ and ‘linear’ methods.</div>
<div class="line">Also see note 1 below, for why the CIE67:2005 recommended ‘linear’ extrapolation</div>
<div class="line">is set as the default.            </div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">extrap_log:</th><td class="field-body"><div class="first last line-block">
<div class="line">False, optional</div>
<div class="line">If True: extrap the log of the spectral values </div>
<div class="line-block">
<div class="line">(not CIE recommended but in most cases seems to give a </div>
<div class="line">more realistic estimate, but can sometimes seriously fail, </div>
<div class="line">especially for the ‘quadratic’ extrapolation case (see note 1)!!!)</div>
</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray of interpolated spectral data.</div>
<div class="line">(.shape = (number of spectra+1, number of wavelength in wl_new))</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Notes:</dt>
<dd><div class="first last line-block">
<div class="line">1. Type of extrapolation: ‘quadratic’ vs ‘linear’; impact of extrapolating log spectral values:</div>
<div class="line-block">
<div class="line">Using a ‘linear’ or ‘quadratic’ extrapolation, as mentioned in </div>
<div class="line">CIE167:2005 and CIE15:2018, resp., can lead to extreme large values </div>
<div class="line">when setting :extrap_log: (not CIE recommended) to True. </div>
<div class="line">A quick test with the IES TM30 spectra (400 nm - 700 nm, 5 nm spacing) </div>
<div class="line">shows that ‘linear’ is better than ‘quadratic’ in terms of </div>
<div class="line">mean, median and max DEu’v’ with the original spectra (380 nm - 780 nm, 5 nm spacing).</div>
<div class="line">This conferms the recommendation from CIE167:2005 to use ‘linear’ extrapolation.</div>
<div class="line">Setting :extrap_log: to True reduces the median, but inflates the mean due to some</div>
<div class="line">extremely large DEu’v’ values. However, the increase in mean and max DEu’v’ is much </div>
<div class="line">larger for the ‘quadratic’ case, suggesting that ‘linear’ extrapolation </div>
<div class="line">is likely a more suitable recommendation. When using a 1 nm spacing</div>
<div class="line">‘linear’ is more similar to ‘quadratic’ when :extrap_log: is False, otherwise ‘linear’</div>
<div class="line">remains the ‘best’. Hence the choice to use the CIE167:2005 recommended linear extrapolation as default!</div>
</div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="luxpy.spectrum.SPD.SPD.to_xyz">
<code class="descname">to_xyz</code><span class="sig-paren">(</span><em>relative=True</em>, <em>rfl=None</em>, <em>cieobs='1931_2'</em>, <em>out=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/luxpy/spectrum/SPD.html#SPD.to_xyz"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#luxpy.spectrum.SPD.SPD.to_xyz" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates xyz tristimulus values from spectral data 
and return as instance of XYZ.</p>
<dl class="docutils">
<dt>Args: </dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">relative:</th><td class="field-body"><div class="first last line-block">
<div class="line">True or False, optional</div>
<div class="line">Calculate relative XYZ (Yw = 100) 
or absolute XYZ (Y = Luminance)</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">rfl:</th><td class="field-body"><div class="first last line-block">
<div class="line">ndarray with spectral reflectance functions.</div>
<div class="line">Will be interpolated if wavelengths don’t match those of :data:</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">cieobs:</th><td class="field-body"><div class="first last line-block">
<div class="line">luxpy._CIEOBS, optional</div>
<div class="line">Determines the color matching functions to be used in the 
calculation of XYZ.</div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">out:</th><td class="field-body"><div class="first last line-block">
<div class="line">None or 1 or 2, optional</div>
<div class="line">Determines number and shape of output. (see :returns:)</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Returns:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body"><div class="first last line-block">
<div class="line">luxpy.XYZ instance with ndarray .value field:</div>
<div class="line">If rfl is None:</div>
<div class="line-block">
<div class="line">If out is None: ndarray of xyz values </div>
<div class="line-block">
<div class="line">(.shape = (data.shape[0],3))</div>
</div>
<div class="line">If out == 1: ndarray of xyz values </div>
<div class="line-block">
<div class="line">(.shape = (data.shape[0],3))</div>
</div>
<div class="line">If out == 2: (ndarray of xyz , ndarray of xyzw) values</div>
<div class="line-block">
<div class="line">Note that xyz == xyzw, with (.shape=(data.shape[0],3))</div>
</div>
</div>
<div class="line">If rfl is not None:</div>
<div class="line-block">
<div class="line">If out is None: ndarray of xyz values </div>
<div class="line-block">
<div class="line">(.shape = (rfl.shape[0],data.shape[0],3))</div>
</div>
<div class="line">If out == 1: ndarray of xyz values </div>
<div class="line-block">
<div class="line-block">
<div class="line">(.shape = (rfl.shape[0]+1,data.shape[0],3))</div>
</div>
<div class="line">The xyzw values of the light source spd are the first </div>
<div class="line">set of values of the first dimension. </div>
<div class="line">The following values along this dimension are the </div>
<div class="line">sample (rfl) xyz values.</div>
</div>
<div class="line">If out == 2: (ndarray of xyz, ndarray of xyzw) values</div>
<div class="line-block">
<div class="line">with xyz.shape = (rfl.shape[0],data.shape[0],3)</div>
<div class="line">and with xyzw.shape = (data.shape[0],3)</div>
</div>
</div>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>References:</dt>
<dd><ol class="first last arabic simple">
<li><a class="reference external" href="https://doi.org/10.25039/TR.015.2018">CIE15:2018, “Colorimetry,” CIE, Vienna, Austria, 2018.</a></li>
</ol>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="math.html" class="btn btn-neutral float-left" title="Math sub-package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="color.html" class="btn btn-neutral float-right" title="Color sub-package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Kevin A.G. Smet.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>